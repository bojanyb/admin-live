(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-640d564c"],{"060a":function(e,t,i){},"127f":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var r=i("40bd"),a=i("7e8c"),l=(i("48d4"),i("8bda"),i("897d")),s=i.n(l),n=i("4109"),o={ossParams:{region:"oss-cn-shenzhen",success_action_status:"200",accessKeyId:"LTAI5tFTcRH7h3RXKoYmnWMk",accessKeySecret:"qdx4B8jIh2VjBgBDG5fNfG0Oj21GSP",bucket:"live-huidapay-net"}};function u(e){var t=e.name.split("."),i=s()(Date.now()+t[0]);return i=i+"."+t[t.length-1],i}function c(e){return new Promise(function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(i,a){var l,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l=u(e),s=new n({region:o.ossParams.region,accessKeyId:o.ossParams.accessKeyId,accessKeySecret:o.ossParams.accessKeySecret,bucket:o.ossParams.bucket}),t.next=4,s.multipartUpload(l,e);case 4:t.sent,i({url:"https://photo.aiyi.live/"+l});case 6:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}())}},"1a5c":function(e,t,i){"use strict";i("060a")},"1fe8":function(e,t,i){e.exports=i.p+"static/img/error.e53687be.png"},2708:function(e,t,i){"use strict";var r=i("4672"),a=i("52c1"),l={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(r["a"])({},Object(a["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=l},"2ba0":function(e,t,i){"use strict";i("9528")},"4201d":function(e,t,i){"use strict";i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return o}));var r=i("829b"),a=i("8daa");function l(e){return Object(r["a"])({url:a["a"].nobility.save,method:"post",data:e})}function s(e){return Object(r["a"])({url:a["a"].nobility.detail,method:"post",data:e})}function n(e){return Object(r["a"])({url:a["a"].nobility.priceSave,method:"post",data:e})}function o(e){return Object(r["a"])({url:a["a"].nobility.nobilitylist,method:"post",data:e})}},"65b5":function(e,t,i){},7568:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gift-list-box"},[i("div",{staticClass:"searchParams"},[i("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":this.permissionArr.includes("Gift@addGift")},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),i("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?i("giftAdd",{ref:"giftAdd",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},a=[],l=i("4672"),s=(i("23dc"),i("8bda"),i("48d4"),i("65e5"),i("45c1"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"giftAdd-box"},[i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"580px",top:"5vh","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:"礼物名",prop:"gift_name"}},[i("el-input",{attrs:{placeholder:"请输入礼物名"},model:{value:e.ruleForm.gift_name,callback:function(t){e.$set(e.ruleForm,"gift_name",t)},expression:"ruleForm.gift_name"}})],1),i("el-form-item",{attrs:{label:"礼物类型",prop:"gift_genre"}},[i("el-radio-group",{model:{value:e.ruleForm.gift_genre,callback:function(t){e.$set(e.ruleForm,"gift_genre",t)},expression:"ruleForm.gift_genre"}},e._l(e.giftTypeList,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),i("el-form-item",{attrs:{label:"礼物分类",prop:"gift_class"}},[i("el-checkbox-group",{model:{value:e.ruleForm.gift_class,callback:function(t){e.$set(e.ruleForm,"gift_class",t)},expression:"ruleForm.gift_class"}},e._l(e.classifyList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),-1!==e.ruleForm.gift_class.indexOf(16)?i("el-form-item",{attrs:{label:"贵族等级",prop:"noble_level"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.noble_level,callback:function(t){e.$set(e.ruleForm,"noble_level",t)},expression:"ruleForm.noble_level"}},e._l(e.nobilityList,(function(e){return i("el-option",{key:e.noble_level,attrs:{label:e.noble_name,value:e.noble_level}})})),1)],1):e._e(),i("el-form-item",{attrs:{label:"活动礼物",prop:"is_activity"}},[i("el-radio-group",{model:{value:e.ruleForm.is_activity,callback:function(t){e.$set(e.ruleForm,"is_activity",t)},expression:"ruleForm.is_activity"}},e._l(e.activityList,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),i("el-form-item",{attrs:{label:"礼物角标",prop:"gift_icon"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("ImageUpload",{ref:"uploadGiftIcon",attrs:{imgUrl:e.ruleForm.gift_icon,name:"gift_icon",accept:".png"},on:{validateField:e.validateField},model:{value:e.ruleForm.gift_icon,callback:function(t){e.$set(e.ruleForm,"gift_icon",t)},expression:"ruleForm.gift_icon"}}),e.ruleForm.gift_icon?i("div",{staticStyle:{flex:"1","margin-left":"10px"}},[i("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.reUpload("uploadGiftIcon")}}},[e._v("更改")])],1):e._e()],1)]),i("el-form-item",{attrs:{label:"礼物banner",prop:"gift_banner"}},[i("uploadGift",{ref:"uploadGift",attrs:{name:"gift_banner"},model:{value:e.ruleForm.gift_banner,callback:function(t){e.$set(e.ruleForm,"gift_banner",t)},expression:"ruleForm.gift_banner"}})],1),i("el-form-item",{attrs:{label:"礼物播放类型",prop:"play_type"}},[i("el-radio-group",{on:{input:e.handleChangePlayType},model:{value:e.ruleForm.play_type,callback:function(t){e.$set(e.ruleForm,"play_type",t)},expression:"ruleForm.play_type"}},e._l(e.playTypeList,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),i("el-form-item",{attrs:{label:"显示类型",prop:"is_hide"}},[i("el-select",{attrs:{placeholder:"请选择显示类型"},model:{value:e.ruleForm.is_hide,callback:function(t){e.$set(e.ruleForm,"is_hide",t)},expression:"ruleForm.is_hide"}},e._l(e.showList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"礼物图片",prop:"gift_photo"}},[i("uploadImg",{ref:"uploadImg",attrs:{imgUrl:e.ruleForm.gift_photo,name:"gift_photo",accept:".png,.jpg,.jpeg"},on:{validateField:e.validateField},model:{value:e.ruleForm.gift_photo,callback:function(t){e.$set(e.ruleForm,"gift_photo",t)},expression:"ruleForm.gift_photo"}})],1),i("el-form-item",{attrs:{label:"礼物特效",prop:"gift_gif"}},[i("uploadImg",{key:e.componentKey,ref:"uploadImg",attrs:{imgUrl:e.ruleForm.gift_gif,name:"gift_gif",accept:e.limitImgType},on:{validateField:e.validateField},model:{value:e.ruleForm.gift_gif,callback:function(t){e.$set(e.ruleForm,"gift_gif",t)},expression:"ruleForm.gift_gif"}})],1),3==e.ruleForm.play_type?i("el-form-item",{attrs:{label:"礼物特效文件",prop:"mp4_conf_url"}},[i("uploadImg",{ref:"uploadImg",attrs:{imgUrl:e.ruleForm.mp4_conf_url,name:"mp4_conf_url",accept:".json"},on:{validateField:e.validateField},model:{value:e.ruleForm.mp4_conf_url,callback:function(t){e.$set(e.ruleForm,"mp4_conf_url",t)},expression:"ruleForm.mp4_conf_url"}})],1):e._e(),"add"!==e.status?i("el-form-item",{attrs:{label:"礼物版本号",prop:"gift_version"}},[i("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d.]/g,'');",placeholder:"请输入礼物版本号"},model:{value:e.ruleForm.gift_version,callback:function(t){e.$set(e.ruleForm,"gift_version",t)},expression:"ruleForm.gift_version"}})],1):e._e(),i("el-form-item",{attrs:{label:"钻石价格",prop:"gift_diamond"}},[i("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",placeholder:"请输入钻石价格",disabled:"add"!==e.status},model:{value:e.ruleForm.gift_diamond,callback:function(t){e.$set(e.ruleForm,"gift_diamond",t)},expression:"ruleForm.gift_diamond"}})],1),i("el-form-item",{attrs:{label:"礼物生效时间",prop:"start_time"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"timestamp","picker-options":e.timePicker},model:{value:e.ruleForm.start_time,callback:function(t){e.$set(e.ruleForm,"start_time",t)},expression:"ruleForm.start_time"}})],1),i("el-form-item",{attrs:{label:"礼物过期时间",prop:"end_time"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"timestamp","picker-options":e.timePicker},model:{value:e.ruleForm.end_time,callback:function(t){e.$set(e.ruleForm,"end_time",t)},expression:"ruleForm.end_time"}})],1),"add"!==e.status?i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.filterStatusList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),i("el-form-item",{attrs:{label:"排序",prop:"sort"}},[i("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",placeholder:"请输入排序"},on:{input:e.inputSort},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),i("el-form-item",{attrs:{label:"礼物说明",prop:"gift_desc"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入礼物说明"},model:{value:e.ruleForm.gift_desc,callback:function(t){e.$set(e.ruleForm,"gift_desc",t)},expression:"ruleForm.gift_desc"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)}),n=[],o=i("40bd"),u=i("7e8c"),c=(i("96c5"),i("6166"),i("1af9"),i("65c4"),i("1a72")),p=i("4201d"),m=i("40cb"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uploadImg"},[i("el-upload",{ref:"uploadImg",staticClass:"avatar-uploader",attrs:{action:"",disabled:e.disabled,accept:e.accept,"show-file-list":!1,"before-upload":e.beforeUpload,"before-remove":e.beforeRemove,"http-request":e.upLoad}},[e.url&&"png"===e.isSpecial?i("img",{staticClass:"avatar",attrs:{src:e.url}}):e._e(),e.url&&"svga"===e.isSpecial&&e.isShowSvg?i("svgComp",{ref:"svgComp",attrs:{src:e.url,styleObj:{width:"178px",height:"178px"}}}):e._e(),e.url?e._e():i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e.url&&"zip"===e.isSpecial?i("span",{staticClass:"fileName"},[e._v("已上传zip文件")]):e._e(),e.url&&"mp4"===e.isSpecial?i("videoPlayerComp",{ref:"videoPlayerComp",style:{width:"178px",height:"178px"},attrs:{url:e.url,baseOptions:{controls:!1,autoplay:!0,loop:!0}}}):e._e()],1)],1)},f=[],g=(i("430a"),i("eb5c"),i("15f2"),i("0ea2"),i("e2b5"),i("f56b"),i("127f")),h=i("1990"),b=i("c7b8"),_={components:{svgComp:h["a"],videoPlayerComp:b["a"]},props:{name:{type:String,default:""},disabled:{type:Boolean,default:!1},isFileType:{type:Boolean,default:!1},accept:{type:String,default:""},imgUrl:{type:String,default:""},beforeUpload:{type:Function,default:function(){return!0}},beforeRemove:{type:Function,default:function(){return!0}},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},isShowImg:{type:Boolean,default:!0}},computed:{url:function(){return this.isShowImg?this.imgUrl?this.imgUrl:this.imageUrl:""},isSpecial:function(){if(this.url){if(-1!==this.url.indexOf(".png")||-1!==this.url.indexOf(".webp")||-1!==this.url.indexOf(".gif")||-1!==this.url.indexOf(".jpg")||-1!==this.url.indexOf(".jpeg"))return"png";if(-1!==this.url.indexOf(".svga"))return"svga";if(-1!==this.url.indexOf(".zip")||-1!==this.url.indexOf(".mp3")||-1!==this.url.indexOf(".m4a"))return"zip";if(-1!==this.url.indexOf(".mp4"))return"mp4"}}},data:function(){return{imageUrl:"",isShowSvg:!0}},methods:{upLoad:function(e){e.file.size;var t=e.file.type,i=JSON.parse(JSON.stringify(this.accept));if(i=i.replace(".",""),-1==t.indexOf(i)&&1==this.isFileType)return this.$message.error("上传图片只能是"+i+"格式!"),!1;this.uploadImg(e)},uploadImg:function(e){var t=this;this.isShowSvg=!1,this.$store.commit("app/SET_LOADING",!0),Object(g["a"])(e.file).then((function(i){i.url&&(t.$emit("input",i.url),t.$emit("getFile",e),t.$store.commit("app/SET_LOADING",!1),t.isShowSvg=!0,t.$emit("validateField",t.name),t.imageUrl=i.url,t.$emit("uploadSuccess",i.url))})).catch((function(e){t.$message.error(e)}))},limitFileWH:function(e,t,i){var r=this,a=new Promise((function(r,a){var l=Number(e),s=Number(t),n=window.URL||window.webkitURL,o=new Image;o.onload=function(){o.width,o.height;var e=o.width===l&&o.height===s;e?r():a()},o.src=n.createObjectURL(i)})).then((function(){return!0}),(function(){return r.$message.error({message:"上传图片的尺寸应为"+e+"*"+t,btn:!1}),!1}));return a},reUpload:function(){this.$refs["uploadImg"].$children[0].$refs.input.click()},clear:function(){this.$refs["uploadImg"].clearFiles()}}},v=_,y=(i("2ba0"),i("e607")),F=Object(y["a"])(v,d,f,!1,null,null,null),x=F.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-img-wrap"},[e.fileList.length?i("ul",{staticClass:"el-upload-list el-upload-list--picture"},e._l(e.fileList,(function(t,r){return i("li",{key:t.src,staticClass:"el-upload-list__item"},[i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.src,alt:""}}),i("div",{staticClass:"el-upload-list__item-info"},[i("div",{staticClass:"button-box"},[i("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.reUpload(r)}}},[e._v("更改")]),i("el-button",{attrs:{type:"danger",round:"",size:"small"},on:{click:function(t){return e.remove(r)}}},[e._v("删除")])],1),i("div",{staticClass:"input-box"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",size:"small",disabled:4==t.type},model:{value:t.val,callback:function(i){e.$set(t,"val",i)},expression:"item.val"}},[i("el-select",{staticClass:"type-select",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"item.type"}},[i("el-option",{attrs:{label:"半屏H5",value:"5"}}),i("el-option",{attrs:{label:"全屏H5",value:"1"}}),i("el-option",{attrs:{label:"房间ID",value:"2"}}),i("el-option",{attrs:{label:"用户ID",value:"3"}}),i("el-option",{attrs:{label:"无跳转",value:"4"}})],1)],1),i("el-input",{directives:[{name:"show",rawName:"v-show",value:5==t.type,expression:"item.type == 5"}],staticClass:"height-input",attrs:{placeholder:"请输入屏幕高度"},model:{value:t.high,callback:function(i){e.$set(t,"high",i)},expression:"item.high"}},[i("template",{slot:"append"},[e._v("dp")])],2)],1)])])})),0):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:this.fileList.length<5,expression:"this.fileList.length < 5"}],style:e.uploadStyle},[i("ImageUpload",{ref:"uploadImg",attrs:{imgUrl:e.imgUrl,name:"gift_banner",accept:".jpg,.jpeg",isShowImg:!1},on:{uploadSuccess:e.uploadSuccess},model:{value:e.imgUrl,callback:function(t){e.imgUrl=t},expression:"imgUrl"}})],1)])},I=[],S=(i("2910"),i("ed70"),{components:{ImageUpload:x},props:{value:{type:Array,default:function(){return[]}}},data:function(){return{curIndex:-1,imgUrl:"",fileList:[],select:"",selectInput:"",heightInput:"",isShow:!1}},watch:{value:{handler:function(e){if(!e)return this.fileList=[],[];var t=Array.isArray(e)?e:this.value.split(",");this.fileList=t},deep:!0,immediate:!0}},computed:{uploadStyle:function(){if(this.fileList.length)return{"margin-top":"10px"}}},methods:{validateField:function(e){this.$refs.ruleForm.validateField([e])},remove:function(e){this.fileList.splice(e,1)},reUpload:function(e){this.curIndex=e,this.$refs.uploadImg.reUpload()},uploadSuccess:function(e){if(this.imgUrl="",this.$refs.uploadImg.clear(),this.curIndex>-1&&this.fileList.length){var t=Object.assign({},this.fileList[this.curIndex],{src:e});this.fileList.splice(this.curIndex,1,t),this.curIndex=-1}else this.fileList.push({src:e})}}}),k=S,L=(i("1a5c"),Object(y["a"])(k,w,I,!1,null,null,null)),O=L.exports,$=i("279a"),T={components:{uploadImg:m["a"],ImageUpload:x,UploadGift:O},data:function(){return{dialogVisible:!0,activityList:$["a"].GIFTACTIVETYLIST,playTypeList:$["a"].SYSTEMGIFTPLAYTYPELIST,classifyList:$["a"].SYSTEMGIFTCLASSIFYLIST,nobilityList:[],showList:$["a"].GIFTSHOWTYPELIST,status:"add",ruleForm:{gift_name:"",gift_genre:4,play_type:1,is_activity:1,gift_icon:"",gift_banner:[],gift_photo:"",gift_gif:"",mp4_conf_url:"",gift_version:"",gift_diamond:null,start_time:null,end_time:null,status:null,sort:null,gift_desc:"",gift_class:[],noble_level:"",is_hide:null},rules:{gift_name:[{required:!0,message:"请输入礼物名",trigger:"blur"}],gift_genre:[{required:!0,message:"请选择礼物类型",trigger:"change"}],gift_class:[{required:!0,message:"请选择礼物分类",trigger:"change"}],noble_level:[{required:!0,message:"请选择贵族等级",trigger:"change"}],is_activity:[{required:!0,message:"请选择是否是活动礼物",trigger:"change"}],play_type:[{required:!0,message:"请选择礼物播放类型",trigger:"change"}],is_hide:[{required:!0,message:"请选择显示类型",trigger:"change"}],gift_photo:[{required:!0,message:"请上传礼物图片",trigger:"change"}],gift_gif:[{required:!0,message:"请上传礼物特效",trigger:"change"}],mp4_conf_url:[{required:!0,message:"请上传礼物特效文件",trigger:"change"}],gift_version:[{required:!0,message:"请输入礼物版本号",trigger:"change"}],gift_diamond:[{required:!0,message:"请输入钻石价格",trigger:"change"}],start_time:[{type:"date",required:!0,message:"请选择礼物生效时间",trigger:"change"}],end_time:[{type:"date",required:!0,message:"请选择礼物过期时间",trigger:"change"}],status:[{required:!0,message:"请选择礼物状态",trigger:"change"}],sort:[{required:!0,message:"请输入礼物排序",trigger:"blur"}],gift_desc:[{required:!0,message:"请输入礼物说明",trigger:"blur"}]},componentKey:0}},computed:{giftTypeList:function(){var e=$["a"].SYSTEMGIFTLIST.filter((function(e){return e.value>3}));return e},filterStatusList:function(){var e=$["a"].LIBRARYGIFTSLIST,t=e.filter((function(e){return e.value}));return t},title:function(){return"add"===this.status?"新增礼物":"修改礼物"},timePicker:function(){return{disabledDate:function(e){return e.getTime()<(new Date).getTime()-864e5}}},limitImgType:function(){return 1===this.ruleForm.play_type?".zip":2===this.ruleForm.play_type?".svg,.svga":3===this.ruleForm.play_type?".mp4":void 0}},methods:{inputSort:function(e){Number(e)>=65535&&(this.ruleForm.sort=65535)},loadParams:function(e,t){if(this.status=e,this.dialogVisible=!0,"add"!==e){var i=JSON.parse(JSON.stringify(t));i.start_time=1e3*i.start_time,i.end_time=1e3*i.end_time,i.noble_level=i.noble_level?i.noble_level:null,this.$set(this.$data,"ruleForm",i)}},submitForm:function(e){var t=this;return Object(u["a"])(Object(o["a"])().mark((function i(){return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$refs[e].validate(function(){var e=Object(u["a"])(Object(o["a"])().mark((function e(i){var r,a,s;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=22;break}if(r=Object(l["a"])({},t.ruleForm),r.start_time=Math.floor(r.start_time/1e3),r.end_time=Math.floor(r.end_time/1e3),"add"!==t.status){e.next=13;break}return delete r.status,delete r.gift_version,e.next=9,Object(c["P"])(r);case 9:a=e.sent,2e3===a.code&&t.$message.success("新增成功"),e.next=18;break;case 13:return-1===r.gift_class.indexOf(16)&&(r.noble_level=0),e.next=16,Object(c["Q"])(r);case 16:s=e.sent,2e3===s.code&&t.$message.success("修改成功");case 18:t.dialogVisible=!1,t.$emit("getList"),e.next=24;break;case 22:return console.log("error submit!!"),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return i.stop()}}),i)})))()},resetForm:function(){this.dialogVisible=!1},handleClose:function(){this.dialogVisible=!1},validateField:function(e){this.$refs.ruleForm.validateField([e])},closed:function(){this.$emit("destoryComp")},getNobility:function(){var e=this;return Object(u["a"])(Object(o["a"])().mark((function t(){var i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["b"])();case 2:i=t.sent,e.nobilityList=i.data.list||[];case 4:case"end":return t.stop()}}),t)})))()},handleChangePlayType:function(){this.componentKey+=1,this.ruleForm.gift_gif="",this.ruleForm.mp4_conf_url="",this.ruleForm.play_type,this.rule.mp4_conf_url=!1},reUpload:function(e){this.$refs[e].reUpload()}},mounted:function(){this.getNobility()}},j=T,C=(i("b351"),Object(y["a"])(j,s,n,!1,null,null,null)),U=C.exports,P=i("04a2"),Y=i("4053"),G=i("8daa"),A=i("cf45"),D=i("2708"),H={mixins:[D["a"]],components:{SearchPanel:P["a"],tableList:Y["a"],giftAdd:U},data:function(){return{isDestoryComp:!1}},computed:{forms:function(){return[{name:"gift_name",type:"input",value:"",label:"礼物名称",placeholder:"请输入礼物名称"},{name:"id",type:"input",value:"",label:"礼物ID",isNum:!0,placeholder:"请输入礼物ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"礼物状态",placeholder:"",options:$["a"].LIBRARYGIFTSLIST,handler:{change:function(e){}}},{name:"is_activity",type:"select",value:0,keyName:"value",optionLabel:"name",label:"是否活动礼物",placeholder:"请选择",options:$["a"].ISACTIVETYLIST}]},cfgs:function(){var e=this,t=[{label:"排序",width:"95px",prop:"sort"},{label:"礼物名称",width:"95px",prop:"gift_name"},{label:"礼物ID",width:"95px",prop:"id"},{label:"礼物图片",isimg:!0,prop:"gift_photo",imgHeight:"60px",width:"100px",height:"70px"},{label:"礼物类型",width:"110px",render:function(e,t){var i=$["a"].SYSTEMGIFTLIST.find((function(e){return e.value===t.row.gift_genre}));return e("span",i?i.name:"无")}},{label:"是否活动礼物",width:"110px",render:function(e,t){var i=$["a"].GIFTACTIVETYLIST.find((function(e){return e.value===t.row.is_activity}));return e("span",i?i.name:"无")}},{label:"显示类型",width:"110px",render:function(e,t){var i=$["a"].GIFTSHOWTYPELIST.find((function(e){return e.value===t.row.is_hide}));return e("span",i?i.name:"无")}},{label:"钻石价格",width:"95px",prop:"gift_diamond"},{label:"礼物价值",width:"95px",render:function(e,t){var i=t.row.gain_price?t.row.gain_price+"喵粮":"";return e("span",i||"无")}},{label:"平台礼物抽成",width:"110px",render:function(e,t){var i=t.row.gift_rate?t.row.gift_rate/100+"%":"";return e("span",i||"无")}},{label:"状态",render:function(e,t){var i=$["a"].LIBRARYGIFTSLIST.find((function(e){return e.value===t.row.status}));return e("span",{style:{color:1===t.row.status?"#67C23A":"#F56C6C"}},i?i.name:"无")}},{label:"礼物说明",width:"110px",render:function(e,t){return e("span",t.row.gift_desc||"无")}},{label:"礼物生效时间",width:"180px",render:function(e,t){return e("span",t.row.start_time?Object(A["h"])(t.row.start_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"礼物失效时间",width:"180px",render:function(e,t){return e("span",t.row.end_time?Object(A["h"])(t.row.end_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"礼物添加时间",width:"180px",render:function(e,t){return e("span",t.row.create_time?Object(A["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"礼物修改时间",width:"180px",render:function(e,t){return e("span",t.row.create_time?Object(A["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"礼物版本号",width:"95px",render:function(e,t){return e("span",t.row.gift_version||"无")}},{label:"操作",width:"120px",fixed:"right",render:function(t,i){return t("div",[t("el-button",{props:{type:"primary"},style:{display:1===i.row.status&&e.permissionArr.includes("Gift@saveGift")?"unset":"none"},on:{click:function(){e.update(i.row)}}},"修改")])}}];return{vm:this,url:G["a"].system.gift.giftList,columns:this.permissionArr.includes("Gift@index")?t:[]}}},methods:{beforeSearch:function(e){var t=Object(l["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,status:t.status,gift_name:t.gift_name,id:t.id,is_activity:t.is_activity}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={status:"",gift_name:""},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var i=this;this.isDestoryComp=!0,setTimeout((function(){i.$refs.giftAdd.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1},handleGiftRefresh:function(){var e=this;this.$prompt("请输入缓存刷新密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){"888888"==t.value?getGiftRefresh().then((function(e){console.log(e)})).catch((function(t){e.$message.error(t)})):e.$message.error("请输入正确的密码")})).catch((function(){}))}}},q=H,M=(i("ddc1"),Object(y["a"])(q,r,a,!1,null,null,null));t["default"]=M.exports},9528:function(e,t,i){},b351:function(e,t,i){"use strict";i("ff30")},ddc1:function(e,t,i){"use strict";i("65b5")},ff30:function(e,t,i){}}]);