(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7074c1c9"],{"1fe8":function(e,t,a){e.exports=a.p+"static/img/error.e53687be.png"},2708:function(e,t,a){"use strict";var r=a("4672"),s=a("52c1"),n={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(r["a"])({},Object(s["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=n},daf5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container roomConfig-joinRoom-box"},[a("div",{staticClass:"searchParams"},[a("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0,addName:"汇总数据"},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),a("div",{staticClass:"model"},[a("span",[e._v("查询期间：")]),a("span",[e._v("进房人数："),a("span",[e._v(e._s(e.ruleForm.join_room_count||0))]),e._v(" 个")]),a("span",[e._v("房间数："),a("span",[e._v(e._s(e.ruleForm.room_count||0))]),e._v(" 个")]),a("span",[e._v("首次进房人数："),a("span",[e._v(e._s(e.ruleForm.first_join_room_count||0))]),e._v(" 人")]),a("span",[e._v("跟随进房人数："),a("span",[e._v(e._s(e.ruleForm.follow_join_room_count||0))]),e._v(" 人")])]),a("div",{staticClass:"table-title"},[e._v(e._s(e.isSummary?"汇总数据":"详情数据"))]),a("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs},on:{saleAmunt:e.saleAmunt}})],1)},s=[],n=a("4672"),i=(a("23dc"),a("8bda"),a("48d4"),a("04a2")),o=a("4053"),m=a("8daa"),u=a("2708"),c=a("cf45"),l=a("279a"),p={mixins:[u["a"]],components:{SearchPanel:i["a"],tableList:o["a"]},data:function(){return{isDestoryComp:!1,searchParams:{join_type:-1,is_first:-1},ruleForm:{join_room_count:0,room_count:0,first_join_room_count:0,follow_join_room_count:0},isSummary:!1}},computed:{forms:function(){var e=this;return[{name:"user_number",type:"input",value:"",label:"用户ID",isNum:!0,placeholder:"请输入用户ID"},{name:"room_number",type:"input",value:"",label:"房间ID",isNum:!0,placeholder:"请输入房间ID"},{name:"join_type",type:"select",value:-1,keyName:"value",optionLabel:"name",label:"进房类型",placeholder:"请选择",options:l["a"].JOINHOUSETYPELIST},{name:"is_first",type:"select",value:-1,keyName:"value",optionLabel:"name",label:"是否首次进房",placeholder:"请选择",options:l["a"].ISFIRSTJOINHOUSELIST},{name:"dateTimeParams",type:"datePicker",dateType:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",label:"时间选择",value:"",handler:{change:function(t){e.emptyDateTime(),e.setDateTime(t)},selectChange:function(t,a){e.emptyDateTime()}}}]},cfgs:function(){var e=this,t=this.isSummary?"statJoin":"joinRoomLog",a=[{label:"进房时间",minWidth:"100px",render:function(e,t){return e("span",t.row.in_time?Object(c["h"])(t.row.in_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"进房类型",render:function(e,t){var a=l["a"].JOINHOUSETYPELIST.find((function(e){return e.value===t.row.join_type}));return e("span",a?a.name:"")}},{label:"是否首次进房",render:function(e,t){var a=l["a"].ISFIRSTJOINHOUSELIST.find((function(e){return e.value===t.row.is_first}));return e("span",a?a.name:"")}},{label:"用户ID",prop:"user_number"},{label:"用户昵称",prop:"user_nickname"},{label:"房间ID",prop:"room_number"},{label:"房间标题",prop:"room_name"},{label:"跟随用户ID",render:function(e,t){return e("span",t.row.follow_user_number||"无")}}],r=[{label:"房间ID",prop:"room_number"},{label:"房间标题",prop:"room_name"},{label:"用户数量",render:function(t,a){return t("div",[t("el-button",{props:{type:"text"},on:{click:function(){e.seeDetails(a.row.room_number)}}},a.row.user_count)])}}];return{vm:this,url:m["a"].house[t],columns:this.isSummary?r:a}}},methods:{beforeSearch:function(e){var t=Object(n["a"])(Object(n["a"])({},this.searchParams),this.dateTimeParams),a={page:e.page,pagesize:e.size,join_type:t.join_type,user_number:t.user_number,is_first:t.is_first,room_number:t.room_number,start_time:t.start_time?Math.floor(t.start_time/1e3):"",end_time:t.end_time?Math.floor(t.end_time/1e3):""};return this.isSummary&&(delete a.user_number,delete a.join_type),a},getList:function(){this.$refs.tableList.getData()},setDateTime:function(e){var t=e?{start_time:e[0],end_time:e[1]}:{};this.$set(this,"dateTimeParams",t)},emptyDateTime:function(){this.dateTimeParams={}},reset:function(){this.searchParams={join_type:-1,is_first:-1},this.resetTimestamp(),this.isSummary=!1,this.getList()},onSearch:function(){this.isSummary=!1,this.getList()},saleAmunt:function(e){this.ruleForm=Object(n["a"])({},e)},add:function(){var e=this;if(this.searchParams.join_type>=0||this.searchParams.user_number)return this.$message.error("汇总数据不能筛选进房类型和用户ID，请重新选择！"),!1;this.isSummary=!0,this.$nextTick((function(){e.getList()}))},seeDetails:function(e){this.isSummary=!1,this.searchParams={room_number:e},this.getList()},resetTimestamp:function(){var e=864e5,t=new Date-e,a=Object(c["h"])(t,"YYYY-MM-DD",!1),r=new Date(a+" 00:00:00").getTime(),s=new Date(a+" 23:59:59").getTime();this.searchParams.dateTimeParams=[r,s],this.dateTimeParams={start_time:r,end_time:s}}},created:function(){this.resetTimestamp()}},_=p,h=(a("ed92"),a("e607")),d=Object(h["a"])(_,r,s,!1,null,"656bb66b",null);t["default"]=d.exports},e2ae:function(e,t,a){},ed92:function(e,t,a){"use strict";a("e2ae")}}]);