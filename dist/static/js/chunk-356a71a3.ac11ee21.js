(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-356a71a3"],{"1fe8":function(e,t,s){e.exports=s.p+"static/img/error.e53687be.png"},2708:function(e,t,s){"use strict";var r=s("5530"),i=s("2f62"),a={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(r["a"])({},Object(i["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=a},"33c9":function(e,t,s){"use strict";s("a2e9")},a2e9:function(e,t,s){},b2c3:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container consume-list-box"},[s("div",{staticClass:"btnBox"},[s("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增主管")])],1),s("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?s("operateComp",{ref:"operateComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},i=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"consumeComp-box"},[s("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"450px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"运营主管",prop:"lead_id"}},[s("el-select",{attrs:{placeholder:"请选择",disabled:"update"===e.status},model:{value:e.ruleForm.lead_id,callback:function(t){e.$set(e.ruleForm,"lead_id",t)},expression:"ruleForm.lead_id"}},e._l(e.mainOptions,(function(e){return s("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})})),1)],1),"update"===e.status?s("el-form-item",{attrs:{label:"公会运营",prop:"member_ids"}},[s("el-select",{attrs:{placeholder:"请选择",multiple:""},model:{value:e.ruleForm.member_ids,callback:function(t){e.$set(e.ruleForm,"member_ids",t)},expression:"ruleForm.member_ids"}},e._l(e.staffOptions,(function(e){return s("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})})),1)],1):e._e()],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},o=[],n=s("c7eb"),l=s("1da1"),u=(s("b64b"),s("e9c4"),s("a15b"),s("1a72")),c={data:function(){return{dialogVisible:!1,status:"add",ruleForm:{lead_id:"",member_ids:""},rules:{lead_id:[{required:!0,message:"请选择运营主管",trigger:"blur"}],member_ids:[{required:!0,message:"请选择公会运营",trigger:"blur"}]},mainOptions:[],staffOptions:[]}},mounted:function(){this.getOptions()},computed:{title:function(){return"add"===this.status?"新增公会主管":"update"===this.status?"新增工会运营":void 0}},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e,t){if(this.dialogVisible=!0,this.status=e,"update"===e){var s=JSON.parse(JSON.stringify(t));console.log("params",s),this.getOptions(s)}},getOptions:function(e){var t=this,s={};e&&e.lead_id&&(s.lead_id=e.lead_id),Object(u["T"])(s).then((function(s){if(console.log(s),2e3===s.code){var r=s.data||[];e&&e.lead_id?(t.staffOptions=r,t.$set(t.$data,"ruleForm",e)):t.mainOptions=r}}))},submitForm:function(e){var t=this;return Object(l["a"])(Object(n["a"])().mark((function s(){return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$refs[e].validate(function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(s){var r,i,a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=10;break}return r=t.ruleForm,i={lead_id:r.lead_id},"update"===t.status&&(i.member_ids=Array.isArray(r.member_ids)?r.member_ids.join(","):r.member_ids),e.next=6,Object(u["Ub"])(i);case 6:a=e.sent,2e3===a.code&&(t.$message.success("操作成功！"),t.dialogVisible=!1,t.$emit("getList")),e.next=12;break;case 10:return console.log("error submit!!"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return s.stop()}}),s)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")}}},d=c,m=s("2877"),p=Object(m["a"])(d,a,o,!1,null,"2adaf1b3",null),f=p.exports,b=s("4053"),h=s("2708"),g=s("8daa"),_=s("cf45"),v={name:"operate-manage",mixins:[h["a"]],components:{operateComp:f,tableList:b["a"]},computed:{cfgs:function(){var e=this;return{vm:this,url:g["a"].system.operate.getManagerList,columns:[{label:"运营主管",prop:"lead_name"},{label:"公会运营成员",prop:"member_name",render:function(e,t){return e("span",t.row.member_name||"无")}},{label:"修改时间",render:function(e,t){return e("span",t.row.update_time?Object(_["h"])(t.row.update_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"操作",render:function(t,s){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(s.row)}}},"修改")])}}]}}},data:function(){return{isDestoryComp:!1}},methods:{getList:function(){this.$refs.tableList.getData()},beforeSearch:function(e){return{page:e.page,pagesize:e.size}},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},destoryComp:function(){this.isDestoryComp=!1},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var s=this;this.isDestoryComp=!0,setTimeout((function(){s.$refs.operateComp.loadParams(e,t)}),50)}}},O=v,y=(s("33c9"),Object(m["a"])(O,r,i,!1,null,null,null));t["default"]=y.exports}}]);