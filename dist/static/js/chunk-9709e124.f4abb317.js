(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9709e124"],{"02f5":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guildAudit-guildRebates-add-box"},[r("el-dialog",{attrs:{title:"新增24小时房间",visible:e.dialogVisible,width:"600px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("div",{staticClass:"formBox"},[r("div",{staticClass:"sunBox"},[r("span",[e._v("房间ID")]),r("el-input",{attrs:{placeholder:"请先输入房间ID"},model:{value:e.room_number,callback:function(t){e.room_number=t},expression:"room_number"}})],1),r("el-button",{attrs:{disabled:!e.room_number,type:"success"},on:{click:e.addStatisticsroomFunc}},[e._v("添加")]),r("el-button",{attrs:{disabled:!e.room_number,type:"primary"},on:{click:e.searchStatisticsroomFunc}},[e._v("查询")])],1),e.tableData&&e.tableData.length?r("div",{staticClass:"table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"online",label:"上周（自然周）开播时长"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e._f("filtersFormatTimeTwo")(r.online))+" ")]}}],null,!1,441559232)}),r("el-table-column",{attrs:{prop:"flow",label:"上周（自然周）开播流水（喵粮）"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.flow+"钻石")+" ")]}}],null,!1,837459822)})],1)],1):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)])],1)},s=[],n=r("c7eb"),i=r("1da1"),o=r("c24f"),l=r("cf45"),u={data:function(){return{dialogVisible:!1,room_number:"",tableData:[]}},filters:{filtersFormatTimeTwo:function(e){var t=Object(l["d"])(e);return t}},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(){this.dialogVisible=!0},addStatisticsroomFunc:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["b"])({room_number:e.room_number});case 2:r=t.sent,2e3===r.code&&(e.$success("添加成功"),e.dialogVisible=!1,e.$emit("getList"));case 4:case"end":return t.stop()}}),t)})))()},searchStatisticsroomFunc:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["n"])({room_number:e.room_number,page:1,pagesize:10});case 2:r=t.sent,2e3===r.code&&(e.tableData=r.data.list);case 4:case"end":return t.stop()}}),t)})))()},closed:function(){this.$emit("destoryComp")}}},c=u,d=(r("0f6f"),r("2877")),m=Object(d["a"])(c,a,s,!1,null,null,null);t["a"]=m.exports},"0bf9":function(e,t,r){},"0f6f":function(e,t,r){"use strict";r("6468")},"0fc0":function(e,t,r){"use strict";r("4289")},"1aa7":function(e,t,r){},"1aea":function(e,t,r){},"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},"23f2":function(e,t,r){"use strict";r("1aa7")},2708:function(e,t,r){"use strict";var a=r("5530"),s=r("2f62"),n={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(a["a"])({},Object(s["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=n},"2d98":function(e,t,r){"use strict";r("590a")},3438:function(e,t,r){},3926:function(e,t,r){"use strict";r("8261")},4289:function(e,t,r){},"48fd":function(e,t,r){},"56d68":function(e,t,r){},"590a":function(e,t,r){},"5de3":function(e,t,r){},6468:function(e,t,r){},"72c0":function(e,t,r){"use strict";r("56d68")},"76ee":function(e,t,r){"use strict";r("bb66")},8261:function(e,t,r){},"895f":function(e,t,r){},8988:function(e,t,r){"use strict";r("895f")},a2b3:function(e,t,r){"use strict";r("fc47")},b214:function(e,t,r){"use strict";r("1aea")},bb66:function(e,t,r){},c440:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container systemConfig-guild-class-box"},[r("menuComp",{ref:"menuComp",attrs:{menuList:e.menuList},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}}),r(e.comp,{ref:e.comp,tag:"component"})],1)},s=[],n=r("3923"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("gradeComp",{ref:"gradeComp",attrs:{type:"guildGrade"},on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},o=[],l=r("c7eb"),u=r("1da1"),c=r("5530"),d=(r("7db0"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("13d5"),r("14d9"),r("1a72")),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-classComp-box"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"610px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"公会等级",prop:"name"}},[r("el-input",{attrs:{maxlength:"10",placeholder:"仅支持中英文数字"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"周返点比例",prop:"rewards",rules:e.rewardsRules}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/[^0-9.]/g,'')",oninput:"this.value=this.value.replace(/[^0-9.]/g,'')"},model:{value:e.ruleForm.rewards,callback:function(t){e.$set(e.ruleForm,"rewards",t)},expression:"ruleForm.rewards"}})],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"起始流水",prop:"start",rules:e.startRules}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",maxlength:"10",placeholder:"起始流水"},model:{value:e.ruleForm.start,callback:function(t){e.$set(e.ruleForm,"start",t)},expression:"ruleForm.start"}})],1),r("el-form-item",{attrs:{label:"结束流水",prop:"end",rules:e.endRules}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",maxlength:"10",placeholder:"结束流水"},model:{value:e.ruleForm.end,callback:function(t){e.$set(e.ruleForm,"end",t)},expression:"ruleForm.end"}})],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"公会类型",prop:"guild_type"}},[r("el-select",{attrs:{placeholder:"请选择公会类型",disabled:"update"===e.status},model:{value:e.ruleForm.guild_type,callback:function(t){e.$set(e.ruleForm,"guild_type",t)},expression:"ruleForm.guild_type"}},e._l(e.guildTypeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},p=[],f=(r("e9c4"),r("d9e2"),r("a9e3"),r("b64b"),r("279a")),b={computed:{title:function(){return"add"===this.status?"添加公会等级配置":"update"===this.status?"修改公会等级配置":void 0},startRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){var s=JSON.stringify(r);e.ruleForm.start&&0!=e.ruleForm.start?s&&-1!=s.indexOf(".")&&(s.split(".").length>2||s.split(".")[1].length>2)?callback(new Error("请输入正确格式的起始流水")):e.ruleForm.end&&Number(e.ruleForm.start)>=Number(e.ruleForm.end)?a(new Error("起始流水不可大于等于结束流水")):a():a(new Error("请输入有效起始流水"))}},t},endRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.end?e.ruleForm.start&&Number(e.ruleForm.end)<=Number(e.ruleForm.start)?a(new Error("结束流水不可小于等于起始流水")):a():a(new Error("请输入结束流水"))}},t},rewardsRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.rewards&&0!=e.ruleForm.rewards?Number(e.ruleForm.rewards)>15?a(new Error("周返点比例最大为15")):a():a(new Error("请输入有效周返点比例"))}},t}},data:function(){return{status:"add",dialogVisible:!1,codeList:f["a"].CLASSLIST,ruleForm:{id:null,name:null,start:"",end:"",rewards:"",type:1,rewards_type:2},rules:{name:[{required:!0,message:"请选择公会等级",trigger:"change"}],rewards:[{required:!0,message:"请输入周返点比例",trigger:"blur"}],start:[{required:!0,message:"请输入起始流水",trigger:"blur"}],end:[{required:!0,message:"请输入结束流水",trigger:"blur"}],guild_type:[{required:!0,message:"请选择公会类型",trigger:"change"}]},guildTypeList:[]}},created:function(){this.getTypeList()},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e,t){if(this.status=e,this.dialogVisible=!0,"add"!==e){var r=JSON.parse(JSON.stringify(t));this.$set(this.$data,"ruleForm",r)}},submitForm:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(u["a"])(Object(l["a"])().mark((function e(r){var a,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return a=Object(c["a"])({},t.ruleForm),e.next=4,Object(d["Rb"])(a);case 4:s=e.sent,2e3===s.code&&("add"===t.status?t.$success("新增成功"):t.$success("修改成功"),t.dialogVisible=!1,t.$emit("getList")),e.next=10;break;case 8:return console.log("error submit!!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()}}},h=b,v=(r("76ee"),r("2877")),g=Object(v["a"])(h,m,p,!1,null,null,null),y=g.exports,w=r("04a2"),_=r("4053"),O=r("8daa"),x=r("2708"),L=r("cf45"),C={mixins:[x["a"]],components:{SearchPanel:w["a"],tableList:_["a"],gradeComp:y},computed:{forms:function(){var e=this;return[{name:"name",type:"input",value:null,keyName:"value",optionLabel:"name",label:"公会等级",placeholder:"公会等级"},{name:"guild_type",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会类型",placeholder:"请选择",clearable:!0,linkage:!0,options:this.guildTypeList,handler:{change:function(t){e.getGenreList({belong:t}),e.searchParams.room_type=""}}},{name:"room_type",type:"select",value:"",keyName:"value",optionLabel:"name",label:"房间类型",placeholder:"请选择",clearable:!0,options:this.roomTypeList}]},cfgs:function(){var e=this;return{vm:this,url:O["a"].guild.settlementConfig,columns:[{label:"公会类型",render:function(e,t){var r=f["a"].GUILDCONFIGTYPELIST.find((function(e){return e.value===t.row.guild_type}));return e("span",r?r.name:"无")}},{label:"公会等级",render:function(e,t){return e("span",t.row.name)}},{label:"流水范围",render:function(e,t){return e("span",Object(L["f"])(t.row.start)+"~"+Object(L["f"])(t.row.end))}},{label:"周返点比例",render:function(e,t){return e("span",t.row.rewards+"%")}},{label:"操作",minWidth:"120px",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},on:{click:function(){e.deleteParams(r.row.id,1)}}},"删除")])}}]}}},data:function(){return{isDestoryComp:!1,guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getGenreList()},methods:{beforeSearch:function(e){var t=Object(c["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,name:t.name,type:1,guild_type:t.guild_type,room_type:t.room_type}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.gradeComp.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1},deleteParams:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("确认删除当前公会等级配置吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(Object(l["a"])().mark((function r(){var a;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["v"])({id:e});case 2:a=r.sent,2e3===a.code&&(t.$success("删除成功"),t.getList());case 4:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getGenreList:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){var a,s;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["yb"])(e);case 2:a=r.sent,2e3==a.code&&(s=Array.from(Array.isArray(a.data.list)?a.data.list:[]),t.roomTypeList=s.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return r.stop()}}),r)})))()}}},F=C,j=Object(v["a"])(F,i,o,!1,null,null,null),k=j.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("rebateComp",{ref:"rebateComp",attrs:{type:"guildGrade"},on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},$=[],S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-classComp-box"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"610px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"公会类型",prop:"guild_type"}},[r("el-select",{attrs:{placeholder:"请选择公会类型"},model:{value:e.ruleForm.guild_type,callback:function(t){e.$set(e.ruleForm,"guild_type",t)},expression:"ruleForm.guild_type"}},e._l(e.guildTypeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"实时返点比例",prop:"rebate",rules:e.rebateRules}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/[^0-9.]/g,'')",oninput:"this.value=this.value.replace(/[^0-9.]/g,'')"},model:{value:e.ruleForm.rebate,callback:function(t){e.$set(e.ruleForm,"rebate",t)},expression:"ruleForm.rebate"}})],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},P=[],A={computed:{title:function(){return"".concat("add"===this.status?"新增":"修改","修改实时返点配置")},rebateRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.rebate&&0!=e.ruleForm.rebate?a():a(new Error("请输入有效实时返点比例"))}},t}},data:function(){return{status:"add",dialogVisible:!1,codeList:f["a"].CLASSLIST,ruleForm:{guild_type:null,rebate:null},rules:{guild_type:[{required:!0,message:"请选择公会类型",trigger:"change"}],rebate:[{required:!0,message:"请输入实时返点比例",trigger:"blur"}]},guildTypeList:[]}},created:function(){this.getTypeList()},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e,t){if(this.status=e,this.dialogVisible=!0,"add"!==e){var r=JSON.parse(JSON.stringify(t));this.$set(this.$data,"ruleForm",r)}},submitForm:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(u["a"])(Object(l["a"])().mark((function e(r){var a,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=16;break}if(a={guild_type:t.ruleForm.guild_type,rebate:t.ruleForm.rebate},"add"!==t.status){e.next=8;break}return e.next=5,Object(d["b"])(a);case 5:s=e.sent,e.next=13;break;case 8:if("update"!==t.status){e.next=13;break}return a.id=t.ruleForm.id,e.next=12,Object(d["Zb"])(a);case 12:s=e.sent;case 13:2e3===s.code&&("add"===t.status?t.$success("新增成功"):"update"===t.status&&t.$success("修改成功"),t.dialogVisible=!1,t.$emit("getList")),e.next=18;break;case 16:return console.log("error submit!!"),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()}}},N=A,E=(r("2d98"),Object(v["a"])(N,S,P,!1,null,null,null)),I=E.exports,D={mixins:[x["a"]],components:{SearchPanel:w["a"],tableList:_["a"],rebateComp:I},computed:{forms:function(){return[]},cfgs:function(){var e=this;return{vm:this,url:O["a"].guild.getGuildRebateList,columns:[{label:"公会类型",render:function(e,t){var r=f["a"].GUILDCONFIGTYPELIST.find((function(e){return e.value===t.row.guild_type}));return e("span",r?r.name:"无")}},{label:"实时返点比例",render:function(e,t){return e("span",t.row.rebate+"%")}},{label:"操作",minWidth:"120px",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},on:{click:function(){e.deleteParams(r.row.id,1)}}},"删除")])}}]}}},data:function(){return{isDestoryComp:!1,guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getGenreList()},methods:{beforeSearch:function(e){var t=Object(c["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,name:t.name,type:1,guild_type:t.guild_type,room_type:t.room_type}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.rebateComp.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1},deleteParams:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("确认删除当前公会等级配置吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(Object(l["a"])().mark((function r(){var a;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["t"])({id:e});case 2:a=r.sent,2e3===a.code&&(t.$success("删除成功"),t.getList());case 4:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getGenreList:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){var a,s;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["yb"])(e);case 2:a=r.sent,2e3==a.code&&(s=Array.from(Array.isArray(a.data.list)?a.data.list:[]),t.roomTypeList=s.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return r.stop()}}),r)})))()}}},R=D,V=Object(v["a"])(R,T,$,!1,null,null,null),G=V.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("weekComp",{ref:"weekComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},B=[],U=(r("99af"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-classComp-box"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"610px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"房间类型",prop:"room_type"}},[r("el-select",{attrs:{placeholder:"请选择公会类型",disabled:"update"===e.status},model:{value:e.ruleForm.room_type,callback:function(t){e.$set(e.ruleForm,"room_type",t)},expression:"ruleForm.room_type"}},e._l(e.roomTypeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"公会类型",prop:"guild_type"}},[r("el-select",{attrs:{placeholder:"请选择公会类型",disabled:"update"===e.status},model:{value:e.ruleForm.guild_type,callback:function(t){e.$set(e.ruleForm,"guild_type",t)},expression:"ruleForm.guild_type"}},e._l(e.guildTypeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{staticClass:"form-col",attrs:{label:"起始流水",prop:"start",rules:e.startRules}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",maxlength:"10",placeholder:"起始流水"},model:{value:e.ruleForm.start,callback:function(t){e.$set(e.ruleForm,"start",t)},expression:"ruleForm.start"}}),r("div",{staticClass:"unit"},[e._v("元")])],1),r("el-form-item",{staticClass:"form-col",attrs:{label:"结束流水",prop:"end",rules:e.endRules}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",maxlength:"10",placeholder:"结束流水"},model:{value:e.ruleForm.end,callback:function(t){e.$set(e.ruleForm,"end",t)},expression:"ruleForm.end"}}),r("div",{staticClass:"unit"},[e._v("元")])],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"奖励类型",prop:"rewards_type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.rewards_type,callback:function(t){e.$set(e.ruleForm,"rewards_type",t)},expression:"ruleForm.rewards_type"}},e._l(e.rewards_typeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"奖励名称",prop:"name"}},[r("el-input",{attrs:{maxlength:"10",placeholder:"仅支持中英文数字"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{staticClass:"form-col",attrs:{label:"奖励数额",prop:"rewards"}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');"},model:{value:e.ruleForm.rewards,callback:function(t){e.$set(e.ruleForm,"rewards",t)},expression:"ruleForm.rewards"}}),r("div",{staticClass:"unit"},[e._v(" "+e._s(2===+e.ruleForm.rewards_type?"%":"喵粮")+" ")])],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)}),z=[],Y=(r("ac1f"),r("5319"),{computed:{title:function(){return"add"===this.status?"添加周奖励配置":"update"===this.status?"修改周奖励配置":void 0},startRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.start&&0!=e.ruleForm.start?e.ruleForm.end&&Number(e.ruleForm.start)>=Number(e.ruleForm.end)?a(new Error("起始流水不可大于等于结束流水")):a():a(new Error("请输入有效起始流水"))}},t},endRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.end?e.ruleForm.start&&Number(e.ruleForm.end)<=Number(e.ruleForm.start)?a(new Error("结束流水不可小于等于起始流水")):a():a(new Error("请输入结束流水"))}},t}},data:function(){var e=this;return{status:"add",dialogVisible:!1,codeList:f["a"].CLASSLIST,rewards_typeList:f["a"].GUILDCONFIGURATIONRATETYPELIST,ruleForm:{id:null,name:null,start:"",end:"",rewards:"",rewards_type:null,type:2},rules:{name:[{required:!0,message:"请输入奖励名称",trigger:"blur",validator:function(t,r,a){var s=r.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/gi,"");return e.ruleForm.name=s,a()}}],start:[{required:!0,message:"请输入起始流水",trigger:"input"},{message:"请输入正整数",trigger:"blur",pattern:/^([1-9]\d*|[0]{1,1})$/}],end:[{required:!0,message:"请输入结束流水",trigger:"input"},{message:"请输入正整数",trigger:"blur",pattern:/^([1-9]\d*|[0]{1,1})$/}],rewards_type:[{required:!0,message:"请选择评级奖励类型",trigger:"change"}],rewards:[{required:!0,message:"请输入评级奖励",trigger:"input"}],guild_type:[{required:!0,message:"请选择公会类型",trigger:"change"}],room_type:[{required:!0,message:"请选择房间类型",trigger:"change"}]},guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getRoomTypeList()},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e,t){if(this.status=e,this.dialogVisible=!0,"add"!==e){var r=JSON.parse(JSON.stringify(t));this.$set(this.$data,"ruleForm",r)}},submitForm:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(u["a"])(Object(l["a"])().mark((function e(r){var a,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return a=Object(c["a"])({},t.ruleForm),e.next=4,Object(d["Rb"])(a);case 4:s=e.sent,2e3===s.code&&("add"===t.status?t.$success("新增成功"):t.$success("修改成功"),t.dialogVisible=!1,t.$emit("getList")),e.next=10;break;case 8:return console.log("error submit!!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getRoomTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["yb"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.roomTypeList=a.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()}}}),J=Y,W=(r("ff11"),Object(v["a"])(J,U,z,!1,null,null,null)),Z=W.exports,H={mixins:[x["a"]],components:{SearchPanel:w["a"],tableList:_["a"],weekComp:Z},computed:{forms:function(){var e=this;return[{name:"code",type:"input",value:null,keyName:"value",optionLabel:"name",label:"奖励名称",clearable:!0,placeholder:"奖励名称"},{name:"guild_type",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会类型",placeholder:"请选择",clearable:!0,linkage:!0,options:this.guildTypeList,handler:{change:function(t){e.getGenreList({belong:t}),e.searchParams.room_type=""}}},{name:"room_type",type:"select",value:"",keyName:"value",optionLabel:"name",label:"房间类型",placeholder:"请选择",clearable:!0,options:this.roomTypeList}]},cfgs:function(){var e=this;return{vm:this,url:O["a"].guild.settlementConfig,columns:[{label:"公会类型",render:function(e,t){var r=f["a"].GUILDCONFIGTYPELIST.find((function(e){return e.value===t.row.guild_type}));return e("span",r?r.name:"无")}},{label:"房间类型",prop:"room_type_name"},{label:"奖励名称",prop:"name"},{label:"流水范围",render:function(e,t){return e("span",Object(L["f"])(t.row.start)+"~"+Object(L["f"])(t.row.end))}},{label:"奖励类型",render:function(e,t){var r=f["a"].GUILDCONFIGURATIONRATETYPELIST.find((function(e){return e.value===t.row.rewards_type}));return e("span",r?r.name:"无")}},{label:"奖励数额",prop:"rewards",render:function(e,t){var r=f["a"].RENDERGUILDCONFIG.find((function(e){return e.value===t.row.rewards_type}));return e("span",t.row.rewards_type?"".concat(t.row.rewards).concat(r.name):"无")}},{label:"操作",minWidth:"120px",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},on:{click:function(){e.deleteParams(r.row.id,1)}}},"删除")])}}]}}},data:function(){return{isDestoryComp:!1,guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getGenreList()},methods:{beforeSearch:function(e){var t=Object(c["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,code:t.code,type:2,guild_type:t.guild_type,room_type:t.room_type}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.weekComp.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1},deleteParams:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("确认删除当前公会周奖励配置吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(Object(l["a"])().mark((function r(){var a;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,Object(d["v"])({id:e});case 3:a=r.sent,2e3===a.code&&(t.$success("删除成功"),t.getList());case 5:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getGenreList:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){var a,s;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["yb"])(e);case 2:a=r.sent,2e3==a.code&&(s=Array.from(Array.isArray(a.data.list)?a.data.list:[]),t.roomTypeList=s.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return r.stop()}}),r)})))()}}},M=H,K=(r("3926"),Object(v["a"])(M,q,B,!1,null,null,null)),Q=K.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("mouthComp",{ref:"mouthComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},ee=[],te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-classComp-box"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"610px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"房间类型",prop:"room_type"}},[r("el-select",{attrs:{placeholder:"请选择公会类型",disabled:"update"===e.status},model:{value:e.ruleForm.room_type,callback:function(t){e.$set(e.ruleForm,"room_type",t)},expression:"ruleForm.room_type"}},e._l(e.roomTypeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"公会类型",prop:"guild_type"}},[r("el-select",{attrs:{placeholder:"请选择公会类型",disabled:"update"===e.status},model:{value:e.ruleForm.guild_type,callback:function(t){e.$set(e.ruleForm,"guild_type",t)},expression:"ruleForm.guild_type"}},e._l(e.guildTypeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{staticClass:"form-col",attrs:{label:"起始流水",prop:"start",rules:e.startRules}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",maxlength:"10",placeholder:"起始流水"},model:{value:e.ruleForm.start,callback:function(t){e.$set(e.ruleForm,"start",t)},expression:"ruleForm.start"}}),r("div",{staticClass:"unit"},[e._v("元")])],1),r("el-form-item",{staticClass:"form-col",attrs:{label:"结束流水",prop:"end",rules:e.endRules}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",maxlength:"10",placeholder:"结束流水"},model:{value:e.ruleForm.end,callback:function(t){e.$set(e.ruleForm,"end",t)},expression:"ruleForm.end"}}),r("div",{staticClass:"unit"},[e._v("元")])],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"奖励类型",prop:"rewards_type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.rewards_type,callback:function(t){e.$set(e.ruleForm,"rewards_type",t)},expression:"ruleForm.rewards_type"}},e._l(e.rewards_typeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"奖励名称",prop:"name"}},[r("el-input",{attrs:{maxlength:"10",placeholder:"仅支持中英文数字"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{staticClass:"form-col",attrs:{label:"奖励数额",prop:"rewards"}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');"},model:{value:e.ruleForm.rewards,callback:function(t){e.$set(e.ruleForm,"rewards",t)},expression:"ruleForm.rewards"}}),r("div",{staticClass:"unit"},[e._v(" "+e._s(2===+e.ruleForm.rewards_type?"%":"喵粮")+" ")])],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},re=[],ae={computed:{title:function(){return"add"===this.status?"添加月奖励配置":"update"===this.status?"修改月奖励配置":void 0},startRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.start&&0!=e.ruleForm.start?e.ruleForm.end&&Number(e.ruleForm.start)>=Number(e.ruleForm.end)?a(new Error("起始流水不可大于等于结束流水")):a():a(new Error("请输入有效起始流水"))}},t},endRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.end?e.ruleForm.start&&Number(e.ruleForm.end)<=Number(e.ruleForm.start)?a(new Error("结束流水不可小于等于起始流水")):a():a(new Error("请输入结束流水"))}},t}},data:function(){var e=this;return{status:"add",dialogVisible:!1,codeList:f["a"].CLASSLIST,rewards_typeList:f["a"].GUILDCONFIGURATIONRATETYPELIST,ruleForm:{id:null,name:null,start:"",end:"",rewards:"",rewards_type:null,type:3},rules:{name:[{required:!0,message:"请输入奖励名称",trigger:"blur",validator:function(t,r,a){var s=r.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/gi,"");return e.ruleForm.name=s,a()}}],start:[{required:!0,message:"请输入起始流水",trigger:"input"},{message:"请输入正整数",trigger:"blur",pattern:/^([1-9]\d*|[0]{1,1})$/}],end:[{required:!0,message:"请输入结束流水",trigger:"input"},{message:"请输入正整数",trigger:"blur",pattern:/^([1-9]\d*|[0]{1,1})$/}],rewards_type:[{required:!0,message:"请选择评级奖励类型",trigger:"change"}],rewards:[{required:!0,message:"请输入评级奖励",trigger:"input"}],guild_type:[{required:!0,message:"请选择公会类型",trigger:"change"}],room_type:[{required:!0,message:"请选择房间类型",trigger:"change"}]},guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getRoomTypeList()},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e,t){if(this.status=e,this.dialogVisible=!0,"add"!==e){var r=JSON.parse(JSON.stringify(t));this.$set(this.$data,"ruleForm",r)}},submitForm:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(u["a"])(Object(l["a"])().mark((function e(r){var a,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return a=Object(c["a"])({},t.ruleForm),e.next=4,Object(d["Rb"])(a);case 4:s=e.sent,2e3===s.code&&("add"===t.status?t.$success("新增成功"):t.$success("修改成功"),t.dialogVisible=!1,t.$emit("getList")),e.next=10;break;case 8:return console.log("error submit!!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getRoomTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["yb"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.roomTypeList=a.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()}}},se=ae,ne=(r("8988"),Object(v["a"])(se,te,re,!1,null,null,null)),ie=ne.exports,oe={mixins:[x["a"]],components:{SearchPanel:w["a"],tableList:_["a"],mouthComp:ie},computed:{forms:function(){var e=this;return[{name:"code",type:"input",value:null,keyName:"value",optionLabel:"name",label:"奖励名称",clearable:!0,placeholder:"奖励名称"},{name:"guild_type",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会类型",placeholder:"请选择",clearable:!0,linkage:!0,options:this.guildTypeList,handler:{change:function(t){e.getGenreList({belong:t}),e.searchParams.room_type=""}}},{name:"room_type",type:"select",value:"",keyName:"value",optionLabel:"name",label:"房间类型",placeholder:"请选择",clearable:!0,options:this.roomTypeList}]},cfgs:function(){var e=this;return{vm:this,url:O["a"].guild.settlementConfig,columns:[{label:"公会类型",render:function(e,t){var r=f["a"].GUILDCONFIGTYPELIST.find((function(e){return e.value===t.row.guild_type}));return e("span",r?r.name:"无")}},{label:"房间类型",prop:"room_type_name"},{label:"奖励名称",prop:"name"},{label:"流水范围",render:function(e,t){return e("span",Object(L["f"])(t.row.start)+"~"+Object(L["f"])(t.row.end))}},{label:"奖励类型",render:function(e,t){var r=f["a"].GUILDCONFIGURATIONRATETYPELIST.find((function(e){return e.value===t.row.rewards_type}));return e("span",r?r.name:"无")}},{label:"奖励数额",prop:"rewards",render:function(e,t){var r=f["a"].RENDERGUILDCONFIG.find((function(e){return e.value===t.row.rewards_type}));return e("span",t.row.rewards_type?"".concat(t.row.rewards).concat(r.name):"无")}},{label:"操作",minWidth:"120px",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},on:{click:function(){e.deleteParams(r.row.id,1)}}},"删除")])}}]}}},data:function(){return{isDestoryComp:!1,guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getGenreList()},methods:{beforeSearch:function(e){var t=Object(c["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,code:t.code,type:3,guild_type:t.guild_type,room_type:t.room_type}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.mouthComp.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1},deleteParams:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("确认删除当前公会月奖励配置吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(Object(l["a"])().mark((function r(){var a;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["v"])({id:e});case 2:a=r.sent,2e3===a.code&&(t.$success("删除成功"),t.getList());case 4:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getGenreList:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){var a,s;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["yb"])(e);case 2:a=r.sent,2e3==a.code&&(s=Array.from(Array.isArray(a.data.list)?a.data.list:[]),t.roomTypeList=s.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return r.stop()}}),r)})))()}}},le=oe,ue=(r("eb06"),Object(v["a"])(le,X,ee,!1,null,null,null)),ce=ue.exports,de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-duration-box"},[r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"fl",staticStyle:{height:"36px","line-height":"36px"}},[r("span",[e._v("时长奖励配置")])])]),e._l(e.configList,(function(t){return r("div",{staticClass:"configItem"},[r("div",{staticClass:"configLable fl"},[e._v(e._s(t.remark))]),r("div",{staticClass:"configSouce fl"},[r("el-input",{directives:[{name:"input-limit",rawName:"v-input-limit",value:0,expression:"0"}],attrs:{placeholder:"请输入返点比例"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}},["guild_week_online_reward_online"===t.key?r("template",{slot:"append"},[e._v("小时")]):e._e(),"guild_week_online_reward_flow"===t.key?r("template",{slot:"append"},[e._v("钻石")]):e._e(),"guild_week_online_reward_reward"===t.key?r("template",{slot:"append"},[e._v("喵粮")]):e._e()],2)],1),r("div",{staticClass:"configSave fl"},[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleConfigSave(t)}}},[e._v("保 存")])],1)])}))],2)],1)},me=[],pe=(r("159b"),{name:"platform-rebate",data:function(){return{loading:!1,formLabelWidth:"120px",configList:[]}},created:function(){},mounted:function(){this.getSyetermConfigSource()},methods:{getSyetermConfigSource:function(){var e=this;this.loading=!0,Object(d["gb"])().then((function(t){var r=[],a=["guild_week_online_reward_online","guild_week_online_reward_flow","guild_week_online_reward_reward"];t.data.config&&t.data.config.length>0&&t.data.config.forEach((function(e){a.forEach((function(t){e.key===t&&r.push(e)}))})),e.configList=r,e.loading=!1})).catch((function(t){e.$message.error(t),e.loading=!1}))},handleConfigSave:function(e){var t=this;if(e.value){var r={key:e.key,value:e.value};Object(d["hb"])(r).then((function(r){t.$message.success(e.remark+" 修改成功"),t.getSyetermConfigSource()})).catch((function(e){t.$message.error(e)}))}else this.$warning("请输入"+e.remark)}}}),fe=pe,be=(r("72c0"),Object(v["a"])(fe,de,me,!1,null,"cb026c2c",null)),he=be.exports,ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guildAudit-guild-class-awardComp-box"},[r("div",{staticClass:"searchParamsBox"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("add",{ref:"add",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},ge=[],ye=r("c24f"),we=r("02f5"),_e={mixins:[x["a"]],components:{SearchPanel:w["a"],tableList:_["a"],add:we["a"]},computed:{forms:function(){return[{name:"room_number",type:"input",value:"",label:"房间ID",isNum:!0,placeholder:"请输入房间ID"}]},cfgs:function(){var e=this;return{vm:this,url:O["a"].guild.statisticsroomS,columns:[{label:"添加时间",render:function(e,t){return e("span",t.row.add_duration_statistics_time?Object(L["h"])(t.row.add_duration_statistics_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"房间ID",prop:"room_number"},{label:"操作",render:function(t,r){return t("div",[t("el-button",{props:{type:"danger"},on:{click:function(){e.delStatisticsroomFunc(r.row.id)}}},"移除")])}}]}}},data:function(){return{dialogVisible:!1,isDestoryComp:!1}},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(){this.dialogVisible=!0},beforeSearch:function(e){var t=Object(c["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,room_number:t.room_number}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(){var e=this;this.isDestoryComp=!0,setTimeout((function(){e.$refs.add.loadParams()}),50)},destoryComp:function(){this.isDestoryComp=!1},delStatisticsroomFunc:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("确认移除当前房间?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(Object(l["a"])().mark((function r(){var a;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(ye["f"])({id:e});case 2:a=r.sent,2e3===a.code&&(t.$success("移除成功"),t.getList());case 4:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},closed:function(){this.$emit("destoryComp"),this.$emit("getList")}}},Oe=_e,xe=(r("0fc0"),Object(v["a"])(Oe,ve,ge,!1,null,null,null)),Le=xe.exports,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("effectiveComp",{ref:"effectiveComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},Fe=[],je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-classComp-box"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"610px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"奖励名称",prop:"name"}},[r("el-input",{attrs:{maxlength:"10",placeholder:"仅支持中英文数字"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{staticClass:"form-col",attrs:{label:"有效人数",prop:"now_flow"}},[r("el-input",{model:{value:e.ruleForm.eff_user_total,callback:function(t){e.$set(e.ruleForm,"eff_user_total",t)},expression:"ruleForm.eff_user_total"}}),r("div",{staticClass:"unit"},[e._v("人")])],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"奖励类型",prop:"rewards_type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.rewards_typeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{staticClass:"form-col",attrs:{label:"奖励数额",prop:"rewards"}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');"},model:{value:e.ruleForm.val,callback:function(t){e.$set(e.ruleForm,"val",t)},expression:"ruleForm.val"}}),r("div",{staticClass:"unit"},[e._v(" "+e._s(2===+e.ruleForm.type?"%":"喵粮")+" ")])],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},ke=[],Te={computed:{title:function(){return"add"===this.status?"添加配置":"update"===this.status?"修改配置":void 0},startRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.start&&0!=e.ruleForm.start?e.ruleForm.end&&Number(e.ruleForm.start)>=Number(e.ruleForm.end)?a(new Error("起始流水不可大于等于结束流水")):a():a(new Error("请输入有效起始流水"))}},t},endRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.end?e.ruleForm.start&&Number(e.ruleForm.end)<=Number(e.ruleForm.start)?a(new Error("结束流水不可小于等于起始流水")):a():a(new Error("请输入结束流水"))}},t}},data:function(){var e=this;return{status:"add",dialogVisible:!1,codeList:f["a"].CLASSLIST,rewards_typeList:f["a"].GUILDCONFIGURATIONRATETYPELIST,ruleForm:{id:"",name:"",eff_user_total:"",val:"",type:2},rules:{name:[{required:!0,message:"请输入奖励名称",trigger:"blur",validator:function(t,r,a){var s=r.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/gi,"");return e.ruleForm.name=s,a()}}],eff_user_total:[{required:!0,message:"请输入有效人数",trigger:"input"}],type:[{required:!0,message:"请选择奖励类型",trigger:"change"}],val:[{required:!0,message:"请输入奖励数额",trigger:"input"}]},guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getRoomTypeList()},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e,t){if(this.status=e,this.dialogVisible=!0,"add"!==e){var r=JSON.parse(JSON.stringify(t));this.$set(this.$data,"ruleForm",r)}},submitForm:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(u["a"])(Object(l["a"])().mark((function e(r){var a,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return a=Object(c["a"])({},t.ruleForm),e.next=4,Object(d["z"])(a);case 4:s=e.sent,2e3===s.code&&("add"===t.status?t.$success("新增成功"):t.$success("修改成功"),t.dialogVisible=!1,t.$emit("getList")),e.next=10;break;case 8:return console.log("error submit!!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getRoomTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["yb"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.roomTypeList=a.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()}}},$e=Te,Se=(r("a2b3"),Object(v["a"])($e,je,ke,!1,null,null,null)),Pe=Se.exports,Ae={mixins:[x["a"]],components:{SearchPanel:w["a"],tableList:_["a"],effectiveComp:Pe},computed:{forms:function(){return[]},cfgs:function(){var e=this;return{vm:this,url:O["a"].guild.confList,columns:[{label:"奖励名称",prop:"name"},{label:"有效人数",render:function(e,t){return e("span",t.row.eff_user_total+"人")}},{label:"奖励类型",render:function(e,t){var r=f["a"].GUILDCONFIGURATIONRATETYPELIST.find((function(e){return e.value===t.row.type}));return e("span",r?r.name:"无")}},{label:"奖励数额",render:function(e,t){var r=f["a"].RENDERGUILDCONFIG.find((function(e){return e.value===t.row.type}));return e("span",t.row.type?"".concat(t.row.val).concat(r.name):"无")}},{label:"操作",minWidth:"120px",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},on:{click:function(){e.deleteParams(r.row.id,1)}}},"删除")])}}]}}},data:function(){return{isDestoryComp:!1,guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getGenreList()},methods:{beforeSearch:function(e){var t=Object(c["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,code:t.code,type:2,guild_type:t.guild_type,room_type:t.room_type}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.effectiveComp.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1},deleteParams:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("确认删除当前公会周奖励配置吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(Object(l["a"])().mark((function r(){var a;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,Object(d["y"])({id:e});case 3:a=r.sent,2e3===a.code&&(t.$success("删除成功"),t.getList());case 5:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getGenreList:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){var a,s;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["yb"])(e);case 2:a=r.sent,2e3==a.code&&(s=Array.from(Array.isArray(a.data.list)?a.data.list:[]),t.roomTypeList=s.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return r.stop()}}),r)})))()}}},Ne=Ae,Ee=(r("fcb9"),Object(v["a"])(Ne,Ce,Fe,!1,null,null,null)),Ie=Ee.exports,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("couplingComp",{ref:"couplingComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},Re=[],Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig-guild-class-classComp-box"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"650px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"奖励名称",prop:"name"}},[r("el-input",{attrs:{maxlength:"10",placeholder:"仅支持中英文数字"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{staticClass:"form-col",attrs:{label:"最低成功对数",prop:"eff_cp_stat"}},[r("el-input",{model:{value:e.ruleForm.eff_cp_stat,callback:function(t){e.$set(e.ruleForm,"eff_cp_stat",t)},expression:"ruleForm.eff_cp_stat"}}),r("div",{staticClass:"unit"},[e._v("对")])],1)],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"奖励类型",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.rewards_typeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{staticClass:"form-col",attrs:{label:"奖励数额",prop:"val"}},[r("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/(\\d*\\.\\d).*/,'$1');",oninput:"this.value=this.value.replace(/(\\d*\\.\\d).*/,'$1');"},model:{value:e.ruleForm.val,callback:function(t){e.$set(e.ruleForm,"val",t)},expression:"ruleForm.val"}}),r("div",{staticClass:"unit"},[e._v(" "+e._s(2===+e.ruleForm.type?"%":"喵粮")+" ")])],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},Ge=[],qe={computed:{title:function(){return"add"===this.status?"添加配置":"update"===this.status?"修改配置":void 0},startRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.start&&0!=e.ruleForm.start?e.ruleForm.end&&Number(e.ruleForm.start)>=Number(e.ruleForm.end)?a(new Error("起始流水不可大于等于结束流水")):a():a(new Error("请输入有效起始流水"))}},t},endRules:function(){var e=this,t={};return t={required:!0,validator:function(t,r,a){e.ruleForm.end?e.ruleForm.start&&Number(e.ruleForm.end)<=Number(e.ruleForm.start)?a(new Error("结束流水不可小于等于起始流水")):a():a(new Error("请输入结束流水"))}},t}},data:function(){var e=this;return{status:"add",dialogVisible:!1,codeList:f["a"].CLASSLIST,rewards_typeList:f["a"].GUILDCONFIGURATIONRATETYPELIST,ruleForm:{id:"",name:"",eff_cp_stat:"",val:"",type:2},rules:{name:[{required:!0,message:"请输入奖励名称",trigger:"blur",validator:function(t,r,a){var s=r.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/gi,"");return e.ruleForm.name=s,a()}}],eff_cp_stat:[{required:!0,message:"请输入最低成功对数",trigger:"input"}],type:[{required:!0,message:"请选择奖励类型",trigger:"change"}],val:[{required:!0,message:"请输入奖励数额",trigger:"input"}]},guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getRoomTypeList()},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e,t){if(this.status=e,this.dialogVisible=!0,"add"!==e){var r=JSON.parse(JSON.stringify(t));this.$set(this.$data,"ruleForm",r)}},submitForm:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(u["a"])(Object(l["a"])().mark((function e(r){var a,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return a=Object(c["a"])({},t.ruleForm),e.next=4,Object(d["n"])(a);case 4:s=e.sent,2e3===s.code&&("add"===t.status?t.$success("新增成功"):t.$success("修改成功"),t.dialogVisible=!1,t.$emit("getList")),e.next=10;break;case 8:return console.log("error submit!!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getRoomTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["yb"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.roomTypeList=a.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()}}},Be=qe,Ue=(r("cd7e"),Object(v["a"])(Be,Ve,Ge,!1,null,null,null)),ze=Ue.exports,Ye={mixins:[x["a"]],components:{SearchPanel:w["a"],tableList:_["a"],couplingComp:ze},computed:{forms:function(){return[]},cfgs:function(){var e=this;return{vm:this,url:O["a"].guild.couplingList,columns:[{label:"奖励名称",prop:"name"},{label:"最低成功对数",render:function(e,t){return e("span",t.row.eff_cp_stat+"对")}},{label:"奖励类型",render:function(e,t){var r=f["a"].GUILDCONFIGURATIONRATETYPELIST.find((function(e){return e.value===t.row.type}));return e("span",r?r.name:"无")}},{label:"奖励数额",render:function(e,t){var r=f["a"].RENDERGUILDCONFIG.find((function(e){return e.value===t.row.type}));return e("span",t.row.type?"".concat(t.row.val).concat(r.name):"无")}},{label:"操作",minWidth:"120px",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},on:{click:function(){e.deleteParams(r.row.id,1)}}},"删除")])}}]}}},data:function(){return{isDestoryComp:!1,guildTypeList:[],roomTypeList:[]}},created:function(){this.getTypeList(),this.getGenreList()},methods:{beforeSearch:function(e){var t=Object(c["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,code:t.code,type:2,guild_type:t.guild_type,room_type:t.room_type}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.couplingComp.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1},deleteParams:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("确认删除当前公会周奖励配置吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(Object(l["a"])().mark((function r(){var a;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,Object(d["m"])({id:e});case 3:a=r.sent,2e3===a.code&&(t.$success("删除成功"),t.getList());case 5:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},getTypeList:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getGenreList:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function r(){var a,s;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["yb"])(e);case 2:a=r.sent,2e3==a.code&&(s=Array.from(Array.isArray(a.data.list)?a.data.list:[]),t.roomTypeList=s.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return r.stop()}}),r)})))()}}},Je=Ye,We=(r("b214"),Object(v["a"])(Je,De,Re,!1,null,null,null)),Ze=We.exports,He={components:{gradeComp:k,rebateComp:G,weekComp:Q,mouthComp:ce,durationComp:he,menuComp:n["a"],awardComp:Le,effective:Ie,coupling:Ze},data:function(){return{menuList:[{name:"公会周流水奖励配置"},{name:"实时返点配置"},{name:"公会周奖励配置"},{name:"公会月奖励配置"},{name:"直播公会每周有效人数奖励"},{name:"拍一拍房间奖励配置"}],tabIndex:"0"}},computed:{comp:function(){var e="";switch(this.tabIndex){case"0":e="gradeComp";break;case"1":e="rebateComp";break;case"2":e="weekComp";break;case"3":e="mouthComp";break;case"4":e="effective";break;case"5":e="coupling";break}return e}},methods:{}},Me=He,Ke=(r("23f2"),Object(v["a"])(Me,a,s,!1,null,null,null));t["default"]=Ke.exports},cd7e:function(e,t,r){"use strict";r("48fd")},eb06:function(e,t,r){"use strict";r("5de3")},fc47:function(e,t,r){},fcb9:function(e,t,r){"use strict";r("0bf9")},ff11:function(e,t,r){"use strict";r("3438")}}]);