(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c6e7fe0"],{"1fe8":function(e,a,t){e.exports=t.p+"static/img/error.e53687be.png"},2708:function(e,a,t){"use strict";var r=t("4672"),n=t("52c1"),s={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(r["a"])({},Object(n["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};a["a"]=s},"3dc6":function(e,a,t){"use strict";t("ae79")},ae79:function(e,a,t){},d7bc:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"model"},[t("span",[e._v("用户收入统计："+e._s(e.ruleForm.total_income_sum?Number(e.ruleForm.total_income_sum):0))]),t("span",[e._v("用户支出统计："+e._s(e.ruleForm.meow_expenditure_sum?Number(e.ruleForm.meow_expenditure_sum):0))])]),t("div",{staticClass:"searchParams"},[t("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0},on:{onReset:e.reset,onSearch:e.onSearch},model:{value:e.searchParams,callback:function(a){e.searchParams=a},expression:"searchParams"}})],1),t("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs},on:{saleAmunt:e.saleAmunt}})],1)},n=[],s=t("40bd"),i=t("7e8c"),c=t("4672"),o=(t("6166"),t("23dc"),t("8bda"),t("48d4"),t("65c4"),t("1e6d"),t("9d95"),t("9dcb"),t("ed70"),t("1a72")),m=t("04a2"),u=t("4053"),l=t("8daa"),d=t("cf45"),h=t("2708"),p=t("279a"),b={name:"userBalance-list",mixins:[h["a"]],computed:{forms:function(){var e=this;return[{name:"user_number",type:"input",value:"",label:"用户ID",isNum:!0,placeholder:"请输入用户ID"},{name:"trade_no",type:"input",value:"",label:"交易流水号",placeholder:"请输入交易流水号"},{name:"genre",type:"select",value:"",keyName:"value",optionLabel:"name",label:"交易类型",placeholder:"请选择交易类型",options:p["a"].USERBALANCETYPE},{name:"relation_type",type:"cascader",value:null,keyName:"value",optionLabel:"label",label:"交易渠道",placeholder:"请选择",filterable:!0,clearable:!0,collapse:!0,options:this.jsonMapList,props:{multiple:!0}},{name:"dateTimeParams",type:"datePicker",dateType:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",label:"时间选择",value:"",handler:{change:function(a){e.emptyDateTime(),e.setDateTime(a)},selectChange:function(a,t){e.emptyDateTime()}}}]},cfgs:function(){return{vm:this,url:l["a"].deal.diamondLog,columns:[{label:"时间",render:function(e,a){return e("span",a.row.create_time?Object(d["h"])(a.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"用户ID",prop:"user_number"},{label:"金额",render:function(e,a){var t=a.row.diamond?Number(a.row.diamond):0;return e("span",t?1===a.row.genre?"+ ".concat(Number(a.row.diamond)):"- ".concat(Number(a.row.diamond)):Number(a.row.diamond))}},{label:"余额",render:function(e,a){return e("span",a.row.balance?Number(a.row.balance):"0")}},{label:"类型",render:function(e,a){var t=p["a"].USERBALANCETYPE.find((function(e){return a.row.genre===e.value}));return e("span",t?t.name:"无")}},{label:"主渠道",prop:"relation_type_name"},{label:"子渠道",prop:"relation_sub_type_name"},{label:"交易流水号",render:function(e,a){var t=1===a.row.genre?a.row.relation_trade_no:a.row.trade_no;return e("span",t||"无")}}]}}},components:{SearchPanel:m["a"],tableList:u["a"]},data:function(){return{jsonMapList:[],ruleForm:{},searchParams:{dateTimeParams:[new Date(Object(d["h"])(new Date,"YYYY-MM-DD",!1)+" 00:00:00"),new Date(Object(d["h"])(new Date,"YYYY-MM-DD",!1)+" 23:59:59")]},dateTimeParams:{start_time:new Date(Object(d["h"])(new Date,"YYYY-MM-DD",!1)+" 00:00:00"),end_time:new Date(Object(d["h"])(new Date,"YYYY-MM-DD",!1)+" 23:59:59")}}},created:function(){this.getRelationTypeFunc(),this.changeIndex(0,!0)},methods:{beforeSearch:function(e){var a=Object(c["a"])(Object(c["a"])({},this.searchParams),this.dateTimeParams),t=a.relation_type?JSON.parse(JSON.stringify(a.relation_type)):[],r=t.reduce((function(e,a){return a.map((function(a,t){0!==t&&e.push(a)})),e}),[]).join(",");return{page:e.page,pagesize:e.size,user_number:a.user_number,trade_no:a.trade_no,genre:a.genre,relation_type:r&&r.length?r:"",start_time:a.start_time?Math.floor(a.start_time/1e3):0,end_time:a.end_time?Math.floor(a.end_time/1e3):0}},getList:function(){this.$refs.tableList&&this.$refs.tableList.getData()},reset:function(){this.changeIndex(0,!1),this.searchParams={},this.getList()},setDateTime:function(e){var a=e?{start_time:e[0],end_time:e[1]}:{};this.$set(this,"dateTimeParams",a)},emptyDateTime:function(){this.dateTimeParams={}},onSearch:function(){this.getList()},getRelationTypeFunc:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var t,r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["G"])();case 2:t=a.sent,r=t.data.list.reduce((function(e,a){var t={value:a.code+"",label:a.name,children:a.child.map((function(e){return{value:e.code+"",label:e.name}}))};return e.push(t),e}),[]),e.jsonMapList=r;case 5:case"end":return a.stop()}}),a)})))()},saleAmunt:function(e){this.ruleForm=Object(c["a"])({},e.total_sum);var a=JSON.parse(JSON.stringify(this.dateTimeParams));this.$set(this.searchParams,"dateTimeParams",[a.start_time,a.end_time])},changeIndex:function(e,a){var t,r,n,s,i=this,c=new Date;switch(e){case 0:r=Object(d["h"])(c,"YYYY-MM-DD",!1),t=Object(d["h"])(c,"YYYY-MM-DD",!1);break;case 1:r=Object(d["h"])(c-864e5,"YYYY-MM-DD",!1),t=Object(d["h"])(c-864e5,"YYYY-MM-DD",!1);break;case 2:r=Object(d["h"])(c,"YYYY-MM-DD",!1),t=Object(d["h"])(c-5184e5,"YYYY-MM-DD",!1);break}if(n=new Date(t+" 00:00:00"),s=0==e?new Date(Object(d["h"])(c,"YYYY-MM-DD HH:mm:ss",!1)):new Date(r+" 23:59:59"),a)var o=setTimeout((function(){var e=[n.getTime(),s.getTime()];i.searchParams.dateTimeParams=e,i.dateTimeParams.start_time=e[0],i.dateTimeParams.end_time=e[1],clearTimeout(o)}),200);else{var m=[n.getTime(),s.getTime()];this.searchParams.dateTimeParams=m,this.dateTimeParams.start_time=m[0],this.dateTimeParams.end_time=m[1]}}}},f=b,_=(t("3dc6"),t("e607")),Y=Object(_["a"])(f,r,n,!1,null,"69acd096",null);a["default"]=Y.exports}}]);