(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d94f0ee"],{"1fe8":function(e,t,a){e.exports=a.p+"static/img/error.e53687be.png"},2708:function(e,t,a){"use strict";var r=a("4672"),s=a("52c1"),n={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(r["a"])({},Object(s["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=n},"2c43":function(e,t,a){"use strict";a("eec1")},"2d93":function(e,t,a){"use strict";a("a905")},7178:function(e,t,a){},"9b62":function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"p",(function(){return o})),a.d(t,"r",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"n",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"q",(function(){return h})),a.d(t,"m",(function(){return f})),a.d(t,"j",(function(){return p})),a.d(t,"l",(function(){return b})),a.d(t,"t",(function(){return _})),a.d(t,"k",(function(){return v})),a.d(t,"b",(function(){return g})),a.d(t,"o",(function(){return x})),a.d(t,"e",(function(){return D})),a.d(t,"h",(function(){return C})),a.d(t,"i",(function(){return y})),a.d(t,"s",(function(){return k}));var r=a("829b"),s=a("8daa");function n(e){return Object(r["a"])({url:s["a"].risk.coverCheck,method:"post",data:e})}function o(e){return Object(r["a"])({url:s["a"].risk.save,method:"post",data:e})}function i(e){return Object(r["a"])({url:s["a"].risk.softDelete,method:"post",data:e})}function c(e){return Object(r["a"])({url:s["a"].risk.add,method:"post",data:e})}function l(e){return Object(r["a"])({url:s["a"].risk.review,method:"post",data:e})}function u(e){return Object(r["a"])({url:s["a"].risk.customerServiceList,method:"post",data:e})}function m(e){return Object(r["a"])({url:s["a"].risk.UserPunishLog,method:"post",data:e})}function d(e){return Object(r["a"])({url:s["a"].risk.addUserPunish,method:"post",data:e})}function h(e){return Object(r["a"])({url:s["a"].risk.saveUserPunish,method:"post",data:e})}function f(e){return Object(r["a"])({url:s["a"].risk.removeUserPunish,method:"post",data:e})}function p(e){return Object(r["a"])({url:s["a"].risk.passUserPunish,method:"post",data:e})}function b(e){return Object(r["a"])({url:s["a"].risk.punishStatus,method:"post",data:e})}function _(e){return Object(r["a"])({url:s["a"].risk.updateSource,method:"post",data:e})}function v(e){return Object(r["a"])({url:s["a"].risk.punishOperateLog,method:"post",data:e})}function g(e){return Object(r["a"])({url:s["a"].risk.acceptPunish,method:"post",data:e})}function x(e){return Object(r["a"])({url:s["a"].risk.roomTalkList,method:"post",data:e})}function D(e){return Object(r["a"])({url:s["a"].risk.chatTalkList,method:"post",data:e})}function C(e){return Object(r["a"])({url:s["a"].risk.audioStreamDefyListExport,method:"post",data:e})}function y(e){return Object(r["a"])({url:s["a"].risk.punishWordsList,method:"post",data:e})}function k(e){return Object(r["a"])({url:s["a"].risk.updatePunishWords,method:"post",data:e})}},"9d28":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"serviceConfig-message-history-box"},[a("menuComp",{ref:"menuComp",attrs:{menuList:e.menuList},on:{tabChange:e.tabChange},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}}),"3"!==e.tabIndex?a("div",{staticClass:"searchParams"},[a("div",{staticClass:"formBox"},["0"===e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("发送用户ID")]),a("el-input",{attrs:{placeholder:"请输入发送用户ID"},model:{value:e.form.from_user_number,callback:function(t){e.$set(e.form,"from_user_number",t)},expression:"form.from_user_number"}})],1):e._e(),"0"===e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("接收用户ID")]),a("el-input",{attrs:{placeholder:"请输入接收用户ID"},model:{value:e.form.to_user_number,callback:function(t){e.$set(e.form,"to_user_number",t)},expression:"form.to_user_number"}})],1):e._e(),"1"===e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("发送用户ID")]),a("el-input",{attrs:{placeholder:"请输入发送用户ID"},model:{value:e.form.user_number,callback:function(t){e.$set(e.form,"user_number",t)},expression:"form.user_number"}})],1):e._e(),"1"===e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("房间ID")]),a("el-input",{attrs:{placeholder:"请输入房间ID"},model:{value:e.form.room_number,callback:function(t){e.$set(e.form,"room_number",t)},expression:"form.room_number"}})],1):e._e(),"0"==e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("消息类型")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.change},model:{value:e.form.msg_type,callback:function(t){e.$set(e.form,"msg_type",t)},expression:"form.msg_type"}},e._l(e.msg_type_list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),"2"!==e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("消息内容")]),a("el-input",{attrs:{placeholder:"请输入消息内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1):e._e(),"2"!==e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("敏感词")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.change},model:{value:e.form.sen_status,callback:function(t){e.$set(e.form,"sen_status",t)},expression:"form.sen_status"}},e._l(e.sen_statusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),1===e.form.sen_status&&"2"!==e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("条数")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.change},model:{value:e.form.msg_count,callback:function(t){e.$set(e.form,"msg_count",t)},expression:"form.msg_count"}},e._l(e.msg_countList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),1!==e.form.sen_status&&"2"!==e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("时间选择")]),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","default-time":["00:00:00","23:59:59"]},on:{change:e.change},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1):e._e(),"2"===e.tabIndex?a("div",{staticClass:"sunBox"},[a("span",[e._v("敏感词")]),a("el-input",{attrs:{placeholder:"请输入敏感词"},model:{value:e.form.keyword,callback:function(t){e.$set(e.form,"keyword",t)},expression:"form.keyword"}})],1):e._e(),"2"!==e.tabIndex&&1==e.form.sen_status?a("div",{staticClass:"sunBox"},[a("span",[e._v("日期选择")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:e.changeDate},model:{value:e.time2,callback:function(t){e.time2=t},expression:"time2"}})],1):e._e(),a("div",{staticClass:"btnBox"},[a("el-button",{staticClass:"seeBox",attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),"2"!==e.tabIndex&&1!==e.form.sen_status?a("el-button",{on:{click:e.today}},[e._v("今日")]):e._e(),"2"!==e.tabIndex&&1!==e.form.sen_status?a("el-button",{on:{click:e.yesterday}},[e._v("昨日")]):e._e(),"2"!==e.tabIndex&&1!==e.form.sen_status?a("el-button",{on:{click:e.beforeYesterday}},[e._v("前天")]):e._e(),"2"!==e.tabIndex&&1!==e.form.sen_status?a("el-button",{on:{click:e.recentSeven}},[e._v("七天")]):e._e(),"2"!==e.tabIndex?a("span",{staticClass:"sunBox refreshNum",staticStyle:{"margin-left":"12px"}},[a("el-input",{attrs:{placeholder:"最少5秒"},on:{blur:e.changeRefreshNum},model:{value:e.refreshNum,callback:function(t){e.refreshNum=t},expression:"refreshNum"}}),e._v(" 秒刷新 ")],1):e._e(),"2"==e.tabIndex?a("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")]):e._e(),"2"!==e.tabIndex?a("span",{staticClass:"refreshBox"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.switchChange},model:{value:e.isRefresh,callback:function(t){e.isRefresh=t},expression:"isRefresh"}})],1):e._e()],1)])]):e._e(),"3"!==e.tabIndex?a("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs,layout:"total, sizes, prev, pager, next, jumper"},on:{handlePageChange:e.handlePageChange,saleAmunt:e.saleAmunt}}):e._e(),e.isDestoryComp?a("historyComp",{ref:"historyComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e(),"3"===e.tabIndex?a("trackOrder"):e._e()],1)},s=[],n=a("40bd"),o=a("7e8c"),i=a("4672"),c=(a("5250"),a("23dc"),a("8bda"),a("48d4"),a("6166"),a("65c4"),a("430a"),a("ccf1"),a("9b62")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"serviceConfig-historyComp-box"},[a("el-dialog",{attrs:{title:"添加敏感词",visible:e.dialogVisible,width:"400px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"75px"}},[a("el-form-item",{attrs:{label:"敏感词",prop:"val"}},[a("el-input",{model:{value:e.ruleForm.val,callback:function(t){e.$set(e.ruleForm,"val",t)},expression:"ruleForm.val"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},u=[],m={data:function(){return{dialogVisible:!1,ruleForm:{val:""},rules:{val:[{required:!0,message:"请输入敏感词",trigger:"blur"}]}}},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(){this.dialogVisible=!0},submitForm:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(a){var r;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}return e.next=3,Object(c["c"])({val:t.ruleForm.val});case 3:r=e.sent,2e3===r.code&&(t.dialogVisible=!1,t.$success("添加成功"),t.$emit("getList")),e.next=9;break;case 7:return console.log("error submit!!"),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")}}},d=m,h=(a("9e95"),a("e607")),f=Object(h["a"])(d,l,u,!1,null,null,null),p=f.exports,b=a("3923"),_=a("04a2"),v=a("4053"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-content-card page-tracker"},[a("div",{staticClass:"main-content"},[a("div",{staticClass:"doc-info-left"},[a("el-card",{staticClass:"card"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-label"},[e._v("用户ID1")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.searchChatData.first_user_number,callback:function(t){e.$set(e.searchChatData,"first_user_number",t)},expression:"searchChatData.first_user_number"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-label"},[e._v("用户ID2")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.searchChatData.second_user_number,callback:function(t){e.$set(e.searchChatData,"second_user_number",t)},expression:"searchChatData.second_user_number"}})],1)])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-label"},[e._v("查询时间")]),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","value-format":"timestamp","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.chatTimeData,callback:function(t){e.chatTimeData=t},expression:"chatTimeData"}})],1)]),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onChatSearch}},[e._v("查询")])],1)],1)],1),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.onChatLoad,expression:"onChatLoad"}],staticClass:"pev-left",attrs:{"infinite-scroll-disabled":"chatDisabled","infinite-scroll-distance":10,"infinite-scroll-immediate":!1,"infinite-scroll-delay":200}},[e._l(e.renderChatList,(function(t){return a("el-card",{key:t.id,staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"pev-inner"},[a("div",{staticClass:"pev-header"},[a("div",{staticClass:"pev-user-title"},[a("div",{staticClass:"ellipsis"},[e._v(e._s(t.from_user_nickname))]),a("div",[e._v(e._s("("+t.from_user_number+")"))])]),a("span",{staticClass:"pev-time"},[e._v(e._s(t.create_time))])]),a("div",{staticClass:"pev-footer"},[e._v(" "+e._s((0===+t.reply?"发送":"回复")+": "+t.content)+" ")])])])})),e.chatNoMore?a("p",[e._v("没有更多了")]):e._e(),e.renderChatList.length?e._e():a("div",{staticClass:"empty"},[a("i",{staticClass:"el-icon-document-delete"}),a("span",[e._v("暂无数据")])])],2)],1),a("div",{staticClass:"doc-info-right"},[a("el-card",{staticClass:"card"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-label"},[e._v("用户ID")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.searchRoomData.user_number,callback:function(t){e.$set(e.searchRoomData,"user_number",t)},expression:"searchRoomData.user_number"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-label"},[e._v("房间ID")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.searchRoomData.room_number,callback:function(t){e.$set(e.searchRoomData,"room_number",t)},expression:"searchRoomData.room_number"}})],1)])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-label"},[e._v("查询时间")]),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","value-format":"timestamp","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.roomTimeData,callback:function(t){e.roomTimeData=t},expression:"roomTimeData"}})],1)]),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onRoomSearch}},[e._v("查询")])],1)],1)],1),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.onRoomLoad,expression:"onRoomLoad"}],staticClass:"pev-right",attrs:{"infinite-scroll-disabled":"roomDisabled","infinite-scroll-distance":10,"infinite-scroll-immediate":!1,"infinite-scroll-delay":200}},[e._l(e.renderRoomList,(function(t){return a("el-card",{key:t.id,staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"pev-inner"},[a("div",{staticClass:"pev-header"},[a("div",{staticClass:"pev-user-title"},[a("div",{staticClass:"ellipsis"},[e._v(e._s(t.user_nickname))]),a("div",[e._v(e._s("("+t.user_number+")"))])]),a("span",{staticClass:"pev-time"},[e._v(e._s(t.create_time))])]),a("div",{staticClass:"pev-section"},[a("div",{staticClass:"ellipsis"},[e._v(e._s(t.title))]),a("div",[e._v(e._s("("+t.room_number+")"))])]),a("div",{staticClass:"pev-footer"},[e._v("发送："+e._s(t.content))])])])})),e.roomNoMore?a("p",[e._v("没有更多了")]):e._e(),e.renderRoomList.length?e._e():a("div",{staticClass:"empty"},[a("i",{staticClass:"el-icon-document-delete"}),a("span",[e._v("暂无数据")])])],2)],1)])])},x=[],D=a("74a6"),C=a("7c98"),y={data:function(){return{searchChatData:{first_user_number:"",second_user_number:"",start_time:"",end_time:""},chatTimeData:[],renderChatList:[],chatLoading:!1,chatNoMore:!1,chatDisabled:!1,chatFlag:!1,chatMaxId:0,chatPagination:{size:10,page:1},searchRoomData:{user_number:"",room_number:"",start_time:"",end_time:""},roomTimeData:[],renderRoomList:[],roomLoading:!1,roomNoMore:!1,roomDisabled:!1,roomFlag:!1,roomMaxId:0,roomPagination:{size:10,page:1}}},methods:{getChatList:Object(C["throttle"])((function(){var e=this;this.chatLoading=!0;var t=this.chatTimeData&&this.chatTimeData.length,a=Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.searchChatData),this.chatPagination),{},{start_time:t?Math.floor(this.chatTimeData[0]/1e3):"",end_time:t?Math.floor(this.chatTimeData[1]/1e3):"",max_id:this.chatMaxId});Object(c["e"])(a).then((function(t){if(e.chatLoading=!1,2e3!==+t.code)return e.chatPagination.page=1,e.chatNoMore=!1,e.chatFlag=!1,e.renderChatList=[],e.$message.error("请求失败"),!1;if(t.data.list.length){e.chatNoMore=!1,e.chatDisabled=!1,e.chatMaxId=t.data.max_id;var a=t.data&&t.data.list||[];e.renderChatList=[].concat(Object(D["a"])(e.renderChatList),Object(D["a"])(a)),e.renderChatList.length<t.data.count?(e.chatPagination.page++,e.chatFlag=!0):(e.chatNoMore=!0,e.chatDisabled=!0,e.chatFlag=!1)}else e.chatNoMore=!0,e.chatDisabled=!0,e.chatFlag=!1})).catch((function(t){console.log(t,"err"),e.chatFlag=!1}))}),300),onChatLoad:function(){this.chatFlag&&this.getChatList()},getRoomList:Object(C["throttle"])((function(){var e=this;this.roomLoading=!0;var t=this.roomTimeData&&this.roomTimeData.length,a=Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.searchRoomData),this.roomPagination),{},{start_time:t?Math.floor(this.roomTimeData[0]/1e3):"",end_time:t?Math.floor(this.roomTimeData[1]/1e3):"",max_id:this.roomMaxId});Object(c["o"])(a).then((function(t){if(e.roomLoading=!1,2e3!==+t.code)return e.roomPagination.page=1,e.roomNoMore=!1,e.roomFlag=!1,e.renderRoomList=[],e.$message.error("请求失败"),!1;if(t.data.list.length){e.roomNoMore=!1,e.roomDisabled=!1,e.roomMaxId=t.data.max_id;var a=t.data&&t.data.list||[];e.renderRoomList=[].concat(Object(D["a"])(e.renderRoomList),Object(D["a"])(a)),e.renderRoomList.length<t.data.count?(e.roomPagination.page++,e.roomFlag=!0):(e.roomNoMore=!0,e.roomDisabled=!0,e.roomFlag=!1)}else e.roomNoMore=!0,e.roomDisabled=!0,e.roomFlag=!1})).catch((function(t){console.log(t,"err"),e.roomFlag=!1}))}),300),onRoomLoad:function(){this.roomFlag&&this.getRoomList()},onChatSearch:function(){this.renderChatList=[],this.chatPagination.page=1,this.getChatList()},onRoomSearch:function(){this.renderRoomList=[],this.roomPagination.page=1,this.getRoomList()}}},k=y,I=(a("2d93"),Object(h["a"])(k,g,x,!1,null,"5f103532",null)),L=I.exports,O=a("8daa"),M=a("cf45"),j=a("2708"),Y=a("279a"),w={mixins:[j["a"]],components:{SearchPanel:_["a"],tableList:v["a"],menuComp:b["a"],historyComp:p,trackOrder:L},data:function(){return{sen_statusList:Y["a"].RISKMANAGEMENTMESSAGEHISTORYLIST,msg_countList:Y["a"].RISKMANAGEMENTMESSAGENUMBERLIST,msg_type_list:Y["a"].MSSAGETYPE,form:{from_user_number:"",to_user_number:"",content:"",user_number:"",room_number:"",sen_status:2,msg_count:100,msg_type:0,time:[],keyword:""},isRefresh:!1,menuList:[{name:"私聊会话消息"},{name:"房间会话消息"},{name:"敏感词库"},{name:"会话消息"}],isDestoryComp:!1,tabIndex:"0",searchParams:{dateTimeParams:[],sen_status:2},dateTimeParams:{start_time:null,end_time:null},ruleForm:{},timer:null,time2:new Date,refreshNum:localStorage.getItem("refreshNum")?localStorage.getItem("refreshNum"):30}},computed:{forms:function(){var e=this,t=[{name:"from_user_number",type:"input",value:"",label:"发送用户ID",isNum:!0,placeholder:"请输入发送用户ID"},{name:"to_user_number",type:"input",value:"",label:"接收用户ID",isNum:!0,placeholder:"请输入接收用户ID"},{name:"content",type:"input",value:"",label:"消息内容",placeholder:"请输入消息内容"}],a=[{name:"user_number",type:"input",value:"",label:"发送用户ID",isNum:!0,placeholder:"请输入发送用户ID"},{name:"room_number",type:"input",value:"",label:"房间ID",isNum:!0,placeholder:"请输入房间ID"},{name:"content",type:"input",value:"",label:"消息内容",placeholder:"请输入消息内容"}],r=[{name:"sen_status",type:"select",value:1,keyName:"value",optionLabel:"name",label:"敏感词",placeholder:"请选择",options:Y["a"].RISKMANAGEMENTMESSAGEHISTORYLIST},{name:"msg_count",type:"select",value:1e3,keyName:"value",optionLabel:"name",label:"条数",placeholder:"请选择",options:Y["a"].RISKMANAGEMENTMESSAGENUMBERLIST},{name:"dateTimeParams",type:"datePicker",dateType:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",clearable:!0,class:"message-history-dateTimeParams",label:"时间选择",value:"",handler:{change:function(t){e.emptyDateTime(),e.setDateTime(t)},selectChange:function(t,a){e.emptyDateTime()}}}],s=[{name:"keyword",type:"input",value:"",label:"敏感词",placeholder:"请输入敏感词"}],n=[];return"0"===this.tabIndex?n=[].concat(t,r):"1"===this.tabIndex?n=[].concat(a,r):"2"===this.tabIndex&&(n=[].concat(s)),n},cfgs:function(){var e,t=this,a=[{label:"时间",render:function(e,t){return e("span",t.row.create_time||"无")}},{label:"发送用户ID",render:function(e,a){return e("div","0"===t.tabIndex?a.row.from_user_number:a.row.user_number)}},{label:"用户昵称",render:function(e,a){return e("div","0"===t.tabIndex?a.row.from_user_nickname:a.row.user_nickname)}}],r=[{label:"接收用户ID",render:function(e,t){return e("div",t.row.to_user_number||"无")}},{label:"接收用户昵称",render:function(e,t){return e("div",t.row.to_user_nickname||"无")}},{label:"消息类型",prop:"msg_type_str"}],s=[{label:"房间ID",render:function(e,t){return e("div",t.row.room_number||"无")}},{label:"房间标题",render:function(e,t){return e("div",t.row.title||"无")}}],n=[{label:"消息内容",isImgOrText:!0,imgWidth:"50px",imgHeight:"50px",minWidth:"180px"},{label:"敏感状态",render:function(e,t){var a=Y["a"].RISKMANAGEMENTMESSAGEHISTORYLIST.find((function(e){return e.value===t.row.sen_status}));return e("span",{style:{color:1===t.row.sen_status?"#FF4949":""}},a?a.name:"无")}},{label:"敏感内容",showOverFlow:!0,render:function(e,t){return e("div",{style:{color:t.row.sen_str?"#FF4949":""}},t.row.sen_str||"无")}}],o=[{label:"添加时间",render:function(e,t){return e("span",t.row.create_time?Object(M["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"敏感词",render:function(e,t){return e("span",t.row.val||"无")}},{label:"添加人",render:function(e,t){return e("span",t.row.nickname||"无")}},{label:"操作",render:function(e,a){return e("div",[e("el-button",{props:{type:"danger"},on:{click:function(){t.deleteParams(a.row.id)}}},"移除")])}}],i=[];return"0"===this.tabIndex?(i=[].concat(a,r,n),e="chatList"):"1"===this.tabIndex?(i=[].concat(a,s,n),e="roomList"):"2"===this.tabIndex&&(i=[].concat(o),e="index"),{vm:this,url:O["a"].risk[e],search:{sizes:[10,30,50,100]},columns:i}}},methods:{switchChange:function(e){var t=this;if(e){var a=1e3*this.refreshNum;this.$success("开启定时刷新,"+this.refreshNum+"S"),this.timer=setInterval((function(){if(t.form.time){var e=1e3*Number(JSON.stringify((new Date).getTime()).substring(0,10)),a=[];a[0]=t.form.time[0],a[1]=e,t.$set(t.form,"time",a)}t.getList()}),a)}else this.timer&&(this.$success("定时刷新已关闭"),clearInterval(this.timer))},change:function(){this.getList()},today:function(){this.changeIndex(0),this.getList()},yesterday:function(){this.changeIndex(1),this.getList()},beforeYesterday:function(){this.changeIndex(2),this.getList()},recentSeven:function(){this.changeIndex(4),this.getList()},changeIndex:function(e){var t,a,r,s,n=new Date;switch(e){case 0:a=Object(M["h"])(n,"YYYY-MM-DD",!1),t=Object(M["h"])(n,"YYYY-MM-DD",!1);break;case 1:a=Object(M["h"])(n-864e5,"YYYY-MM-DD",!1),t=Object(M["h"])(n-864e5,"YYYY-MM-DD",!1);break;case 2:a=Object(M["h"])(n-1728e5,"YYYY-MM-DD",!1),t=Object(M["h"])(n-1728e5,"YYYY-MM-DD",!1);break;case 3:a=Object(M["h"])(n,"YYYY-MM-DD HH:mm:ss",!1),t=Object(M["h"])(n,"YYYY-MM-DD",!1);break;case 4:a=Object(M["h"])(n,"YYYY-MM-DD",!1),t=Object(M["h"])(n-5184e5,"YYYY-MM-DD",!1);break}r=new Date(t+" 00:00:00"),s=3==e||0==e?new Date(Object(M["h"])(n,"YYYY-MM-DD HH:mm:ss",!1)):new Date(a+" 23:59:59");var o=[r.getTime(),s.getTime()];this.form.time=o,this.$set(this.form,"time",o)},changeDate:function(e){var t,a,r=new Date,s=Object(M["h"])(r,"YYYY-MM-DD",!1),n=Object(M["h"])(r,"YYYY-MM-DD HH:mm:ss",!1),o=Object(M["h"])(e,"YYYY-MM-DD",!1);s==o?(t=Date.parse(s+" 00:00:00"),a=Date.parse(n)):(t=Date.parse(o+" 00:00:00"),a=Date.parse(o+" 23:59:59")),this.form.time&&(this.form.time[0]=t,this.form.time[1]=a),this.getList()},beforeSearch:function(e){var t=Object(i["a"])({},this.form),a={page:e.page,pagesize:e.size,start_time:t.time&&t.time.length>0?Math.floor(t.time[0]/1e3):"",end_time:t.time&&t.time.length>0?Math.floor(t.time[1]/1e3):"",sen_status:t.sen_status,from_user_number:t.from_user_number,to_user_number:t.to_user_number,content:t.content,user_number:t.user_number,room_number:t.room_number,msg_count:t.msg_count};return"0"===this.tabIndex&&(a.msg_type=t.msg_type),"2"===this.tabIndex&&(a={page:e.page,pagesize:e.size,keyword:t.keyword}),a},saleAmunt:function(e){this.ruleForm=Object(i["a"])({},e)},handlePageChange:function(e){this.$refs.tableList.$data.search.page=e;var t=this.ruleForm.max_id||0;this.$refs.tableList.getData(t,this.tabIndex)},getList:function(){this.$refs.tableList&&this.$refs.tableList.getData()},setDateTime:function(e){var t=e?{start_time:e[0],end_time:e[1]}:{};this.$set(this,"dateTimeParams",t)},emptyDateTime:function(){this.dateTimeParams={}},reset:function(){this.form={time:[],sen_status:2,msg_count:1e3},this.changeIndex(0),this.getList()},onSearch:function(){this.changeIndex(3),this.getList()},add:function(){var e=this;this.isDestoryComp=!0,setTimeout((function(){e.$refs.historyComp.loadParams()}),50)},destoryComp:function(){this.isDestoryComp=!1},tabChange:function(){var e=this;this.timer&&(clearInterval(this.timer),this.isRefresh=!1),setTimeout((function(){e.today(0)}),0)},deleteParams:function(e){var t=this;this.$confirm("确认移除当前敏感词吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["r"])({id:e});case 2:r=a.sent,2e3===r.code&&(t.$success("删除成功"),t.getList());case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))},changeRefreshNum:function(){this.refreshNum<5?this.refreshNum=5:this.refreshNum>60&&(this.refreshNum=60),localStorage.setItem("refreshNum",this.refreshNum)}},created:function(){this.changeIndex(3)},destroyed:function(){this.timer&&clearInterval(this.timer)}},T=w,N=(a("2c43"),Object(h["a"])(T,r,s,!1,null,null,null));t["default"]=N.exports},"9e95":function(e,t,a){"use strict";a("7178")},a905:function(e,t,a){},eec1:function(e,t,a){}}]);