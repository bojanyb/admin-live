(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ea1b1ea"],{"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},2558:function(e,t,r){"use strict";r("bd05")},2708:function(e,t,r){"use strict";var s=r("5530"),a=r("2f62"),i={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(s["a"])({},Object(a["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=i},"468b":function(e,t,r){},6016:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menus-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs,isHidePage:!0},on:{saleAmunt:e.saleAmunt}}),e.isDestoryComp?r("addComp",{ref:"addComp",attrs:{menuList:e.menuList},on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},a=[],i=r("5530"),n=(r("7db0"),r("d3b7"),r("b0c0"),r("b64b"),r("e9c4"),r("159b"),r("04a2")),o=r("4053"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menus-add-box"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"500px","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"上级菜单"}},[r("el-cascader",{ref:"cascader",attrs:{options:e.menuList,props:e.props,disabled:e.disabled,"show-all-levels":!1,clearable:""},on:{change:e.cascaderChange},model:{value:e.ruleForm.pid,callback:function(t){e.$set(e.ruleForm,"pid",t)},expression:"ruleForm.pid"}})],1),r("el-form-item",{attrs:{label:"菜单名称",prop:"title"}},[r("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"菜单排序",prop:"sort"}},[r("el-input-number",{attrs:{"controls-position":"right",min:0,max:999},on:{change:e.handleChange},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),r("el-form-item",{attrs:{label:"菜单状态",prop:"status"}},[r("el-radio-group",{model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statusList,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),r("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[r("el-input",{model:{value:e.ruleForm.path,callback:function(t){e.$set(e.ruleForm,"path",t)},expression:"ruleForm.path"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},u=[],c=r("c7eb"),d=r("1da1"),m=r("279a"),p=r("50fc"),h={props:{menuList:{type:Array,default:[]}},data:function(){return{dialogVisible:!1,statusList:m["a"].MENUSTATUSLIST,status:"add",ruleForm:{id:null,pid:null,title:"",sort:null,status:1,path:""},props:{checkStrictly:!0,label:"title",value:"id",children:"child"},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],sort:[{required:!0,message:"请输入菜单排序",trigger:"blur"}],status:[{required:!0,message:"请选择菜单状态",trigger:"change"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}]}}},computed:{title:function(){return"add"===this.status?"新增菜单":"update"===this.status?"修改菜单":void 0},disabled:function(){return!("add"!==this.status||!this.ruleForm.pid)}},methods:{cascaderChange:function(e){this.$refs.cascader.toggleDropDownVisible(!1),e&&(this.ruleForm.pid=e[e.length-1])},handleChange:function(e){console.log(e)},handleClose:function(){this.resetForm()},loadParams:function(e,t){if(this.dialogVisible=!0,this.status=e,t){var r=JSON.parse(JSON.stringify(t));"add"===e?this.$set(this.ruleForm,"pid",r.id):"update"===this.status&&(r.path=r.h5_path,this.$set(this.$data,"ruleForm",r))}console.log(this.ruleForm,"ruleForm---------------")},submitForm:function(e){var t=this;return Object(d["a"])(Object(c["a"])().mark((function r(){return Object(c["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(d["a"])(Object(c["a"])().mark((function e(r){var s,a,n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=18;break}if(s=Object(i["a"])({},t.ruleForm),s.pid=s.pid||0,"add"!==t.status){e.next=10;break}return e.next=6,Object(p["a"])(s);case 6:a=e.sent,2e3===a.code&&t.$message.success("新增成功"),e.next=14;break;case 10:return e.next=12,Object(p["g"])(s);case 12:n=e.sent,2e3===n.code&&t.$message.success("修改成功");case 14:t.dialogVisible=!1,t.$emit("getList"),e.next=20;break;case 18:return console.log("error submit!!"),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},resetForm:function(){this.dialogVisible=!1},closed:function(){this.$emit("destoryComp")}}},f=h,b=(r("2558"),r("2877")),g=Object(b["a"])(f,l,u,!1,null,"f944a2ce",null),v=g.exports,F=r("2708"),y=r("8daa"),k={components:{tableList:o["a"],SearchPanel:n["a"],addComp:v},mixins:[F["a"]],data:function(){return{menuList:[],isDestoryComp:!1}},computed:{forms:function(){return[{name:"user_number",type:"input",value:"",label:"菜单名称",placeholder:"请输入菜单名称"},{name:"activity_type_id",type:"select",value:"",keyName:"value",optionLabel:"name",label:"状态",placeholder:"请选择",options:m["a"].MENUSTATUSLIST}]},cfgs:function(){var e=this;return{vm:this,url:y["a"].system.getAllPermission,defaultExpandAll:!1,children:"child",columns:[{label:"菜单名称",prop:"title",align:"left"},{label:"排序",prop:"sort"},{label:"路由地址",prop:"h5_path"},{label:"状态",render:function(e,t){var r=m["a"].MENUSTATUSLIST.find((function(e){return e.value===t.row.status}));return e("span",r?r.name:"无")}},{label:"操作",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"success"},style:{display:(r.row.child&&r.row.child.length,"unset")},on:{click:function(){e.add(r.row)}}},"新增")])}}]}}},methods:{beforeSearch:function(e){var t=Object(i["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,user_number:t.user_number,nickname:t.nickname,phone:t.phone}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(e){this.load("add",e)},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.addComp.loadParams(e,t)}),50)},saleAmunt:function(e){var t=JSON.parse(JSON.stringify(e.list));if(t&&t.length>0){var r=function e(t){t.forEach((function(t){t.child&&t.child.length>0?e(t.child,t):delete t.child}))};r(t),t.forEach((function(e){e.child&&e.child.length>0&&e.child.forEach((function(e){e.child&&e.child.length>0&&delete e.child}))}))}this.menuList=t||[]},destoryComp:function(){this.isDestoryComp=!1}}},x=k,w=(r("e3a9"),Object(b["a"])(x,s,a,!1,null,"1024a506",null));t["default"]=w.exports},bd05:function(e,t,r){},e3a9:function(e,t,r){"use strict";r("468b")}}]);