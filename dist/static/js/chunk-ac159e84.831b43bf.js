(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac159e84"],{"127f":function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var a=r("40bd"),n=r("7e8c"),i=(r("48d4"),r("8bda"),r("897d")),o=r.n(i),s=r("4109"),u={ossParams:{region:"oss-cn-shenzhen",success_action_status:"200",accessKeyId:"LTAI5tFTcRH7h3RXKoYmnWMk",accessKeySecret:"qdx4B8jIh2VjBgBDG5fNfG0Oj21GSP",bucket:"live-huidapay-net"}};function l(t){var e=t.name.split("."),r=o()(Date.now()+e[0]);return r=r+"."+e[e.length-1],r}function c(t){return new Promise(function(){var e=Object(n["a"])(Object(a["a"])().mark((function e(r,n){var i,o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=l(t),o=new s({region:u.ossParams.region,accessKeyId:u.ossParams.accessKeyId,accessKeySecret:u.ossParams.accessKeySecret,bucket:u.ossParams.bucket}),e.next=4,o.multipartUpload(i,t);case 4:e.sent,r({url:"https://photo.aiyi.live/"+i});case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}},"1d2e":function(t,e,r){},"1fe8":function(t,e,r){t.exports=r.p+"static/img/error.e53687be.png"},2708:function(t,e,r){"use strict";var a=r("4672"),n=r("52c1"),i={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(a["a"])({},Object(n["c"])({permissionArr:function(t){return t.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};e["a"]=i},"2eb0":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"banner-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:t.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:t.reset,onSearch:t.onSearch,add:t.add},model:{value:t.searchParams,callback:function(e){t.searchParams=e},expression:"searchParams"}})],1),r("div",{staticClass:"tableList"},[r("tableList",{ref:"tableList",attrs:{cfgs:t.cfgs},on:{saleAmunt:t.saleAmunt}})],1),t.isDestoryComp?r("add",{ref:"add",attrs:{type:"banner_img"},on:{onSearch:t.onSearch,destoryComp:t.destoryComp}}):t._e()],1)},n=[],i=r("4672"),o=(r("23dc"),r("8bda"),r("48d4"),r("4053")),s=r("04a2"),u=r("2708"),l=r("8daa"),c=r("ca41"),m=r("cf45"),d=r("279a"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"resourceState-add-box"},[r("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.destoryComp}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-suffix":":","label-width":"110px"}},[r("el-form-item",{attrs:{label:"活动标题",prop:"name"}},[r("el-input",{attrs:{maxlength:"20",placeholder:"请输入活动标题",clearable:""},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"权重排序",prop:"sort"}},[r("el-input",{directives:[{name:"input-num",rawName:"v-input-num",value:!0,expression:"true"}],attrs:{placeholder:"请输入权重排序",clearable:""},model:{value:t.ruleForm.sort,callback:function(e){t.$set(t.ruleForm,"sort",e)},expression:"ruleForm.sort"}})],1),r("el-form-item",{staticClass:"tipsItem",attrs:{label:"闪屏图片",prop:"flash_img"}},[r("uploadImg",{ref:"flash_img",attrs:{imgUrl:t.ruleForm.flash_img,name:"flash_img",accept:".png",isFileType:!0},on:{input:t.getFileSplash},model:{value:t.ruleForm.flash_img,callback:function(e){t.$set(t.ruleForm,"flash_img",e)},expression:"ruleForm.flash_img"}}),r("div",{staticClass:"tipsText"},[t._v("仅允许png格式，建议大小不超5MB")])],1),r("el-form-item",{staticClass:"tipsItem",attrs:{label:"banner图片",prop:"banner_img"}},[r("uploadImg",{ref:"banner_img",attrs:{imgUrl:t.ruleForm.banner_img,maxWidth:"690",maxHeight:"200",name:"banner_img",accept:".png",isFileType:!0},on:{input:t.getFileBanner},model:{value:t.ruleForm.banner_img,callback:function(e){t.$set(t.ruleForm,"banner_img",e)},expression:"ruleForm.banner_img"}}),r("div",{staticClass:"tipsText"},[t._v("仅允许png格式，建议尺寸690×200，建议大小不超5MB")])],1),r("el-form-item",{staticClass:"tipsItem",attrs:{label:"房间游标图片",prop:"room_img"}},[r("uploadImg",{ref:"room_img",attrs:{imgUrl:t.ruleForm.room_img,maxWidth:"130",maxHeight:"130",name:"room_img",accept:".png",isFileType:!0},on:{input:t.getFilenonius},model:{value:t.ruleForm.room_img,callback:function(e){t.$set(t.ruleForm,"room_img",e)},expression:"ruleForm.room_img"}}),r("div",{staticClass:"tipsText"},[t._v("仅允许png格式，建议尺寸130*130，建议大小不超5MB")])],1),r("el-form-item",{attrs:{label:"落地类型",prop:"url"}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.placeholderText},model:{value:t.ruleForm.url,callback:function(e){t.$set(t.ruleForm,"url",e)},expression:"ruleForm.url"}},[r("el-select",{attrs:{slot:"prepend",placeholder:"链接选择"},on:{change:t.handleNavToType},slot:"prepend",model:{value:t.ruleForm.jumpType,callback:function(e){t.$set(t.ruleForm,"jumpType",e)},expression:"ruleForm.jumpType"}},t._l(t.pathType,(function(t){return r("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1)],1),r("el-form-item",{attrs:{label:"活动时间"}},[r("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","default-time":["00:00:00","23:59:59"]},on:{change:t.handleChangeTime},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),r("el-form-item",{attrs:{label:"展示位置"}},[r("el-select",{attrs:{placeholder:"请选择展示位置"},model:{value:t.ruleForm.pos_id,callback:function(e){t.$set(t.ruleForm,"pos_id",e)},expression:"ruleForm.pos_id"}},t._l(t.postOptions,(function(t){return r("el-option",{key:t.pos_id,attrs:{label:t.pos_desc,value:t.pos_id}})})),1)],1),r("el-form-item",{attrs:{label:"是否全屏",prop:"is_half"}},[r("el-radio-group",{on:{change:function(e){return t.handleBuyChange(t.ruleForm.is_half)}},model:{value:t.ruleForm.is_half,callback:function(e){t.$set(t.ruleForm,"is_half",e)},expression:"ruleForm.is_half"}},[r("el-radio",{attrs:{label:"0"}},[t._v("是")]),r("el-radio",{attrs:{label:"1"}},[t._v("否")])],1)],1),r("el-form-item",{attrs:{label:"屏幕尺寸",prop:"height"}},[r("el-input",{directives:[{name:"input-limit",rawName:"v-input-limit",value:2,expression:"2"}],attrs:{placeholder:"请输入屏幕高度",clearable:""},model:{value:t.ruleForm.height,callback:function(e){t.$set(t.ruleForm,"height",e)},expression:"ruleForm.height"}},[r("template",{slot:"append"},[r("span",{staticClass:"unit"},[t._v("dp")])])],2)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},f=[],h=r("40bd"),g=r("7e8c"),b=(r("00e5"),r("65c4"),r("1af9"),r("40cb")),v={components:{uploadImg:b["a"]},computed:{title:function(){return"add"===this.status?"新增":"update"===this.status?"修改":"查看"},StartPicker:function(){return{disabledDate:function(t){return t.getTime()<(new Date).getTime()-864e5}}},EndPicker:function(){return{disabledDate:function(t){return t.getTime()<(new Date).getTime()-864e5}}},startTime:function(){var t=this,e=this.ruleForm.start_time,r=(new Date).getTime(),a={};return a={required:!0,validator:function(a,n,i){e<r&&"add"===t.status?i(new Error("商品生效时间不可小于当前时间")):i()}},a},endTime:function(){var t=this,e=this.ruleForm.start_time,r=(new Date).getTime(),a={};return a={required:!0,validator:function(a,n,i){e<r&&"add"===t.status?i(new Error("商品生效时间不可小于当前时间")):i()}},a}},data:function(){return{dialogVisible:!1,goodsNumTypeList:d["a"].GOODNUMTYPE,goodsType:1,status:"add",oldParams:{},pathType:d["a"].PATHTYPE,placeholderText:"请先选择落地类型",navToType:0,time:[new Date,new Date],ruleForm:{name:"",sort:"",flash_img:"",banner_img:"",room_img:"",jumpType:"",time:"",url:"",nav_to:"",pos_id:"",is_half:"0",height:0},postOptions:[],rules:{name:[{required:!0,message:"请输入活动标题",trigger:"blur"}],sort:[{required:!0,message:"请输入权重排序",trigger:"blur"}],url:[{required:!0,message:"请输入落地地址",trigger:"blur"}],is_half:[{required:!0,message:"请选择是否全屏",trigger:"change"}],height:[{required:!0,message:"请输入屏幕尺寸",trigger:"blur"}]}}},methods:{handleClose:function(){this.close()},load:function(t,e){if(this.status=t,this.getPosList(),"add"!==t){this.oldParams=e;var r=JSON.parse(JSON.stringify(e));r.start_time=1e3*r.start_time,r.end_time=1e3*r.end_time,r.id=r.id,r.banner_img=r.banner_img,r.flash_img=r.flash_img,r.name=r.name,r.room_img=r.room_img,r.sort=r.sort,r.url="app"==r.nav_to.type?r.nav_to.params.roomId:r.nav_to.uri,r.jumpType="app"==r.nav_to.type?1:2,this.$set(this.$data,"ruleForm",r),this.time=[],this.time[0]=r.start_time,this.time[1]=r.end_time}},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var r=Object(i["a"])({},e.ruleForm);if(0!=e.time.length){r.start_time=Math.floor(e.time[0]/1e3),r.end_time=Math.floor(e.time[1]/1e3);var a="",n="",o="";if(""!=r.jumpType)if(""!=r.banner_img||""!=r.flash_img||""!=r.room_img){switch(r.jumpType){case 1:a="app",o=r.url;break;case 2:a="h5",n=r.url;break;default:break}r.nav_to={type:a,uri:n,is_half:r.is_half,height:r.height},""!==o&&(r.nav_to.params={roomId:o},r.nav_to.uri="enterRoom"),r.nav_to=JSON.stringify(r.nav_to),delete r.url,delete r.jumpType,delete r.time,delete r.is_half,delete r.height,"add"==e.status?Object(c["a"])(r).then((function(t){2e3===t.code&&(e.dialogVisible=!1,e.$emit("onSearch"))})).catch((function(t){e.$message.error(t)})):"update"==e.status&&Object(c["d"])(r).then((function(t){2e3===t.code&&(e.dialogVisible=!1,e.$emit("onSearch"))})).catch((function(t){e.$message.error(t)}))}else e.$message.error("请添加资源位素材");else e.$message.error("请先选择落地类型")}else e.$message.error("请先选择活动时间")}))},resetForm:function(t){this.close()},close:function(){var t=this;this.$confirm("关闭后数据不会保存，确定关闭吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dialogVisible=!1,t.$emit("onSearch")})).catch((function(){}))},destoryComp:function(){this.$emit("destoryComp")},validateField:function(t){this.$refs.ruleForm.validateField([t])},handleNavToType:function(t){this.placeholderText=1==t?"请输入房间号":"请输入落地地址"},getFileSplash:function(t){this.ruleForm.flash_img=t},getFileBanner:function(t){this.ruleForm.banner_img=t},getFilenonius:function(t){this.ruleForm.room_img=t},handleChangeTime:function(t){this.time=t,this.ruleForm.time=t},getPosList:function(){var t=this;return Object(g["a"])(Object(h["a"])().mark((function e(){var r;return Object(h["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["G"])();case 2:r=e.sent,r.code+""==="2000"&&(t.postOptions=r.data.list||[]);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){}},_=v,y=(r("3748"),r("e607")),F=Object(y["a"])(_,p,f,!1,null,null,null),j=F.exports,O={components:{tableList:o["a"],SearchPanel:s["a"],add:j},mixins:[u["a"]],computed:{forms:function(){return[{name:"name",type:"input",value:"",label:"活动名称",placeholder:"请输入活动名称"},{name:"type",type:"select",value:null,keyName:"value",optionLabel:"name",label:"活动状态",placeholder:"请选择",clearable:!0,options:d["a"].ACTIVESTATUS}]},cfgs:function(){var t=this;return{vm:this,url:l["a"].activity.resourceList,columns:[{label:"开始时间",render:function(t,e){return t("span",e.row.start_time?Object(m["h"])(e.row.start_time,"YYYY-MM-DD HH:mm:ss",!0):"--")}},{label:"结束时间",render:function(t,e){return t("span",e.row.end_time?Object(m["h"])(e.row.end_time,"YYYY-MM-DD HH:mm:ss",!0):"--")}},{label:"活动名称",prop:"name"},{label:"banner图片",isimg:!0,prop:"banner_img",imgWidth:"50px",imgHeight:"50px"},{label:"闪屏图片",isimg:!0,prop:"flash_img",imgWidth:"50px",imgHeight:"50px"},{label:"房间游标图片",isimg:!0,prop:"room_img",imgWidth:"50px",imgHeight:"50px"},{label:"权重",prop:"sort"},{label:"展示位置",render:function(t,e){console.log(e.row.pos_id);var r=d["a"].POSSTATUS.find((function(t){return t.value===e.row.pos_id}));return t("div",[t("span",r?r.name:"--")])}},{label:"状态",render:function(t,e){var r=d["a"].ACTIVESTATUS.find((function(t){return t.value===e.row.status}));return t("div",{class:{bounce_fa:!0}},[t("span",r?r.name:"--")])}},{label:"操作",render:function(e,r){return e("div",[e("el-button",{props:{type:"primary"},style:{display:2===r.row.status?"unset":"none"},on:{click:function(){t.update(r.row,2)}}},"修改"),e("el-button",{props:{type:"danger"},on:{click:function(){t.down(r.row,2)}}},"删除")])}}]}}},data:function(){return{ruleForm:{alreadyMoney:null,deductMoney:null},isDestoryComp:!1}},methods:{getList:function(){this.$refs.tableList.getData()},beforeSearch:function(t){var e=Object(i["a"])({},this.searchParams);return{page:t.page,pagesize:t.pagesize,type:e.type,name:e.name}},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},saleAmunt:function(t){},add:function(){this.load("add")},update:function(t){this.load("update",t)},down:function(t,e){var r=this,a={id:t.id};Object(c["b"])(a).then((function(t){2e3===t.code&&r.onSearch()}))},load:function(t,e){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.add.dialogVisible=!0,r.$refs.add.load(t,e)}),100)},destoryComp:function(){this.isDestoryComp=!1}}},T=O,x=(r("a8e4"),Object(y["a"])(T,a,n,!1,null,null,null));e["default"]=x.exports},3748:function(t,e,r){"use strict";r("1d2e")},6816:function(t,e,r){},a8e4:function(t,e,r){"use strict";r("6816")},ca41:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"G",(function(){return u})),r.d(e,"o",(function(){return l})),r.d(e,"v",(function(){return c})),r.d(e,"p",(function(){return m})),r.d(e,"x",(function(){return d})),r.d(e,"H",(function(){return p})),r.d(e,"E",(function(){return f})),r.d(e,"q",(function(){return h})),r.d(e,"y",(function(){return g})),r.d(e,"r",(function(){return b})),r.d(e,"z",(function(){return v})),r.d(e,"h",(function(){return _})),r.d(e,"w",(function(){return y})),r.d(e,"k",(function(){return F})),r.d(e,"s",(function(){return j})),r.d(e,"F",(function(){return O})),r.d(e,"A",(function(){return T})),r.d(e,"t",(function(){return x})),r.d(e,"B",(function(){return w})),r.d(e,"i",(function(){return k})),r.d(e,"g",(function(){return P})),r.d(e,"n",(function(){return S})),r.d(e,"m",(function(){return C})),r.d(e,"l",(function(){return $})),r.d(e,"D",(function(){return V})),r.d(e,"f",(function(){return D})),r.d(e,"e",(function(){return L})),r.d(e,"c",(function(){return N})),r.d(e,"j",(function(){return A})),r.d(e,"u",(function(){return I})),r.d(e,"C",(function(){return R}));var a=r("829b"),n=r("8daa");function i(t){return Object(a["a"])({url:n["a"].activity.addResourceConfig,method:"post",data:t})}function o(t){return Object(a["a"])({url:n["a"].activity.editResource,method:"post",data:t})}function s(t){return Object(a["a"])({url:n["a"].activity.delResource,method:"post",data:t})}function u(t){return Object(a["a"])({url:n["a"].activity.posList,method:"post",data:t})}function l(t){return Object(a["a"])({url:n["a"].activity.getPoolName,method:"post",data:t})}function c(t){return Object(a["a"])({url:n["a"].activity.getRound,method:"post",data:t})}function m(t){return Object(a["a"])({url:n["a"].activity.getPoolNameV2,method:"post",data:t})}function d(t){return Object(a["a"])({url:n["a"].activity.getRoundV2,method:"post",data:t})}function p(t){return Object(a["a"])({url:n["a"].activity.sourceType,method:"post",data:t})}function f(t){return Object(a["a"])({url:n["a"].activity.getTraveListDetail,method:"post",data:t})}function h(t){return Object(a["a"])({url:n["a"].activity.getPoolNameV3,method:"post",data:t})}function g(t){return Object(a["a"])({url:n["a"].activity.getRoundV3,method:"post",data:t})}function b(t){return Object(a["a"])({url:n["a"].activity.getPoolNameV4,method:"post",data:t})}function v(t){return Object(a["a"])({url:n["a"].activity.getRoundV4,method:"post",data:t})}function _(t){return Object(a["a"])({url:n["a"].activity.getGiftList,method:"post",data:t})}function y(t){return Object(a["a"])({url:n["a"].activity.getRoundList,method:"post",data:t})}function F(t){return Object(a["a"])({url:n["a"].activity.getLabourGiftList,method:"post",data:t})}function j(t){return Object(a["a"])({url:n["a"].activity.getPoolNameV5,method:"post",data:t})}function O(t){return Object(a["a"])({url:n["a"].activity.luckyConfigV5,method:"post",data:t})}function T(t){return Object(a["a"])({url:n["a"].activity.getRoundV5,method:"post",data:t})}function x(t){return Object(a["a"])({url:n["a"].activity.getPoolNameV520,method:"post",data:t})}function w(t){return Object(a["a"])({url:n["a"].activity.getRoundV520,method:"post",data:t})}function k(t){return Object(a["a"])({url:n["a"].activity.getGiftV520,method:"post",data:t})}function P(t){return Object(a["a"])({url:n["a"].dragonBoat.getGift,method:"post",data:t})}function S(t){return Object(a["a"])({url:n["a"].activity.getPizzaGift,method:"post",data:t})}function C(t){return Object(a["a"])({url:n["a"].monthStar.getRound,method:"post",data:t})}function $(t){return Object(a["a"])({url:n["a"].monthStar.getGift,method:"post",data:t})}function V(t){return Object(a["a"])({url:n["a"].summerSign.getSummerAddUser,method:"post",data:t})}function D(t){return Object(a["a"])({url:n["a"].summerSign.getAuditPass,method:"post",data:t})}function L(t){return Object(a["a"])({url:n["a"].summerSign.getAuditNoPass,method:"post",data:t})}function N(t){return Object(a["a"])({url:n["a"].summerSign.editPowerRanking,method:"post",data:t})}function A(t){return Object(a["a"])({url:n["a"].summerSign.getGift,method:"post",data:t})}function I(t){return Object(a["a"])({url:n["a"].activity.getPoolNameV6,method:"post",data:t})}function R(t){return Object(a["a"])({url:n["a"].activity.getRoundV6,method:"post",data:t})}}}]);