(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c5e59bb"],{"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},2708:function(e,t,r){"use strict";var s=r("5530"),i=r("2f62"),a={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(s["a"])({},Object(i["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=a},6478:function(e,t,r){"use strict";r("abcf")},abcf:function(e,t,r){},b2c3:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container consume-list-box"},[r("div",{staticClass:"btnBox"},[r("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增主管")])],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs,"is-hide-page":!0}}),e.isDestoryComp?r("operateComp",{ref:"operateComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},i=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"consumeComp-box"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"450px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"运营主管",prop:"lead_id"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择",disabled:"update"===e.status},model:{value:e.ruleForm.lead_id,callback:function(t){e.$set(e.ruleForm,"lead_id",t)},expression:"ruleForm.lead_id"}},e._l(e.mainOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})})),1)],1),"update"===e.status?r("el-form-item",{attrs:{label:"公会运营",prop:"member_ids"}},[r("el-select",{attrs:{placeholder:"请选择",filterable:"",multiple:""},model:{value:e.ruleForm.member_ids,callback:function(t){e.$set(e.ruleForm,"member_ids",t)},expression:"ruleForm.member_ids"}},e._l(e.staffOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})})),1)],1):e._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},o=[],n=r("c7eb"),l=r("1da1"),u=(r("b64b"),r("e9c4"),r("d3b7"),r("159b"),r("14d9"),r("a15b"),r("1a72")),c={data:function(){return{dialogVisible:!1,status:"add",ruleForm:{lead_id:"",member_ids:""},rules:{lead_id:[{required:!0,message:"请选择运营主管",trigger:"blur"}],member_ids:[{required:!1,message:"请选择公会运营",trigger:"blur"}]},mainOptions:[],staffOptions:[]}},mounted:function(){this.getOptions()},computed:{title:function(){return"add"===this.status?"新增公会主管":"update"===this.status?"新增工会运营":void 0}},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e,t){if(this.dialogVisible=!0,this.status=e,"update"===e){var r=JSON.parse(JSON.stringify(t));console.log("params",r),this.getOptions(r)}},getOptions:function(e){var t=this,r={};e&&e.lead_id&&(r.lead_id=e.lead_id),Object(u["T"])(r).then((function(r){if(console.log(r),2e3===r.code){var s=r.data||[];if(e&&e.lead_id){var i=[];s.forEach((function(e){e.selected&&i.push(e.id)})),e.member_ids=i,t.staffOptions=s,t.$set(t.$data,"ruleForm",e)}else t.mainOptions=s}}))},submitForm:function(e){var t=this;return Object(l["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(r){var s,i,a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}return s=t.ruleForm,i={lead_id:s.lead_id},"update"===t.status&&(i.member_ids=Array.isArray(s.member_ids)?s.member_ids.join(","):s.member_ids),e.next=6,Object(u["Sb"])(i);case 6:a=e.sent,2e3===a.code&&(t.$message.success("操作成功！"),t.dialogVisible=!1,t.$emit("getList")),e.next=12;break;case 10:return console.log("error submit!!"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},resetForm:function(e){this.$refs[e].resetFields()},closed:function(){this.$emit("destoryComp")}}},d=c,m=r("2877"),p=Object(m["a"])(d,a,o,!1,null,"59825f31",null),f=p.exports,b=r("4053"),h=r("2708"),g=r("8daa"),_=r("cf45"),v={name:"operate-manage",mixins:[h["a"]],components:{operateComp:f,tableList:b["a"]},computed:{cfgs:function(){var e=this;return{vm:this,url:g["a"].system.operate.getManagerList,columns:[{label:"运营主管",prop:"lead_name"},{label:"公会运营成员",prop:"member_name",render:function(e,t){return e("span",t.row.member_name||"无")}},{label:"修改时间",render:function(e,t){return e("span",t.row.update_time?Object(_["h"])(t.row.update_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"操作",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改")])}}]}}},data:function(){return{isDestoryComp:!1}},methods:{getList:function(){this.$refs.tableList.getData()},beforeSearch:function(e){return{}},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},destoryComp:function(){this.isDestoryComp=!1},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.operateComp.loadParams(e,t)}),50)}}},O=v,y=(r("6478"),Object(m["a"])(O,s,i,!1,null,null,null));t["default"]=y.exports}}]);