(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-657ebf88"],{"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},2708:function(e,t,r){"use strict";var n=r("4672"),a=r("52c1"),i={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(n["a"])({},Object(a["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=i},"653e":function(e,t,r){"use strict";r("a09f")},"745c":function(e,t,r){},a09f:function(e,t,r){},bd803:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guildReport-list-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0},on:{onReset:e.reset,onSearch:e.onSearch},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("guildReportComp",{ref:"guildReportComp",on:{destoryComp:e.destoryComp}}):e._e()],1)},a=[],i=r("40bd"),s=r("7e8c"),o=r("4672"),u=(r("23dc"),r("8bda"),r("48d4"),r("1a72")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guildReportComp-box"},[r("el-dialog",{attrs:{visible:e.dialogVisible,width:"400px","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"room_number",label:"房间ID",align:"center"}}),r("el-table-column",{attrs:{prop:"not_guild_free",label:"收入",align:"center"}})],1)],1)],1)},c=[],d={data:function(){return{dialogVisible:!1,tableData:[]}},methods:{handleClose:function(){this.dialogVisible=!1},loadParams:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function r(){var n;return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.dialogVisible=!0,r.next=3,Object(u["W"])(e);case 3:n=r.sent,t.tableData=n.data.list||[];case 5:case"end":return r.stop()}}),r)})))()},closed:function(){this.$emit("destoryComp")}}},m=d,p=(r("653e"),r("e607")),f=Object(p["a"])(m,l,c,!1,null,null,null),b=f.exports,h=r("04a2"),g=r("4053"),v=r("8daa"),w=r("cf45"),_=r("2708"),x=r("279a"),y={name:"guildReport-list",mixins:[_["a"]],components:{SearchPanel:h["a"],tableList:g["a"],guildReportComp:b},computed:{forms:function(){return[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"未处理",keyName:"value",optionLabel:"name",label:"状态",placeholder:"请选择",options:x["a"].GUILDREPORTSTATUS}]},cfgs:function(){var e=this;return{vm:this,url:v["a"].guild.guildUserReport,columns:[{label:"举报公会名称（ID）",minWidth:"180px",render:function(e,t){return e("div",[e("div",t.row.guild_nickname),e("div",t.row.guild_number||"无")])}},{label:"公会等级",render:function(e,t){var r=x["a"].CLASSLIST.find((function(e){return e.value===t.row.rank}));return e("span",r?r.name:"无")}},{label:"公会长昵称（ID）",minWidth:"150px",render:function(e,t){return e("div",[e("div",t.row.guild_owner.nickname),e("div",t.row.guild_owner.user_number||"无")])}},{label:"被举报成员昵称（ID）",minWidth:"180px",render:function(e,t){return e("div",[e("div",t.row.reported_user.nickname),e("div",t.row.reported_user.user_number||"无")])}},{label:"近72小时非本公会厅收入",minWidth:"200px",render:function(t,r){return t("span",{style:{color:r.row.not_guild_free?"#67C23A":"#606266"},on:{click:function(){e.details(r.row)}}},r.row.not_guild_free||"0")}},{label:"状态",render:function(e,t){var r=x["a"].GUILDREPORTSTATUS.find((function(e){return e.value===t.row.status}));return e("span",r?r.name:"无")}},{label:"举报时间",minWidth:"180px",render:function(e,t){return e("span",t.row.create_time?Object(w["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"处理人",prop:"deal_user"},{label:"处理时间",minWidth:"180px",render:function(e,t){return e("span",t.row.create_time?Object(w["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"操作",minWidth:"230px",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:1===r.row.status?"unset":"none"},on:{click:function(){e.func(r.row.id,2)}}},"同意"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status?"unset":"none"},on:{click:function(){e.func(r.row.id,3)}}},"拒绝")])}}]}}},data:function(){return{isDestoryComp:!1}},methods:{beforeSearch:function(e){var t=Object(o["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,guild_number:t.guild_number,status:t.status?t.status:1}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},func:function(e,t){var r=this;return Object(s["a"])(Object(i["a"])().mark((function n(){var a;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["S"])({id:e,status:t});case 2:a=n.sent,2e3===a.code&&r.$message.success("操作成功"),r.getList();case 5:case"end":return n.stop()}}),n)})))()},destoryComp:function(){this.isDestoryComp=!1},details:function(e){var t=this;if(e.not_guild_free&&e.reported_user){var r={user_id:e.reported_user.user_number,guild_id:e.guild_number};this.isDestoryComp=!0,setTimeout((function(){t.$refs.guildReportComp.loadParams(r)}),50)}}}},C=y,D=(r("d6d0"),Object(p["a"])(C,n,a,!1,null,null,null));t["default"]=D.exports},d6d0:function(e,t,r){"use strict";r("745c")}}]);