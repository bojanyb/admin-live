(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-235828ca"],{"1fe8":function(e,t,a){e.exports=a.p+"static/img/error.e53687be.png"},2708:function(e,t,a){"use strict";var n=a("5530"),i=a("2f62"),r={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(n["a"])({},Object(i["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=r},7818:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container serviceConfig-coverAudit-box"},[a("div",{staticClass:"searchParams"},[a("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-batch-pass":!0,"show-batch-rurn":!0,"batch-rurn-name":"批量删除","show-custom":!0,"custom-name":"批量忽略"},on:{batchPass:e.handleBatchPass,BatchRurn:e.handleBatchDelete,custom:e.handleBatchIgnore,onReset:e.reset,onSearch:e.onSearch},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),a("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs},on:{selectionChange:e.selectionChange}})],1)},i=[],r=a("c7eb"),s=a("1da1"),c=a("5530"),o=(a("d81d"),a("a15b"),a("cb99")),u=a("04a2"),m=a("4053"),h=a("8daa"),d=a("2708"),l={mixins:[d["a"]],components:{SearchPanel:u["a"],tableList:m["a"]},data:function(){return{searchParams:{user_number:"",id:""},selectList:[]}},computed:{forms:function(){var e=this;return[{name:"user_number",type:"input",value:"",label:"用户ID",isNum:!0,placeholder:"请输入用户ID"},{name:"id",type:"input",value:"",label:"动态ID",isNum:!0,placeholder:"请输入动态ID"},{name:"dateTimeParams",type:"datePicker",dateType:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",label:"时间选择",value:"",handler:{change:function(t){e.emptyDateTime(),e.setDateTime(t)},selectChange:function(t,a){e.emptyDateTime()}}}]},cfgs:function(){var e=this;return{vm:this,isShowCheckbox:!0,url:h["a"].dynamic.checkList,columns:[{label:"动态ID",prop:"id",width:80},{label:"发送者昵称",prop:"user_nickname",width:120},{label:"发送者ID",prop:"user_number",width:120},{label:"标题",prop:"content",showOverFlow:!0},{label:"图片",isimgList:!0,prop:"media_list",imgWidth:"50px",imgHeight:"50px"},{label:"话题",prop:"topic_title",width:150},{label:"发布时间",prop:"create_time",width:180},{label:"操作",render:function(t,a){return t("div",[t("el-button",{props:{type:"success",size:"mini"},on:{click:function(){e.audit(a.row.id,3)}}},"通过"),t("el-button",{props:{type:"warning",size:"mini"},on:{click:function(){e.audit(a.row.id,2)}}},"忽略"),t("el-button",{props:{type:"danger",size:"mini"},on:{click:function(){e.audit(a.row.id,1)}}},"违规删除")])}}]}}},methods:{beforeSearch:function(e){var t=Object(c["a"])(Object(c["a"])({},this.searchParams),this.dateTimeParams);return{page:e.page,pagesize:e.size,start_time:t.start_time?Math.floor(t.start_time/1e3):t.start_time,end_time:t.end_time?Math.floor(t.end_time/1e3):t.end_time,id:t.id,user_number:t.user_number}},getList:function(){this.$refs.tableList.getData()},setDateTime:function(e){var t=e?{start_time:e[0],end_time:e[1]}:{};this.$set(this,"dateTimeParams",t)},emptyDateTime:function(){this.dateTimeParams={}},reset:function(){this.searchParams={user_number:"",id:""},this.dateTimeParams={},this.getList()},onSearch:function(){this.getList()},audit:function(e,t){var a=this;return Object(s["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(o["a"])({moments_ids:e,check_status:t});case 2:i=n.sent,2e3===i.code&&(a.$success("审核通过"),a.getList());case 4:case"end":return n.stop()}}),n)})))()},batchAudit:function(e,t){var a=this;return Object(s["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.selectList.length){n.next=3;break}return a.$error("请先选择待审核数据"),n.abrupt("return");case 3:a.$confirm("是否确认".concat(t,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(Object(r["a"])().mark((function n(){var i,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=a.selectList.map((function(e){return e.id})),s={moments_ids:i.join(","),check_status:e},n.next=4,Object(o["a"])(s);case 4:c=n.sent,2e3===c.code&&(a.$success(t+"成功"),a.getList());case 6:case"end":return n.stop()}}),n)})))).catch((function(){}));case 4:case"end":return n.stop()}}),n)})))()},selectionChange:function(e){this.selectList=e},handleBatchPass:function(){this.batchAudit(3,"批量通过")},handleBatchDelete:function(){this.batchAudit(2,"批量删除")},handleBatchIgnore:function(){this.batchAudit(1,"批量忽略")}}},p=l,b=a("2877"),f=Object(b["a"])(p,n,i,!1,null,"1bb4ea7f",null);t["default"]=f.exports},cb99:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return o}));var n=a("829b"),i=a("8daa");function r(e){return Object(n["a"])({url:i["a"].dynamic.delMoments,method:"post",data:e})}function s(e){return Object(n["a"])({url:i["a"].dynamic.deleteMsg,method:"post",data:e})}function c(e){return Object(n["a"])({url:i["a"].dynamic.multiDeleteMsg,method:"post",data:e})}function o(e){return Object(n["a"])({url:i["a"].dynamic.check,method:"post",data:e})}}}]);