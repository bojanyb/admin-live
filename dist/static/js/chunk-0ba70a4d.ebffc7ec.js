(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ba70a4d"],{"0cad":function(e,t,a){},"127f":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("40bd"),n=a("7e8c"),s=(a("48d4"),a("8bda"),a("897d")),o=a.n(s),i=a("4109"),u={ossParams:{region:"oss-cn-shenzhen",success_action_status:"200",accessKeyId:"LTAI5tFTcRH7h3RXKoYmnWMk",accessKeySecret:"qdx4B8jIh2VjBgBDG5fNfG0Oj21GSP",bucket:"live-huidapay-net"}};function c(e){var t=e.name.split("."),a=o()(Date.now()+t[0]);return a=a+"."+t[t.length-1],a}function d(e){return new Promise(function(){var t=Object(n["a"])(Object(r["a"])().mark((function t(a,n){var s,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=c(e),o=new i({region:u.ossParams.region,accessKeyId:u.ossParams.accessKeyId,accessKeySecret:u.ossParams.accessKeySecret,bucket:u.ossParams.bucket}),t.next=4,o.multipartUpload(s,e);case 4:t.sent,a({url:"https://photo.aiyi.live/"+s});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},"1fe8":function(e,t,a){e.exports=a.p+"static/img/error.e53687be.png"},2708:function(e,t,a){"use strict";var r=a("4672"),n=a("52c1"),s={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(r["a"])({},Object(n["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=s},"4a0c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container moveDating-box"},[a("div",{staticClass:"searchParams"},[a("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),a("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs,isHidePage:!0}}),e.isDestoryComp?a("cardComp",{ref:"cardComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},n=[],s=a("40bd"),o=a("7e8c"),i=a("4672"),u=(a("23dc"),a("8bda"),a("48d4"),a("ee6e"),a("74e4")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"moveDating-cardComp-box"},[a("drawer",{ref:"drawer",attrs:{size:"470px",title:e.title,isShowUpdate:!0,disabled:e.disabled},on:{cancel:e.cancel,submitForm:e.submitForm,closed:e.closed,update:e.update}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{slot:"body",model:e.ruleForm,rules:e.rules,"label-width":"115px","label-suffix":":","hide-required-asterisk":"see"===e.status},slot:"body"},[a("el-form-item",{attrs:{label:"音色分类名",prop:"sound_tag"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.sound_tag,callback:function(t){e.$set(e.ruleForm,"sound_tag",t)},expression:"ruleForm.sound_tag"}})],1),a("el-form-item",{attrs:{label:"权重排序",prop:"sort"}},[a("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",disabled:e.disabled},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},e._l(e.sexList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"上传封面",prop:"img"}},[a("uploadImg",{ref:"uploadImg",attrs:{imgUrl:e.ruleForm.img,name:"img",accept:".png,.jpg,.jpeg",disabled:e.disabled},on:{validateField:e.validateField},model:{value:e.ruleForm.img,callback:function(t){e.$set(e.ruleForm,"img",t)},expression:"ruleForm.img"}})],1),a("el-form-item",{attrs:{label:"上传声音签名",prop:"audio"}},[a("uploadImg",{ref:"uploadAudio",attrs:{imgUrl:e.ruleForm.audio,name:"audio",accept:".mp3",disabled:e.disabled},on:{validateField:e.validateField,getFile:e.getFile},model:{value:e.ruleForm.audio,callback:function(t){e.$set(e.ruleForm,"audio",t)},expression:"ruleForm.audio"}})],1)],1)],1)],1)},d=[],l=(a("00e5"),a("65c4"),a("15f2"),a("0ea2"),a("e2b5"),a("f56b"),a("0472")),m=a("40cb"),p=a("279a"),f={components:{uploadImg:m["a"],drawer:l["a"]},data:function(){return{status:"add",oldParams:{},ruleForm:{id:null,img:"",sound_tag:"",audio:"",duration:null,sort:"",sex:null},rules:{sound_tag:[{required:!0,message:"请输入音色分类名",trigger:"change"}],sort:[{required:!0,message:"请输入权重排序",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change",validator:function(e,t,a){return 0==t?a(new Error("请选择性别!")):a()}}],img:[{required:!0,message:"请上传封面",trigger:"change"}],audio:[{required:!0,message:"请上传声音签名",trigger:"change"}]},sexList:p["a"].SEXLIST}},computed:{title:function(){return"add"===this.status?"新增心动卡片":"update"===this.status?"修改心动卡片":"查看心动卡片"},disabled:function(){return"see"===this.status}},methods:{handleClose:function(){this.openComp(!1)},loadParams:function(e,t){if(this.openComp(),this.status=e,"add"!==e){var a=JSON.parse(JSON.stringify(t));this.$set(this.$data,"ruleForm",a)}this.oldParams=JSON.parse(JSON.stringify(this.ruleForm))},openComp:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.drawer.loadParams(e)},cancel:function(){var e=this;JSON.stringify(this.oldParams)!==JSON.stringify(this.ruleForm)?this.$confirm("关闭弹窗将不会保留您的更改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.openComp(!1)})).catch((function(){})):this.openComp(!1)},update:function(){this.status="update"},submitForm:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=Object(o["a"])(Object(s["a"])().mark((function e(a){var r,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return r=Object(i["a"])({},t.ruleForm),r.duration=r.duration?Math.floor(r.duration):r.duration,r.sound_img="",e.next=6,Object(u["f"])(r);case 6:n=e.sent,2e3===n.code&&(t.$success("新增成功"),t.openComp(!1),t.$emit("getList")),e.next=12;break;case 10:return console.log("error submit!!"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},resetForm:function(e){this.$refs[e].resetFields()},validateField:function(e){this.$refs.ruleForm.validateField([e])},getFile:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getMp4Time(e.file);case 2:r=a.sent,t.ruleForm.duration=r;case 4:case"end":return a.stop()}}),a)})))()},getMp4Time:function(e){return new Promise((function(t,a){var r=URL.createObjectURL(e),n=new Audio(r);n.addEventListener("loadedmetadata",(function(){var e=Math.round(100*n.duration)/100;t(e)})),n.addEventListener("error",(function(){t(0)}))}))},closed:function(){this.$emit("destoryComp")}}},h=f,b=(a("93d6"),a("e607")),g=Object(b["a"])(h,c,d,!1,null,null,null),v=g.exports,x=a("04a2"),w=a("4053"),O=a("8daa"),j=a("2708"),F={mixins:[j["a"]],components:{tableList:w["a"],SearchPanel:x["a"],cardComp:v},data:function(){return{isDestoryComp:!1,sound_tagList:[]}},computed:{forms:function(){return[{name:"sound_tag",type:"select",value:"全部",keyName:"id",optionLabel:"sound_tag",label:"音色分类名",clearable:!0,placeholder:"请选择音色分类名",options:this.sound_tagList}]},cfgs:function(){var e=this;return{vm:this,url:O["a"].move.Heartbeat,columns:[{label:"音色ID",prop:"id"},{label:"音色分类名",prop:"sound_tag"},{label:"性别",prop:"sex",render:function(e,t){var a=p["a"].SEXLIST.find((function(e){return e.value==t.row.sex}));return e("div",a?a.name:"男")}},{label:"封面",isimg:!0,prop:"img",imgWidth:"50px",imgHeight:"50px"},{label:"声音签名",isimg:!0,prop:"audio",imgWidth:"50px",imgHeight:"50px",minWidth:"170px"},{label:"排序权重",prop:"sort"},{label:"操作",minWidth:"100px",render:function(t,a){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(a.row)}}},"修改"),t("el-button",{props:{type:"danger"},on:{click:function(){e.deleteParams(a.row.id)}}},"删除")])}}]}}},methods:{beforeSearch:function(e){var t=Object(i["a"])({},this.searchParams),a="";return""!==t.sound_tag||"全部"!==t.sound_tag?this.sound_tagList.forEach((function(e){e.id==t.sound_tag&&(a=e.sound_tag)})):a="",{page:e.page,pagesize:e.size,sound_tag:a}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.getList()},onSearch:function(){this.getList()},add:function(e){this.load("add",e)},update:function(e){this.load("update",e)},load:function(e,t){var a=this;this.isDestoryComp=!0,setTimeout((function(){a.$refs.cardComp.loadParams(e,t)}),50)},deleteParams:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("确认删除当前数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(s["a"])().mark((function a(){var r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["b"])({id:e});case 2:r=a.sent,2e3===r.code&&(t.$success("删除成功"),t.getList());case 4:case"end":return a.stop()}}),a)})))).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()},destoryComp:function(){this.isDestoryComp=!1},serachTagFunc:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["h"])();case 2:a=t.sent,e.sound_tagList=a.data,e.sound_tagList.unshift({id:0,sound_tag:"全部"});case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.serachTagFunc()}},y=F,_=(a("a159"),Object(b["a"])(y,r,n,!1,null,null,null));t["default"]=_.exports},"65fc":function(e,t,a){},"74e4":function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"g",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return d})),a.d(t,"b",(function(){return l})),a.d(t,"h",(function(){return m}));var r=a("829b"),n=a("8daa");function s(e){return Object(r["a"])({url:n["a"].move.getCardConfig,method:"post",data:e})}function o(e){return Object(r["a"])({url:n["a"].move.saveCardConfig,method:"post",data:e})}function i(e){return Object(r["a"])({url:n["a"].move.rmHeartAnchor,method:"post",data:e})}function u(e){return Object(r["a"])({url:n["a"].move.addHeartAnchor,method:"post",data:e})}function c(e){return Object(r["a"])({url:n["a"].move.editHeartAnchor,method:"post",data:e})}function d(e){return Object(r["a"])({url:n["a"].move.save,method:"post",data:e})}function l(e){return Object(r["a"])({url:n["a"].move.delete,method:"post",data:e})}function m(e){return Object(r["a"])({url:n["a"].move.serachTag,method:"post",data:e})}},"93d6":function(e,t,a){"use strict";a("0cad")},a159:function(e,t,a){"use strict";a("65fc")}}]);