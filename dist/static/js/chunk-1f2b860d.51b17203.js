(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f2b860d"],{1906:function(e,t,r){"use strict";r("27dd")},"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},2708:function(e,t,r){"use strict";var a=r("5530"),i=r("2f62"),s={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(a["a"])({},Object(i["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=s},"27dd":function(e,t,r){},"2f8b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0},on:{onReset:e.reset,onSearch:e.onSearch},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("guildComplainComp",{ref:"guildComplainComp",on:{onSearch:e.onSearch,destoryComp:e.destoryComp}}):e._e()],1)},i=[],s=r("5530"),o=(r("d3b7"),r("159b"),r("14d9"),r("a15b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guildComplainComp-box"},[r("el-dialog",{attrs:{title:"受理",visible:e.dialogVisible,width:"400px","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.destoryComp}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-suffix":":"}},[r("el-form-item",{attrs:{label:"被投诉公会"}},[r("div",[e._v(e._s(e.ruleForm.guild_name))])]),r("el-form-item",{attrs:{label:"公会所属运营"}},[r("div",[e._v(e._s(e.ruleForm.operator))])]),r("el-form-item",{attrs:{label:"备注说明",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入备注说明，内容将发给对应用户",maxlength:"20","show-word-limit":""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.destoryComp}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)}),n=[],l=(r("b64b"),r("e9c4"),r("1a72")),u={data:function(){return{dialogVisible:!1,ruleForm:{id:"",user_number:"",guild_name:"",operator:"",remark:""},rules:{remark:[{required:!0,message:"请输入备注说明",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]}}},methods:{handleClose:function(){this.destoryComp()},load:function(e){var t=JSON.parse(JSON.stringify(e));this.$set(this.$data,"ruleForm",t),this.dialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var r={id:t.ruleForm.id,user_number:t.ruleForm.guild_user_id,remark:t.ruleForm.remark};Object(l["Db"])(r).then((function(e){2e3===e.code&&(t.dialogVisible=!1,t.$emit("onSearch"))})).catch((function(e){t.$message.error(e)}))}))},destoryComp:function(){this.$emit("destoryComp")}}},m=u,c=(r("1906"),r("2877")),d=Object(c["a"])(m,o,n,!1,null,null,null),p=d.exports,f=r("04a2"),h=r("4053"),b=r("8daa"),g=r("2708"),_={name:"guildComplain-list",mixins:[g["a"]],components:{SearchPanel:f["a"],tableList:h["a"],guildComplainComp:p},data:function(){return{isDestoryComp:!1,dateTimeParams:{},statusOptions:[{value:"",name:"全部"},{value:1,name:"已受理"},{value:0,name:"未受理"}],typeOption:{}}},computed:{forms:function(){var e=this;return[{name:"dateTimeParams",type:"datePicker",dateType:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",label:"投诉时间",value:"",handler:{change:function(t){e.emptyDateTime(),e.setDateTime(t)},selectChange:function(t,r){e.emptyDateTime()}}},{name:"user_id",type:"input",value:"",label:"投诉用户ID",isNum:!0,placeholder:"请输入投诉用户ID"},{name:"guild_user_id",type:"input",value:"",label:"公会长ID",isNum:!0,placeholder:"请输入公会长ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"状态",placeholder:"请选择",options:this.statusOptions}]},cfgs:function(){var e=this;return{vm:this,url:b["a"].guild.getUserComplainList,columns:[{label:"投诉时间",minWidth:120,prop:"create_time"},{label:"投诉用户",prop:"user_name"},{label:"投诉用户ID",prop:"user_id"},{label:"被投诉公会",prop:"guild_name"},{label:"被投诉公会所属公会长",prop:"guild_user_name"},{label:"公会长ID",prop:"guild_user_id"},{label:"公会所属运营",prop:"operator"},{label:"投诉类型",showOverFlow:!0,render:function(t,r){var a=r.row.complaint_ids,i=[];return a.forEach((function(t){i.push(e.typeOption[t])})),t("span",i.join(","))}},{label:"投诉原因",showOverFlow:!0,render:function(e,t){return e("span",t.row.content||"无")}},{label:"投诉证据",isimgList:!0,prop:"img_path",propCopy:"video_path",imgWidth:"70px",imgHeight:"70px",width:"200px"},{label:"受理操作人",render:function(e,t){return e("span",t.row.admin||"无")}},{label:"受理时间",minWidth:120,render:function(e,t){return e("span",t.row.update_time||"无")}},{label:"备注",render:function(e,t){return e("span",t.row.remark||"无")}},{label:"操作",width:100,fixed:"right",render:function(t,r){return t("el-button",{props:{type:0===r.row.status?"danger":"info",size:"mini"},style:{display:r.row.status||0===r.row.status?"unset":"none"},on:{click:function(){e.func(r.row)}}},"".concat(0===r.row.status?"未受理":"已受理"))}}]}}},created:function(){this.getOptions()},methods:{beforeSearch:function(e){var t=Object(s["a"])(Object(s["a"])({},this.searchParams),this.dateTimeParams);return{page:e.page,pagesize:e.size,start_time:t.start_time?Math.floor(t.start_time/1e3):t.start_time,end_time:t.end_time?Math.floor(t.end_time/1e3):t.end_time,user_id:t.user_id,guild_user_id:t.guild_user_id,status:t.status}},getOptions:function(){var e=this;Object(l["ob"])().then((function(t){if(2e3===t.code){var r=t.data;console.log(r),e.typeOption=r.complaint_type}}))},getList:function(){this.$refs.tableList.getData()},setDateTime:function(e){var t=e?{start_time:e[0],end_time:e[1]}:{};this.$set(this,"dateTimeParams",t)},emptyDateTime:function(){this.dateTimeParams={}},reset:function(){this.searchParams={},this.dateTimeParams={},this.getList()},onSearch:function(){this.getList()},func:function(e){1!==e.status&&this.showDialog(e)},destoryComp:function(){this.isDestoryComp=!1},showDialog:function(e){var t=this;this.isDestoryComp=!0,setTimeout((function(){t.$refs.guildComplainComp.load(e)}),50)}}},v=_,y=Object(c["a"])(v,a,i,!1,null,null,null);t["default"]=y.exports}}]);