(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e060d7bc"],{"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},2708:function(e,t,r){"use strict";var o=r("4672"),n=r("52c1"),a={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(o["a"])({},Object(n["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=a},3787:function(e,t,r){"use strict";r("5fe6")},"5fe6":function(e,t,r){},"9e16":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container roomConfig-category-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{isHidePage:!0,cfgs:e.cfgs}}),e.isDestoryComp?r("recommendComp",{ref:"recommendComp",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},n=[],a=r("40bd"),s=r("7e8c"),i=r("4672"),u=(r("23dc"),r("8bda"),r("48d4"),r("afb1"),r("15f2"),r("9d95"),r("ed70"),r("f803")),c=r("1a72"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dialog_body_box"},[r("el-dialog",{attrs:{title:e.title,width:"600px",visible:e.isEditComp},on:{closed:e.closed,"update:visible":function(t){e.isEditComp=t}}},[r("el-form",{ref:"ruleForm",staticClass:"body_box-line",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"90px","label-suffix":":","hide-required-asterisk":"see"===e.status}},[r("el-form-item",{attrs:{label:"房间类型",prop:"room_category_id"}},[r("el-select",{attrs:{placeholder:"请选择房间类型",disabled:"update"===e.status},model:{value:e.ruleForm.room_category_id,callback:function(t){e.$set(e.ruleForm,"room_category_id",t)},expression:"ruleForm.room_category_id"}},e._l(e.roomTypeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"生效时间",prop:"timeRange"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange",align:"center","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","default-time":["00:00:00","23:59:59"]},model:{value:e.ruleForm.timeRange,callback:function(t){e.$set(e.ruleForm,"timeRange",t)},expression:"ruleForm.timeRange"}})],1),r("el-form-item",{attrs:{label:"首页权重",prop:"sort"}},[r("el-input",{attrs:{placeholder:"请输入首页权重"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),r("el-form-item",{attrs:{label:"房间ID",prop:"room_number"}},[r("el-input",{attrs:{placeholder:"请输入房间ID"},model:{value:e.ruleForm.room_number,callback:function(t){e.$set(e.ruleForm,"room_number",t)},expression:"ruleForm.room_number"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},d=[],l=(r("65c4"),r("1af9"),{components:{},data:function(){return{status:"add",isEditComp:!1,roomTypeList:[],ruleForm:{room_category_id:"",timeRange:[],room_number:null,sort:null,room_category:1},oldParams:{},rules:{room_category_id:[{required:!0,message:"请选择房间类型",trigger:"change"}],timeRange:[{type:"array",required:!0,message:"请选择日期区间"}],sort:[{required:!0,message:"请输入权重排序",trigger:"blur"}],room_number:[{required:!0,message:"请输入用户ID",trigger:"blur"}]}}},computed:{title:function(){return"新增"},disabled:function(){return"see"===this.status}},methods:{loadParams:function(e,t){if(this.openComp(),this.status=e,"add"!==e){var r=JSON.parse(JSON.stringify(t)),o={};o.room_category_id=r.room_category_id||"",o.room_category=r.room_category||"",o.room_number=r.room_number||"",o.sort=r.sort||"",o.id=r.id||"",r.start_time&&r.end_time&&(o.timeRange=[1e3*r.start_time,1e3*r.end_time]),this.$set(this.$data,"ruleForm",o)}this.oldParams=JSON.parse(JSON.stringify(this.ruleForm))},openComp:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isEditComp=e},cancel:function(){var e=this;JSON.stringify(this.oldParams)!==JSON.stringify(this.ruleForm)?this.$confirm("关闭弹窗将不会保留您的更改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.openComp(!1)})).catch((function(){})):this.openComp(!1)},update:function(){this.status="update"},submitForm:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.ruleForm.validate(function(){var t=Object(s["a"])(Object(a["a"])().mark((function t(r){var o,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=18;break}if(o=Object(i["a"])({},e.ruleForm),o.timeRange&&o.timeRange.length&&(o.start_time=o.timeRange[0]/1e3,o.end_time=o.timeRange[1]/1e3,delete o.timeRange),"add"!==e.status){t.next=9;break}return t.next=6,Object(u["e"])(o);case 6:n=t.sent,t.next=13;break;case 9:if("update"!==e.status){t.next=13;break}return t.next=12,Object(u["v"])(o);case 12:n=t.sent;case 13:2e3===n.code&&e.$success("新增成功"),e.openComp(!1),e.$emit("getList"),t.next=20;break;case 18:return console.log("error submit!!"),t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.openComp(!1)},validateField:function(e){this.$refs.ruleForm.validateField([e])},closed:function(){this.$emit("destoryComp")},getGenreList:function(e){var t=this;return Object(s["a"])(Object(a["a"])().mark((function r(){var o,n;return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["zb"])(e);case 2:o=r.sent,2e3==o.code&&(n=Array.from(Array.isArray(o.data.list)?o.data.list:[]),t.roomTypeList=n.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 4:case"end":return r.stop()}}),r)})))()}},created:function(){this.getGenreList()}}),f=l,p=(r("3787"),r("e607")),h=Object(p["a"])(f,m,d,!1,null,"24720d74",null),b=h.exports,g=r("04a2"),y=r("4053"),v=r("8daa"),_=r("2708"),O=r("279a"),j=r("cf45"),w={mixins:[_["a"]],components:{SearchPanel:g["a"],tableList:y["a"],recommendComp:b},data:function(){return{isDestoryComp:!1,roomTypeList:[],searchParams:{room_category:1,room_category_id:null}}},computed:{forms:function(){return[{name:"room_category_id",type:"select",value:null,keyName:"value",optionLabel:"name",label:"房间类型",placeholder:"请输入房间类型",clearable:!0,options:this.roomTypeList}]},cfgs:function(){var e=this;return{vm:this,url:v["a"].house.RoomHotConfList,columns:[{label:"房间类型",render:function(t,r){var o=e.roomTypeList.find((function(e){return e.value===r.row.room_category_id}));return t("span",o?o.name:"无")}},{label:"首页权重",prop:"sort"},{label:"房间ID",prop:"room_number"},{label:"有效时间",minWidth:"200px",render:function(e,t){return e("div",[e("span",t.row.start_time?Object(j["h"])(t.row.start_time,"YYYY-MM-DD HH:mm:ss",!0):"无"),e("span"," 至 "),e("span",t.row.end_time?Object(j["h"])(t.row.end_time,"YYYY-MM-DD HH:mm:ss",!0):"无")])}},{label:"状态",render:function(e,t){var r=O["a"].RESOURCESACTIVESTATUS.find((function(e){return e.value===t.row.status}));return e("span",r?r.name:"无")}},{label:"操作",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},on:{click:function(){e.deleteParams(r.row.id)}}},"删除")])}}]}}},methods:{beforeSearch:function(e){var t=Object(i["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,room_category:1,room_category_id:t.room_category_id}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={room_category:1,room_category_id:null},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.recommendComp.loadParams(e,t)}),50)},deleteParams:function(e){var t=this;return Object(s["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(Object(a["a"])().mark((function r(){var o;return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["k"])({id:e});case 2:o=r.sent,2e3===o.code&&(t.$success("删除成功"),t.getList());case 4:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},destoryComp:function(){this.isDestoryComp=!1},getGenreList:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var r,o,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={belong:1},t.next=3,Object(c["zb"])(r);case 3:o=t.sent,2e3==o.code&&(n=Array.from(Array.isArray(o.data.list)?o.data.list:[]),e.roomTypeList=n.reduce((function(e,t){return e.push({name:t.name,value:t.id}),e}),[])||[]);case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.getGenreList()}},x=w,C=Object(p["a"])(x,o,n,!1,null,"0cb784f9",null);t["default"]=C.exports},f803:function(e,t,r){"use strict";r.d(t,"t",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"s",(function(){return i})),r.d(t,"m",(function(){return u})),r.d(t,"p",(function(){return c})),r.d(t,"a",(function(){return m})),r.d(t,"r",(function(){return d})),r.d(t,"j",(function(){return l})),r.d(t,"q",(function(){return f})),r.d(t,"o",(function(){return p})),r.d(t,"n",(function(){return h})),r.d(t,"h",(function(){return b})),r.d(t,"e",(function(){return g})),r.d(t,"v",(function(){return y})),r.d(t,"i",(function(){return v})),r.d(t,"d",(function(){return _})),r.d(t,"u",(function(){return O})),r.d(t,"k",(function(){return j})),r.d(t,"f",(function(){return w})),r.d(t,"w",(function(){return x})),r.d(t,"l",(function(){return C})),r.d(t,"c",(function(){return k})),r.d(t,"b",(function(){return F}));var o=r("829b"),n=r("8daa");function a(e){return Object(o["a"])({url:n["a"].house.updateParty,method:"post",data:e})}function s(e){return Object(o["a"])({url:n["a"].house.delGenre,method:"post",data:e})}function i(e){return Object(o["a"])({url:n["a"].house.saveGenre,method:"post",data:e})}function u(e){return Object(o["a"])({url:n["a"].house.genreList,method:"post",data:e})}function c(e){return Object(o["a"])({url:n["a"].house.partyRoomTypes,method:"post",data:e})}function m(e){return Object(o["a"])({url:n["a"].house.addRoomHot,method:"post",data:e})}function d(e){return Object(o["a"])({url:n["a"].house.roomHotSetting,method:"post",data:e})}function l(e){return Object(o["a"])({url:n["a"].house.deleteRoomHot,method:"post",data:e})}function f(e){return Object(o["a"])({url:n["a"].house.roomBindType,method:"post",data:e})}function p(e){return Object(o["a"])({url:n["a"].house.liveTypes,method:"post",data:e})}function h(e){return Object(o["a"])({url:n["a"].house.liveBindType,method:"post",data:e})}function b(e){return Object(o["a"])({url:n["a"].house.delLiveBind,method:"post",data:e})}function g(e){return Object(o["a"])({url:n["a"].house.createRoomHotConf,method:"post",data:e})}function y(e){return Object(o["a"])({url:n["a"].house.updateRoomHotConf,method:"post",data:e})}function v(e){return Object(o["a"])({url:n["a"].house.deleteRoomHonour,method:"post",data:e})}function _(e){return Object(o["a"])({url:n["a"].house.createRoomHonour,method:"post",data:e})}function O(e){return Object(o["a"])({url:n["a"].house.updateRoomHonour,method:"post",data:e})}function j(e){return Object(o["a"])({url:n["a"].house.deleteRoomHotConf,method:"post",data:e})}function w(e){return Object(o["a"])({url:n["a"].house.createRoomPushFlow,method:"post",data:e})}function x(e){return Object(o["a"])({url:n["a"].house.updateRoomPushFlow,method:"post",data:e})}function C(e){return Object(o["a"])({url:n["a"].house.deleteRoomPushFlow,method:"post",data:e})}function k(e){return Object(o["a"])({url:n["a"].house.changePartyRoom,method:"post",data:e})}function F(e){return Object(o["a"])({url:n["a"].house.canChangeType,method:"post",data:e})}}}]);