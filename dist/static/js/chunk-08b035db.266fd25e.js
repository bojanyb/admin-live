(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08b035db"],{"05fc":function(e,t,i){},"1a4c":function(e,t,i){"use strict";i("1b99")},"1b99":function(e,t,i){},"1fe8":function(e,t,i){e.exports=i.p+"static/img/error.e53687be.png"},2708:function(e,t,i){"use strict";var s=i("4672"),r=i("52c1"),n={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(s["a"])({},Object(r["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=n},"41a2":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"jurisdiction-box"},[i("div",{staticClass:"model"},[i("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")])],1),i("div",{staticClass:"tableList"},[i("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs,isHidePage:!0}})],1),e.isDestoryComp?i("add",{ref:"add",on:{getList:e.getList,destoryComp:e.destoryComp}}):e._e()],1)},r=[],n=i("40bd"),a=i("7e8c"),c=(i("8bda"),i("ee6e"),i("2910"),i("50fc")),o=i("4053"),u=i("2708"),d=i("8daa"),l=i("cf45"),h=(i("279a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"jurisdiction-add-box"},[i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,top:"5vh",width:"1050px","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[i("div",{staticClass:"contentBox"},[i("div",{staticClass:"formBox"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"操作员ID",prop:"sort"}},[i("el-input",{attrs:{onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),i("el-form-item",{attrs:{label:"操作员部门",prop:"department"}},[i("el-input",{model:{value:e.ruleForm.department,callback:function(t){e.$set(e.ruleForm,"department",t)},expression:"ruleForm.department"}})],1),i("el-form-item",{attrs:{label:"操作员名称",prop:"nickname"}},[i("el-input",{model:{value:e.ruleForm.nickname,callback:function(t){e.$set(e.ruleForm,"nickname",t)},expression:"ruleForm.nickname"}})],1),i("el-form-item",{attrs:{label:"成员账号",prop:"username"}},[i("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),i("el-form-item",{staticClass:"sortBox",attrs:{label:"密码",prop:"password"}},[i("el-input",{model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1)],1)],1),i("div",{staticClass:"jurisdiction"},e._l(e.jurisdictionList,(function(t,s){return i("ul",{key:s},[i("el-checkbox",{attrs:{disabled:e.disabled},on:{change:function(i){return e.changeStatus(t,s,1)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}},[e._v(e._s(t.title))]),i("span",{staticClass:"add"},[e._v("新增")]),i("li",e._l(t.child,(function(r,n){return t.child?i("div",{key:n,staticClass:"tree_two",style:{width:"100%"}},[i("el-checkbox",{attrs:{disabled:e.disabled},on:{change:function(t){return e.changeStatus(r,s,2,n)}},model:{value:r.checked,callback:function(t){e.$set(r,"checked",t)},expression:"a.checked"}},[e._v(e._s(r.title))]),i("div",{staticClass:"tree_three"},e._l(r.child,(function(t,a){return r.child?i("div",{key:a},[i("el-checkbox",{attrs:{disabled:e.disabled},on:{change:function(t){return e.changeStatus(r,s,3,n)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"x.checked"}},[e._v(e._s(t.title))])],1):e._e()})),0)],1):e._e()})),0)],1)})),0)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)])],1)}),m=[],p=(i("23dc"),i("ed70"),i("1af9"),{data:function(){return{dialogVisible:!1,status:"add",ruleForm:{admin_id:"",nickname:"",department:"",username:"",password:"",permission_ids:[],sort:null},jurisdictionList:[],rules:{department:[{required:!0,message:"请输入操作员部门",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],nickname:[{required:!0,message:"请输入操作员名称",trigger:"blur"}],username:[{required:!0,message:"请输入成员账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:{title:function(){return"add"===this.status?"新增角色":"update"===this.status?"修改角色":"查看角色"},disabled:function(){return"see"===this.status}},methods:{load:function(e,t){this.status=e;var i=function e(t,i){t.forEach((function(t){t.checked=!1,i&&-1!==i.indexOf(t.id)&&(t.checked=!0),t.child&&e(t.child,i)}))};i(t.list,t.user_pids),"add"!==e&&(t.user.password=t.user.password_word,this.$set(this.$data,"ruleForm",t.user)),this.jurisdictionList=t.list||[]},changeStatus:function(e,t,i,s){var r=this,n=function t(i){i.forEach((function(i){r.$set(i,"checked",e.checked),i.child&&i.child.length>0&&t(i.child)}))};if(1===i)e.child&&n(this.jurisdictionList[t].child);else if(2===i){n(this.jurisdictionList[t].child[s].child);var a=this.jurisdictionList[t].child.find((function(e){return e.checked}));a?this.$set(this.jurisdictionList[t],"checked",!0):this.$set(this.jurisdictionList[t],"checked",!1)}else if(3===i){var c=this.jurisdictionList[t].child[s].child.find((function(e){return e.checked}));c?(this.$set(this.jurisdictionList[t].child[s],"checked",!0),this.$set(this.jurisdictionList[t],"checked",!0)):this.$set(this.jurisdictionList[t].child[s],"checked",!1);var o=[];this.jurisdictionList[t].child.forEach((function(e){var t=e.child.find((function(e){return e.checked}));o.push(t)}));var u=o.find((function(e){return e}));u||this.$set(this.jurisdictionList[t],"checked",!1)}},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"===t.status?t.addUser():t.updateUser()}))},updateUser:function(){var e=this;return Object(a["a"])(Object(n["a"])().mark((function t(){var i,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.returnParams(),t.next=3,Object(c["e"])(i);case 3:s=t.sent,2e3===s.code&&e.$message.success("修改成功"),e.dialogVisible=!1,e.$emit("getList");case 7:case"end":return t.stop()}}),t)})))()},addUser:function(){var e=this;return Object(a["a"])(Object(n["a"])().mark((function t(){var i,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.returnParams(),t.next=3,Object(c["b"])(i);case 3:s=t.sent,2e3===s.code&&e.$message.success("新增成功"),e.dialogVisible=!1,e.$emit("getList");case 7:case"end":return t.stop()}}),t)})))()},returnParams:function(){var e=this.ruleForm,t={admin_id:e.id,department:e.department,nickname:e.nickname,username:e.username,password:e.password,sort:e.sort,permission_ids:[]},i=[],s=function e(t){t.forEach((function(t){t.checked&&i.push(t.id),t.child&&e(t.child)}))};return s(this.jurisdictionList),t.permission_ids=i,"add"===this.status&&delete t.admin_id,t},handleClose:function(){this.resetForm()},resetForm:function(){var e=this;"see"!==this.status?this.$confirm("关闭后数据不会保存，确定关闭吗？").then((function(t){e.dialogVisible=!1})).catch((function(e){})):this.dialogVisible=!1},closed:function(){this.$emit("destoryComp")}}}),f=p,b=(i("cca5"),i("e607")),v=Object(b["a"])(f,h,m,!1,null,null,null),k=v.exports,g={components:{tableList:o["a"],add:k},mixins:[u["a"]],computed:{cfgs:function(){var e=this;return{vm:this,url:d["a"].system.adminMenu,columns:[{label:"操作员ID",prop:"sort"},{label:"账号",prop:"username"},{label:"操作员名称",prop:"nickname"},{label:"操作员部门",prop:"department",render:function(e,t){return e("span",t.row.department||"无")}},{label:"最后登录时间",render:function(e,t){return e("span",t.row.last_login_time?Object(l["h"])(t.row.last_login_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"状态",prop:"status",isSwitch:!0,isTrueValue:1,isFalseValue:2,disabledStatus:!0,disabledIndex:0,change:function(t,i){e.adminStatusFunc(i.id,t)},render:function(e,t){return e("span","")}},{label:"操作",width:"300px",render:function(t,i){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(i.row)}}},"编辑"),t("el-button",{props:{type:"primary"},on:{click:function(){e.see(i.row)}}},"详情"),t("el-button",{props:{type:"danger"},style:{display:"admin"===i.row.username?"none":"unset"},on:{click:function(){e.deleteData(i.row)}}},"删除")])}}]}}},data:function(){return{isDestoryComp:!1}},methods:{getList:function(){this.$refs.tableList.getData()},beforeSearch:function(e){return{page:e.page}},reset:function(){this.searchParams={},this.dateTimeParams={activity_type_id:1},this.getList()},onSearch:function(){this.getList()},adminStatusFunc:function(e,t){var i=this;return Object(a["a"])(Object(n["a"])().mark((function s(){return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(c["c"])({admin_id:e,status:t});case 2:i.getList();case 3:case"end":return s.stop()}}),s)})))()},deleteData:function(e){var t=this;return Object(a["a"])(Object(n["a"])().mark((function i(){var s;return Object(n["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(c["d"])({admin_id:e.id});case 2:s=i.sent,2e3===s.code&&t.$message.success("删除成功"),t.getList();case 5:case"end":return i.stop()}}),i)})))()},add:function(){this.load("add",1)},update:function(e){this.load("update",e.id)},see:function(e){this.load("see",e.id)},load:function(e,t){var i=this;return Object(a["a"])(Object(n["a"])().mark((function s(){var r,a;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("add"!==e){s.next=6;break}return s.next=3,Object(c["h"])();case 3:r=s.sent,s.next=9;break;case 6:return s.next=8,Object(c["f"])({admin_id:t});case 8:r=s.sent;case 9:a=function e(t,i){t.forEach((function(s,r){s.status||(0===s.pid?(t.splice(r,1),e(t)):i&&(i.child.splice(r,1),e(t,i))),s.child&&s.child.length>0&&e(s.child,s)}))},a(r.data.list),i.isDestoryComp=!0,setTimeout((function(){i.$refs.add.dialogVisible=!0,i.$refs.add.load(e,r.data)}),100);case 13:case"end":return s.stop()}}),s)})))()},destoryComp:function(){this.isDestoryComp=!1}}},w=g,j=(i("1a4c"),Object(b["a"])(w,s,r,!1,null,null,null));t["default"]=j.exports},cca5:function(e,t,i){"use strict";i("05fc")}}]);