(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42ba3631"],{"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},2056:function(e,t,r){"use strict";r("ca05")},2708:function(e,t,r){"use strict";var a=r("4672"),i=r("52c1"),l={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(a["a"])({},Object(i["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=l},"282e":function(e,t,r){},3014:function(e,t,r){"use strict";r("282e")},"4201d":function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return s}));var a=r("829b"),i=r("8daa");function l(e){return Object(a["a"])({url:i["a"].nobility.save,method:"post",data:e})}function o(e){return Object(a["a"])({url:i["a"].nobility.detail,method:"post",data:e})}function n(e){return Object(a["a"])({url:i["a"].nobility.priceSave,method:"post",data:e})}function s(e){return Object(a["a"])({url:i["a"].nobility.nobilitylist,method:"post",data:e})}},c3d9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"nobility-privilege-box"},[r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("privilegeAdd",{ref:"privilegeAdd",on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},i=[],l=r("4053"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"nobility-privilegeAdd-box"},[r("drawer",{ref:"drawer",attrs:{size:"470px",title:e.title,isShowUpdate:!0,disabled:e.disabled},on:{cancel:e.cancel,submitForm:e.submitForm,closed:e.closed,update:e.update}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{slot:"body",model:e.ruleForm,rules:e.rules,"label-width":"85px","label-suffix":":","hide-required-asterisk":"see"===e.status},slot:"body"},[r("el-form-item",{attrs:{label:"贵族名称",prop:"noble_name"}},[r("el-input",{attrs:{disabled:e.disabled,placeholder:"请输入贵族名称"},model:{value:e.ruleForm.noble_name,callback:function(t){e.$set(e.ruleForm,"noble_name",t)},expression:"ruleForm.noble_name"}})],1),r("el-form-item",{attrs:{label:"拥有特权",prop:"privilege_ids"}},[r("el-select",{attrs:{disabled:e.disabled,multiple:"",placeholder:"请选择特权"},model:{value:e.ruleForm.privilege_ids,callback:function(t){e.$set(e.ruleForm,"privilege_ids",t)},expression:"ruleForm.privilege_ids"}},e._l(e.privilegeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"growth_value"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v("成 长 值")]),r("el-input",{attrs:{disabled:e.disabled,onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",placeholder:"请输入成长值"},model:{value:e.ruleForm.growth_value,callback:function(t){e.$set(e.ruleForm,"growth_value",t)},expression:"ruleForm.growth_value"}})],1),r("el-form-item",{attrs:{prop:"hold_value"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v("保 级 值")]),r("el-input",{attrs:{disabled:e.disabled,onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",placeholder:"请输入保级值"},model:{value:e.ruleForm.hold_value,callback:function(t){e.$set(e.ruleForm,"hold_value",t)},expression:"ruleForm.hold_value"}})],1),r("el-form-item",{attrs:{label:"保级天数",prop:"hold_day"}},[r("el-input",{attrs:{disabled:e.disabled,onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",placeholder:"请输入保级天数"},model:{value:e.ruleForm.hold_day,callback:function(t){e.$set(e.ruleForm,"hold_day",t)},expression:"ruleForm.hold_day"}})],1),r("el-form-item",{staticClass:"dampingBox",attrs:{label:"未保级衰减值",prop:"reduce_value"}},[r("el-input",{attrs:{disabled:e.disabled,onkeydown:"this.value=this.value.replace(/^0+/,'');",oninput:"this.value=this.value.replace(/[^\\d]/g,'');",placeholder:"请输入未保级衰减值"},model:{value:e.ruleForm.reduce_value,callback:function(t){e.$set(e.ruleForm,"reduce_value",t)},expression:"ruleForm.reduce_value"}})],1)],1)],1)],1)},n=[],s=r("40bd"),u=r("7e8c"),d=(r("9dcb"),r("6166"),r("65c4"),r("8bda"),r("0472")),c=r("4201d"),p=r("279a"),m={components:{drawer:d["a"]},data:function(){return{privilegeList:p["a"].NOBILITYPRIVILEGELIST,status:"add",oldParams:{},ruleForm:{noble_name:"",growth_value:"",hold_value:"",hold_day:"",reduce_value:"",privilege_ids:[]},rules:{noble_name:[{required:!0,message:"请输入贵族名称",trigger:"blur"}],privilege_ids:[{required:!0,message:"请选择特权",trigger:"change"}],growth_value:[{required:!0,message:"请输入成长值",trigger:"blur"}],hold_value:[{required:!0,message:"请输入保级值",trigger:"blur"}],hold_day:[{required:!0,message:"请输入保级天数",trigger:"blur"}],reduce_value:[{required:!0,message:"请输入未保级衰减值",trigger:"blur"}]}}},computed:{title:function(){return"add"===this.status?"新增贵族":"update"===this.status?"修改贵族":"查看贵族"},disabled:function(){return"see"===this.status}},methods:{loadParams:function(e,t){var r=this;return Object(u["a"])(Object(s["a"])().mark((function a(){var i,l;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.openComp(),r.status=e,"add"===e){a.next=10;break}return a.next=5,Object(c["a"])({id:t.id});case 5:i=a.sent,l=i.data,l.privilege_ids=l.privilege_ids.split(",").map((function(e){return Number(e)})),r.toNumber(l),r.$set(r.$data,"ruleForm",l);case 10:r.oldParams=JSON.parse(JSON.stringify(r.ruleForm));case 11:case"end":return a.stop()}}),a)})))()},openComp:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.drawer.loadParams(e)},cancel:function(){var e=this;JSON.stringify(this.oldParams)!==JSON.stringify(this.ruleForm)?this.$confirm("关闭弹窗将不会保留您的更改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.openComp(!1)})).catch((function(){})):this.openComp(!1)},toNumber:function(e){var t=["growth_value","hold_value","reduce_value"];t.forEach((function(t){e[t]=Number(e[t])}))},update:function(){this.status="update"},submitForm:function(e){var t=this;return Object(u["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(u["a"])(Object(s["a"])().mark((function e(r){var a,i,l;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}return a=t.ruleForm,i={id:a.id,noble_name:a.noble_name,growth_value:a.growth_value,hold_value:a.hold_value,reduce_value:a.reduce_value,hold_day:a.hold_day,privilege_ids:a.privilege_ids},t.toNumber(i),e.next=6,Object(c["d"])(i);case 6:l=e.sent,2e3===l.code&&t.$success("修改成功"),t.openComp(!1),t.$emit("getList"),e.next=14;break;case 12:return console.log("error submit!!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},closed:function(){this.$emit("destoryComp")}}},b=m,h=(r("3014"),r("e607")),v=Object(h["a"])(b,o,n,!1,null,null,null),f=v.exports,g=r("8daa"),_=r("2708"),y={mixins:[_["a"]],components:{tableList:l["a"],privilegeAdd:f},data:function(){return{isDestoryComp:!1}},computed:{cfgs:function(){var e=this;return{vm:this,url:g["a"].nobility.nobilitylist,columns:[{label:"贵族",prop:"noble_name"},{label:"拥有特权",prop:"privilege_titles",width:"550px"},{label:"成长值（喵粮）",prop:"growth_value",minWidth:"120px"},{label:"保级值（喵粮）",prop:"hold_value",minWidth:"120px"},{label:"保级天数（天）",prop:"hold_day",minWidth:"120px"},{label:"未保级衰减值（喵粮）",prop:"reduce_value",minWidth:"180px"},{label:"修改时间",minWidth:"180px",render:function(e,t){return e("span",t.row.update_time||"无")}},{label:"操作",minWidth:"150px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"修改")])}}]}}},methods:{beforeSearch:function(e){return{page:e.page,pagesize:e.size}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.privilegeAdd.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1}}},w=y,x=(r("2056"),Object(h["a"])(w,a,i,!1,null,null,null));t["default"]=x.exports},ca05:function(e,t,r){}}]);