(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a01eece4"],{"0b58":function(e,t,r){},"0c56":function(e,t,r){},"127f":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r("40bd"),n=r("7e8c"),s=(r("48d4"),r("8bda"),r("897d")),i=r.n(s),o=r("4109"),u={ossParams:{region:"oss-cn-shenzhen",success_action_status:"200",accessKeyId:"LTAI5tFTcRH7h3RXKoYmnWMk",accessKeySecret:"qdx4B8jIh2VjBgBDG5fNfG0Oj21GSP",bucket:"live-huidapay-net"}};function c(e){var t=e.name.split("."),r=i()(Date.now()+t[0]);return r=r+"."+t[t.length-1],r}function l(e){return new Promise(function(){var t=Object(n["a"])(Object(a["a"])().mark((function t(r,n){var s,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=c(e),i=new o({region:u.ossParams.region,accessKeyId:u.ossParams.accessKeyId,accessKeySecret:u.ossParams.accessKeySecret,bucket:u.ossParams.bucket}),t.next=4,i.multipartUpload(s,e);case 4:t.sent,r({url:"https://photo.aiyi.live/"+s});case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}},"1c2c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guild-list-box"},[r("menuComp",{ref:"menuComp",attrs:{menuList:e.menuList},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}}),r(e.comp,{tag:"component"})],1)},n=[],s=r("3923"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("editComp",{ref:"editComp",attrs:{type:2},on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},o=[],u=r("40bd"),c=r("7e8c"),l=r("4672"),p=(r("23dc"),r("8bda"),r("65e5"),r("45c1"),r("48d4"),r("afb1"),r("15f2"),r("9d95"),r("ed70"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"blocked-box"},[r("el-dialog",{attrs:{title:"冻结",visible:e.dialogVisible,width:"500px","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"冻结时间",prop:"ban_duration"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.ban_duration,callback:function(t){e.$set(e.ruleForm,"ban_duration",t)},expression:"ruleForm.ban_duration"}},e._l(e.timerList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"冻结说明",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"正常状态可不填",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)}),d=[],m=r("279a"),f={data:function(){return{dialogVisible:!1,timerList:m["a"].DURATION,ruleForm:{ban_duration:null,remark:""},rules:{ban_duration:[{required:!0,message:"请选择冻结时间",trigger:"change"}],remark:[{required:!0,message:"请填写冻结说明",trigger:"blur"}]}}},methods:{loadParams:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},submitForm:function(e){var t=this;return Object(c["a"])(Object(u["a"])().mark((function r(){return Object(u["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(c["a"])(Object(u["a"])().mark((function e(r){return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}t.dialogVisible=!1,t.$emit("evaluationFunc",t.ruleForm),e.next=7;break;case 5:return console.log("error submit!!"),e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},cancel:function(){this.dialogVisible=!1},resetForm:function(e){this.$refs[e].resetFields()}}},b=f,h=(r("316f"),r("e607")),y=Object(h["a"])(b,p,d,!1,null,"5e01749e",null),w=y.exports,g=r("1a72"),v=r("04a2"),_=r("4053"),L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guild-editComp-box"},[r("el-dialog",{attrs:{title:e.title,width:"600px",visible:e.isEditComp},on:{closed:e.closed,"update:visible":function(t){e.isEditComp=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"90px","label-suffix":":","hide-required-asterisk":"see"===e.status}},[r("el-form-item",{attrs:{label:"公会名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入公会名字"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"公会长ID",prop:"guild_number"}},[r("el-input",{attrs:{placeholder:"请输入公会长ID",disabled:"update"===e.status},model:{value:e.ruleForm.guild_number,callback:function(t){e.$set(e.ruleForm,"guild_number",t)},expression:"ruleForm.guild_number"}})],1),e.type+""==="2"?["add"===e.status||e.permissionArr.includes("Guild@updatePartyReplace")?r("el-form-item",{attrs:{label:"公司主体",prop:"company"}},[r("el-input",{attrs:{placeholder:"请输入公司主体"},model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}})],1):e._e()]:e._e(),e.type+""==="1"?["add"===e.status||e.permissionArr.includes("Guild@updateLiveReplace")?r("el-form-item",{attrs:{label:"公司主体",prop:"company"}},[r("el-input",{attrs:{placeholder:"请输入公司主体"},model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}})],1):e._e()]:e._e(),e.isAuth&&"update"===e.status?r("el-form-item",{attrs:{label:"公会运营",prop:"operator"}},[r("el-select",{attrs:{placeholder:"请选择公会运营"},model:{value:e.ruleForm.operator,callback:function(t){e.$set(e.ruleForm,"operator",t)},expression:"ruleForm.operator"}},e._l(e.operatorList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:"对公转账",prop:"cash_type"}},[r("el-select",{attrs:{placeholder:"请选择对公转账",disabled:e.isFormDisabled},model:{value:e.ruleForm.cash_type,callback:function(t){e.$set(e.ruleForm,"cash_type",t)},expression:"ruleForm.cash_type"}},[r("el-option",{attrs:{label:"否",value:0}}),r("el-option",{attrs:{label:"是",value:1}})],1)],1),1===e.ruleForm.cash_type?r("el-form-item",{attrs:{label:"发票税率",prop:"cash_invoice_rate"}},[r("el-select",{attrs:{placeholder:"请选择发票税率"},model:{value:e.ruleForm.cash_invoice_rate,callback:function(t){e.$set(e.ruleForm,"cash_invoice_rate",t)},expression:"ruleForm.cash_invoice_rate"}},[r("el-option",{attrs:{label:"3%",value:3}}),r("el-option",{attrs:{label:"6%",value:6}})],1)],1):e._e(),1===e.ruleForm.cash_type?r("el-form-item",{attrs:{label:"手续费率"}},[r("span",[e._v(e._s(3===e.ruleForm.cash_invoice_rate?"3.2%":"0%"))])]):e._e()],2),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},O=[],x=(r("6166"),r("65c4"),r("2708")),k={mixins:[x["a"]],data:function(){return{status:"add",isEditComp:!1,rankList:m["a"].CLASSLIST,guildTypeList:[],ruleForm:{id:null,name:"",guild_number:"",company:"",guild_type:this.type,operator:null,cash_type:0,cash_invoice_rate:3},oldParams:{},rules:{name:[{required:!0,message:"请输入公会昵称",trigger:"blur"}],guild_number:[{required:!0,message:"请输入公会长ID",trigger:"blur"}],rank:[{required:!0,message:"请选择公会等级",trigger:"change"}],operator:[{required:!0,message:"请选择公会运营",trigger:"change"}],remark:[{required:!1,message:"请输入公会简介",trigger:"blur"}],cash_type:[{required:!0,message:"请选择对公转账",trigger:"change"}],cash_invoice_rate:[{required:!0,message:"请选择发票税率",trigger:"change"}]},operatorList:[],isAuth:0,isFormDisabled:!1}},props:{type:{type:Number,default:2}},computed:{title:function(){var e=1==this.type?"直播":"派对";return"add"===this.status?"新增"+e+"公会":"update"===this.status?"修改"+e+"公会":void 0},disabled:function(){return"see"===this.status}},created:function(){this.getTypeList(),this.getAdminUserList()},methods:{loadParams:function(e,t){if(this.openComp(),this.status=e,"add"!==e){var r=JSON.parse(JSON.stringify(t)),a={};a.guild_type=r.guild_type?r.guild_type:"",a.operator=r.operator?r.operator:"",a.id=r.id?r.id:"",a.name=r.name?r.name:"",a.guild_number=r.guild_number?r.guild_number:"",a.company=r.company?r.company:"",a.status=r.status,a.cash_type=r.cash_type,1===a.cash_type&&(a.cash_invoice_rate="3%"===r.cash_invoice_rate?3:6,a.cash_fee_rate=r.cash_fee_rate,this.isFormDisabled=!0),this.$set(this.$data,"ruleForm",a)}else this.isFormDisabled=!1;this.oldParams=JSON.parse(JSON.stringify(this.ruleForm))},openComp:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isEditComp=e},cancel:function(){var e=this;JSON.stringify(this.oldParams)!==JSON.stringify(this.ruleForm)?this.$confirm("关闭弹窗将不会保留您的更改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.openComp(!1)})).catch((function(){})):this.openComp(!1)},update:function(){this.status="update"},submitForm:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.ruleForm.validate(function(){var t=Object(c["a"])(Object(u["a"])().mark((function t(r){var a,n,s;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=25;break}if(a=Object(l["a"])({},e.ruleForm),1===+a.cash_type&&(a.cash_fee_rate=3===a.cash_invoice_rate?"3.2%":"0%"),"add"!==e.status){t.next=10;break}return t.next=6,Object(g["R"])(a);case 6:n=t.sent,2e3===n.code&&e.$success("新增成功"),t.next=21;break;case 10:if(1!==a.guild_type){t.next=16;break}return t.next=13,Object(g["fc"])(a);case 13:s=t.sent,t.next=20;break;case 16:if(2!==a.guild_type){t.next=20;break}return t.next=19,Object(g["jc"])(a);case 19:s=t.sent;case 20:2e3===s.code&&e.$success("修改成功");case 21:e.openComp(!1),e.$emit("getList"),t.next=27;break;case 25:return console.log("error submit!!"),t.abrupt("return",!1);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.openComp(!1)},validateField:function(e){this.$refs.ruleForm.validateField([e])},closed:function(){this.$emit("destoryComp")},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getAdminUserList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["g"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.operatorList=a.reduce((function(e,t){return e.push({name:t.username,value:t.id}),e}),[])||[],e.isAuth=r.data.is_auth);case 4:case"end":return t.stop()}}),t)})))()}}},j=k,F=(r("65d5"),Object(h["a"])(j,L,O,!1,null,"41129126",null)),C=F.exports,A=r("8daa"),P=r("cf45"),D={name:"guild-list",mixins:[x["a"]],components:{SearchPanel:v["a"],tableList:_["a"],editComp:C,blocked:w},data:function(){return{isDestoryComp:!1,guildParams:{},status:null,ruleForm:{},guildTypeList:[],operatorList:[],isAuth:0}},computed:{forms:function(){var e=[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会状态",placeholder:"请选择",options:m["a"].GUILDSTATUS},{name:"operator",type:"select",value:"",keyName:"id",optionLabel:"username",label:"公会运营",placeholder:"请选择",options:this.operatorList}],t=[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会状态",placeholder:"请选择",options:m["a"].GUILDSTATUS}];return this.isAuth?e:t},cfgs:function(){var e=this,t=[{label:"创建时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"公会ID",prop:"guild_number"},{label:"公会名称",prop:"name"},{label:"公会长",prop:"guild_user_nickname"},{label:"公会运营",render:function(t,r){var a=e.operatorList.find((function(e){return e.id===r.row.operator}));return t("span",a?a.username:"未知")}},{label:"公司主体",prop:"company",render:function(e,t){return e("span",t.row.company?t.row.company:"--")}},{label:"主播人数",prop:"user_count",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.user_count+"人")])}},{label:"今日流水",prop:"today_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.today_flow+"钻石")])}},{label:"昨日流水",prop:"yestoday_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",(t.row.yestoday_flow?t.row.yestoday_flow:0)+"钻石")])}},{label:"本周流水",prop:"week_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.week_flow+"钻石")])}},{label:"本月流水",prop:"month_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.month_flow+"钻石")])}},{label:"公会状态",render:function(e,t){return e("div",[e("span",{style:{display:1==t.row.status?"unset":"none",color:1==t.row.status?"#67C23A":""}},1==t.row.status?"正常":""),e("span",{style:{display:2==t.row.status?"unset":"none",color:2==t.row.status?"#E6A23C":""}},1==t.row.status?"":"已冻结"),e("span",{style:{display:3==t.row.status?"unset":"none",color:3==t.row.status?"#F56C6C":""}},1==t.row.status?"":"已解散")])}},{label:"对公转账",prop:"cash_type",render:function(e,t){return e("div",[e("span",1===+t.row.cash_type?"是":"否")])}},{label:"手续费率",prop:"bbb",render:function(e,t){return e("div",[e("span",t.row.cash_fee_rate||"--")])}},{label:"操作",minWidth:"320px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyReplace")?"unset":"none"},on:{click:function(){e.change(r.row)}}},"更换会长"),t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyInfo")?"unset":"none"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(2,r.row)}}},"冻结"),t("el-button",{props:{type:"success"},style:{display:2===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(1,r.row)}}},"解冻"),t("el-button",{props:{type:"danger"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyDisband")?"unset":"none"},on:{click:function(){e.deleteParams(r.row)}}},"解散"),t("el-button",{props:{type:"danger"},style:{display:3==r.row.status?"unset":"none"}},"已解散")])}}],r=[{label:"创建时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"公会ID",prop:"guild_number"},{label:"公会名称",prop:"name"},{label:"公会长",prop:"guild_user_nickname"},{label:"公会运营",render:function(t,r){var a=e.operatorList.find((function(e){return e.id===r.row.operator}));return t("span",a?a.username:"未知")}},{label:"主播人数",prop:"user_count",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.user_count+"人")])}},{label:"今日流水",prop:"today_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.today_flow+"钻石")])}},{label:"昨日流水",prop:"yestoday_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",(t.row.yestoday_flow?t.row.yestoday_flow:0)+"钻石")])}},{label:"本周流水",prop:"week_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.week_flow+"钻石")])}},{label:"本月流水",prop:"month_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.month_flow+"钻石")])}},{label:"公会状态",render:function(e,t){return e("div",[e("span",{style:{display:1==t.row.status?"unset":"none",color:1==t.row.status?"#67C23A":""}},1==t.row.status?"正常":""),e("span",{style:{display:2==t.row.status?"unset":"none",color:2==t.row.status?"#E6A23C":""}},1==t.row.status?"":"已冻结"),e("span",{style:{display:3==t.row.status?"unset":"none",color:3==t.row.status?"#F56C6C":""}},1==t.row.status?"":"已解散")])}},{label:"操作",minWidth:"320px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyReplace")?"unset":"none"},on:{click:function(){e.change(r.row)}}},"更换会长"),t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyInfo")?"unset":"none"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(2,r.row)}}},"冻结"),t("el-button",{props:{type:"success"},style:{display:2===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(1,r.row)}}},"解冻"),t("el-button",{props:{type:"danger"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyDisband")?"unset":"none"},on:{click:function(){e.deleteParams(r.row)}}},"解散"),t("el-button",{props:{type:"danger"},style:{display:3==r.row.status?"unset":"none"}},"已解散")])}}];return{vm:this,url:A["a"].guild.list,columns:this.permissionArr.includes("Guild@updatePartyReplace")?t:r}}},created:function(){this.getTypeList(),this.getAdminUserList()},methods:{beforeSearch:function(e){var t=Object(l["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,user_number:t.user_number,guild_number:t.guild_number,status:t.status,operator:t.operator,guild_type:2}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.dateTimeParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.editComp.loadParams(e,t)}),50)},change:function(e){var t=this;this.$prompt("会长ID","更换会长",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"会长ID格式不正确"}).then((function(r){var a=r.value,n={id:e.id,guild_number:a,name:e.name,guild_type:e.guild_type,status:e.status,rebate:e.rebate};t.methodUpdatePartyReplace(n,"更换会长")})).catch((function(){}))},deleteParams:function(e){var t=this;return Object(c["a"])(Object(u["a"])().mark((function r(){var a;return Object(u["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:a="确认解散 [ "+e.name+" ] 吗？",t.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={id:e.id,guild_number:e.guild_number,name:e.name,guild_type:e.guild_type,status:3,rebate:e.rebate};t.methodUpdatePartyDisband(r,"解散公会")})).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 2:case"end":return r.stop()}}),r)})))()},destoryComp:function(){this.isDestoryComp=!1},freezeFunc:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n,s;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.status=e,r.ruleForm=t,2===e?(n="确认冻结 [ "+t.name+" ] 吗？",r.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={id:t.id,guild_number:t.guild_number,name:t.name,guild_type:t.guild_type,status:e,rebate:t.rebate};r.methodUpdatePartyFreeze(a,"冻结公会")})).catch((function(){}))):(s={id:t.id,guild_number:t.guild_number,name:t.name,guild_type:t.guild_type,status:e,rebate:t.rebate},r.methodUpdatePartyFreeze(s,"解冻公会"));case 3:case"end":return a.stop()}}),a)})))()},methodUpdatePartyFreeze:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["ic"])(e);case 2:n=a.sent,2e3===n.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return a.stop()}}),a)})))()},methodUpdatePartyReplace:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["kc"])(e);case 2:n=a.sent,2e3===n.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return a.stop()}}),a)})))()},methodUpdatePartyDisband:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["hc"])(e);case 2:n=a.sent,2e3===n.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return a.stop()}}),a)})))()},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getAdminUserList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["g"])();case 2:r=t.sent,2e3===r.code&&(e.operatorList=r.data.list,e.isAuth=r.data.is_auth,a={username:"全部",id:""},e.operatorList.unshift(a));case 4:case"end":return t.stop()}}),t)})))()}}},T=D,$=Object(h["a"])(T,i,o,!1,null,"0f3e8d98",null),S=$.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("editComp",{ref:"editComp",attrs:{type:1},on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},U=[],G={name:"guild-list",mixins:[x["a"]],components:{SearchPanel:v["a"],tableList:_["a"],editComp:C},data:function(){return{isDestoryComp:!1,guildParams:{},status:null,ruleForm:{},guildTypeList:[],operatorList:[],isAuth:0}},computed:{forms:function(){var e=[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会状态",placeholder:"请选择",options:m["a"].GUILDSTATUS},{name:"operator",type:"select",value:"",keyName:"id",optionLabel:"username",label:"公会运营",placeholder:"请选择",options:this.operatorList}],t=[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会状态",placeholder:"请选择",options:m["a"].GUILDSTATUS}];return this.isAuth?e:t},cfgs:function(){var e=this,t=[{label:"创建时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"公会ID",prop:"guild_number"},{label:"公会名称",prop:"name"},{label:"公会长",prop:"guild_user_nickname"},{label:"公会运营",render:function(t,r){var a=e.operatorList.find((function(e){return e.id===r.row.operator}));return t("span",a?a.username:"未知")}},{label:"公司主体",prop:"company",render:function(e,t){return e("span",t.row.company?t.row.company:"--")}},{label:"主播人数",prop:"user_count",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.user_count+"人")])}},{label:"今日流水",prop:"today_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.today_flow+"钻石")])}},{label:"昨日流水",prop:"yestoday_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",(t.row.yestoday_flow?t.row.yestoday_flow:0)+"钻石")])}},{label:"本周流水",prop:"week_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.week_flow+"钻石")])}},{label:"本月流水",prop:"month_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.month_flow+"钻石")])}},{label:"公会状态",render:function(e,t){return e("div",[e("span",{style:{display:1==t.row.status?"unset":"none",color:1==t.row.status?"#67C23A":""}},1==t.row.status?"正常":""),e("span",{style:{display:2==t.row.status?"unset":"none",color:2==t.row.status?"#E6A23C":""}},1==t.row.status?"":"已冻结"),e("span",{style:{display:3==t.row.status?"unset":"none",color:3==t.row.status?"#F56C6C":""}},1==t.row.status?"":"已解散")])}},{label:"对公转账",prop:"cash_type",render:function(e,t){return e("div",[e("span",1===+t.row.cash_type?"是":"否")])}},{label:"手续费率",prop:"bbb",render:function(e,t){return e("div",[e("span",t.row.cash_fee_rate||"--")])}},{label:"操作",minWidth:"320px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveReplace")?"unset":"none"},on:{click:function(){e.change(r.row)}}},"更换会长"),t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveInfo")?"unset":"none"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(2,r.row)}}},"冻结"),t("el-button",{props:{type:"success"},style:{display:2===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(1,r.row)}}},"解冻"),t("el-button",{props:{type:"danger"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveDisband")?"unset":"none"},on:{click:function(){e.deleteParams(r.row)}}},"解散"),t("el-button",{props:{type:"danger"},style:{display:3==r.row.status?"unset":"none"}},"已解散")])}}],r=[{label:"创建时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"公会ID",prop:"guild_number"},{label:"公会名称",prop:"name"},{label:"公会长",prop:"guild_user_nickname"},{label:"公会运营",render:function(t,r){var a=e.operatorList.find((function(e){return e.id===r.row.operator}));return t("span",a?a.username:"未知")}},{label:"主播人数",prop:"user_count",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.user_count+"人")])}},{label:"今日流水",prop:"today_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.today_flow+"钻石")])}},{label:"昨日流水",prop:"yestoday_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",(t.row.yestoday_flow?t.row.yestoday_flow:0)+"钻石")])}},{label:"本周流水",prop:"week_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.week_flow+"钻石")])}},{label:"本月流水",prop:"month_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.month_flow+"钻石")])}},{label:"公会状态",render:function(e,t){return e("div",[e("span",{style:{display:1==t.row.status?"unset":"none",color:1==t.row.status?"#67C23A":""}},1==t.row.status?"正常":""),e("span",{style:{display:2==t.row.status?"unset":"none",color:2==t.row.status?"#E6A23C":""}},1==t.row.status?"":"已冻结"),e("span",{style:{display:3==t.row.status?"unset":"none",color:3==t.row.status?"#F56C6C":""}},1==t.row.status?"":"已解散")])}},{label:"操作",minWidth:"320px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveReplace")?"unset":"none"},on:{click:function(){e.change(r.row)}}},"更换会长"),t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveInfo")?"unset":"none"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(2,r.row)}}},"冻结"),t("el-button",{props:{type:"success"},style:{display:2===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(1,r.row)}}},"解冻"),t("el-button",{props:{type:"danger"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveDisband")?"unset":"none"},on:{click:function(){e.deleteParams(r.row)}}},"解散"),t("el-button",{props:{type:"danger"},style:{display:3==r.row.status?"unset":"none"}},"已解散")])}}];return{vm:this,url:A["a"].guild.list,columns:this.permissionArr.includes("Guild@updateLiveReplace")?t:r}}},created:function(){this.getTypeList(),this.getAdminUserList()},methods:{beforeSearch:function(e){var t=Object(l["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,user_number:t.user_number,guild_number:t.guild_number,status:t.status,operator:t.operator,guild_type:1}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.dateTimeParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.editComp.loadParams(e,t)}),50)},change:function(e){var t=this;this.$prompt("会长ID","更换会长",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"会长ID格式不正确"}).then((function(r){var a=r.value,n={id:e.id,guild_number:a,name:e.name,guild_type:e.guild_type,status:e.status,rebate:e.rebate};t.methodUpdateLiveReplace(n,"更换会长")})).catch((function(){}))},deleteParams:function(e){var t=this;return Object(c["a"])(Object(u["a"])().mark((function r(){var a;return Object(u["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:a="确认解散 [ "+e.name+" ] 吗？",t.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={id:e.id,guild_number:e.guild_number,name:e.name,guild_type:e.guild_type,status:3,rebate:e.rebate};t.methodUpdateLiveDisband(r,"解散公会")})).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 2:case"end":return r.stop()}}),r)})))()},destoryComp:function(){this.isDestoryComp=!1},freezeFunc:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n,s;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.status=e,r.ruleForm=t,2===e?(n="确认冻结 [ "+t.name+" ] 吗？",r.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={id:t.id,guild_number:t.guild_number,name:t.name,guild_type:t.guild_type,status:e,rebate:t.rebate};r.methodUpdateLiveFreeze(a,"冻结公会")})).catch((function(){}))):(s={id:t.id,guild_number:t.guild_number,name:t.name,guild_type:t.guild_type,status:e,rebate:t.rebate},r.methodUpdateLiveFreeze(s,"解冻公会"));case 3:case"end":return a.stop()}}),a)})))()},methodUpdateLiveFreeze:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["ec"])(e);case 2:n=a.sent,2e3===n.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return a.stop()}}),a)})))()},methodUpdateLiveReplace:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["gc"])(e);case 2:n=a.sent,2e3===n.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return a.stop()}}),a)})))()},methodUpdateLiveDisband:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["dc"])(e);case 2:n=a.sent,2e3===n.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return a.stop()}}),a)})))()},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getAdminUserList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["g"])();case 2:r=t.sent,2e3===r.code&&(e.operatorList=r.data.list,e.isAuth=r.data.is_auth,a={username:"全部",id:""},e.operatorList.unshift(a));case 4:case"end":return t.stop()}}),t)})))()}}},z=G,N=Object(h["a"])(z,I,U,!1,null,"0c55d024",null),R=N.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guild-apply-list-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0},on:{onReset:e.reset,onSearch:e.onSearch},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}})],1)},E=[],M={data:function(){return{guildTypeList:[]}},components:{tableList:_["a"],SearchPanel:v["a"]},mixins:[x["a"]],computed:{forms:function(){var e=this;return[{name:"user_number",type:"input",value:"",label:"用户ID",isNum:!0,placeholder:"请输入用户ID"},{name:"guild_type",type:"select",value:"",keyName:"value",optionLabel:"name",label:"申请公会类型",placeholder:"请选择",options:this.guildTypeList},{name:"dateTimeParams",type:"datePicker",dateType:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",label:"时间选择",value:"",handler:{change:function(t){e.emptyDateTime(),e.setDateTime(t)},selectChange:function(t,r){e.emptyDateTime()}}}]},cfgs:function(){return{vm:this,url:A["a"].guild.newGuildApplyList,columns:[{label:"申请时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"用户ID",showOverFlow:!0,render:function(e,t){return e("span",t.row.user_number||"无")}},{label:"用户昵称",showOverFlow:!0,render:function(e,t){return e("span",t.row.guild_name||"无")}},{label:"申请公会类型",showOverFlow:!0,render:function(e,t){return e("span",t.row.guild_type_name||"无")}},{label:"主播数量",showOverFlow:!0,render:function(e,t){return e("span",t.row.question.question1||"无")}},{label:"曾经的合作平台",showOverFlow:!0,render:function(e,t){return e("span",t.row.question.question2||"无")}},{label:"联系方式",showOverFlow:!0,render:function(e,t){return e("span",t.row.contact_way||"无")}}]}}},created:function(){this.getTypeList()},methods:{getList:function(){this.$refs.tableList.getData()},beforeSearch:function(e){var t=Object(l["a"])(Object(l["a"])({},this.searchParams),this.dateTimeParams);return{page:e.page,pagesize:e.size,user_number:t.user_number,guild_type:t.guild_type,start_time:t.start_time?Math.floor(t.start_time/1e3):"",end_time:t.end_time?Math.floor(t.end_time/1e3):""}},setDateTime:function(e){var t=e?{start_time:e[0],end_time:e[1]}:{};this.$set(this,"dateTimeParams",t)},emptyDateTime:function(){this.dateTimeParams={}},reset:function(){this.searchParams={},this.dateTimeParams={},this.getList()},onSearch:function(){this.getList()},clickFunc:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function a(){var n;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(2!==t){a.next=7;break}return a.next=3,Object(g["Gb"])({id:e,status:t});case 3:n=a.sent,2e3===n.code&&(r.$message.success("审核通过"),r.getList()),a.next=8;break;case 7:r.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(Object(u["a"])().mark((function a(){var n;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["Gb"])({id:e,status:t});case 2:n=a.sent,2e3===n.code&&(r.$message.success("驳回成功"),r.getList());case 4:case"end":return a.stop()}}),a)})))).catch((function(){}));case 8:case"end":return a.stop()}}),a)})))()},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,a,n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["T"])();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[],n={name:"全部",value:""},e.guildTypeList.unshift(n));case 4:case"end":return t.stop()}}),t)})))()}}},Y=M,q=(r("292e"),Object(h["a"])(Y,B,E,!1,null,null,null)),J=q.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("editQrCodeComp",{ref:"editQrCodeComp",attrs:{type:1},on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},V=[],K=(r("5250"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"qrCodeEdit-box"},[r("drawer",{ref:"drawer",attrs:{size:"500px",title:e.title,isShowUpdate:!0,disabled:e.disabled},on:{cancel:e.cancel,submitForm:e.submitForm,closed:e.closed,update:e.update}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{slot:"body",model:e.ruleForm,rules:e.rules,"label-width":"100px","label-suffix":":","hide-required-asterisk":"see"===e.status},slot:"body"},[r("el-form-item",{attrs:{label:"公会运营",prop:"name"}},[r("div",[e._v(e._s(e.ruleForm.username))])]),r("el-form-item",{attrs:{label:"公会二维码",prop:"url"}},[r("el-upload",{ref:"upload",class:{hide:e.hideUpload},attrs:{action:"","show-file-list":"add"===e.status,"file-list":e.fileList,limit:e.limit,"on-change":e.beforeAvatarUpload,"on-exceed":e.masterFileMax,"before-remove":e.beforeRemove,"on-remove":e.handleRemove,"list-type":"picture-card",accept:e.accept,"http-request":e.upLoadFile,multiple:""}},["add"!==e.status&&""!==e.url?r("img",{staticClass:"avatar",attrs:{src:e.url}}):e._e(),"add"!=e.status||e.url&&""!=e.url?e._e():r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),r("div",{staticClass:"form-tips",staticStyle:{"margin-top":"10px"},attrs:{slot:"tip"},slot:"tip"},[r("el-tag",{attrs:{type:"warning"}},[e._v("最多上传"+e._s(e.limit)+"张，最大上传大小2MB")])],1)])],1)],1)],1)],1)}),W=[],Q=(r("00e5"),r("1e6d"),r("96c5"),r("9dcb"),r("430a"),r("eb5c"),r("0472")),X=r("40cb"),Z=r("127f"),ee={components:{uploadImg:X["a"],drawer:Q["a"]},data:function(){var e=this;return{status:"add",ruleForm:{id:"",url:""},oldParams:{},title:"编辑二维码",rules:{url:[{required:!0,message:"请上传二维码图片",trigger:"change",validator:function(t,r,a){return 0===e.imgList.length?a(new Error("请上传图片!")):a()}}]},fileList:[],imgs:[],limit:1,hideUpload:!1,accept:".png,.jpg,.jpeg",imgList:[],url:""}},computed:{disabled:function(){return!1}},methods:{loadParams:function(e,t){if(this.openComp(),this.status=e,"add"!==e){var r=JSON.parse(JSON.stringify(t));this.$set(this.$data,"ruleForm",r),this.limit=1}this.url=this.ruleForm.wechat_code,this.imgList=[],this.ruleForm.wechat_code&&""!==this.ruleForm.wechat_code&&this.imgList.push(this.ruleForm.wechat_code),this.oldParams=JSON.parse(JSON.stringify(this.ruleForm))},submitForm:function(e){var t=this;return Object(c["a"])(Object(u["a"])().mark((function r(){return Object(u["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(c["a"])(Object(u["a"])().mark((function e(r){var a,n,s;return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return a=t.ruleForm,n={id:a.id||null,wechat_code:t.imgList.join()},e.next=5,Object(g["Ub"])(n);case 5:s=e.sent,2e3===s.code&&t.$success("操作成功"),t.openComp(!1),t.$emit("getList"),e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},openComp:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.drawer.loadParams(e)},cancel:function(){var e=this;JSON.stringify(this.oldParams)!==JSON.stringify(this.ruleForm)?this.$confirm("关闭弹窗将不会保留您的更改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.openComp(!1)})).catch((function(){})):this.openComp(!1)},update:function(){this.status="update"},resetForm:function(){this.openComp(!1)},closed:function(){this.$emit("destoryComp")},validateField:function(e){this.$refs.ruleForm.validateField([e])},beforeAvatarUpload:function(e,t){var r=e.size/1024/1024<2;if(!r)return t=t.filter((function(t){return t!==e})),this.fileList=t,void this.$message.warning("上传头像图片大小不能超过 2MB!");var a=this,n=new FileReader;n.readAsDataURL(e.raw),n.onload=function(e){a.imgs.push(this.result)},this.hideUpload=t.length>=this.limit},beforeRemove:function(e){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleRemove:function(e,t){var r=this;this.hideUpload=t.length>=this.limit,this.imgList=[],t.map((function(e){e.file=e.raw,r.upLoadFile(e)}))},masterFileMax:function(e,t){this.$message.warning("请最多上传 ".concat(this.limit," 个文件。"))},upLoadFile:function(e){var t=e.file.type,r=JSON.parse(JSON.stringify(this.accept));if(r=r.replace(".",""),-1==t.indexOf(r)&&1==this.isFileType)return this.$message.warning("上传图片只能是"+r+"格式!"),!1;this.uploadImg(e)},uploadImg:function(e){var t=this;this.isShowSvg=!1,this.$store.commit("app/SET_LOADING",!0),Object(Z["a"])(e.file).then((function(e){"add"!==t.status?t.url=e.url:t.url="",e.url&&(t.isShowSvg=!0,t.imageUrl=e.url,t.imgList=[],t.imgList.push(e.url))})).catch((function(e){t.$message.error(e)}))}}},te=ee,re=(r("8e9a"),Object(h["a"])(te,K,W,!1,null,null,null)),ae=re.exports,ne={name:"guild-list",mixins:[x["a"]],components:{tableList:_["a"],editQrCodeComp:ae},data:function(){return{isDestoryComp:!1,status:null,ruleForm:{},guildTypeList:[],operatorList:[],isAuth:0}},computed:{cfgs:function(){var e=this,t=[],r=[{label:"序号",prop:"id"},{label:"公会运营",prop:"username"},{label:"公会二维码",isimg:!0,prop:"wechat_code",imgWidth:"50px",imgHeight:"50px"}],a=[{label:"操作",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},on:{click:function(){e.update(r.row)}}},"编辑")])}}];return t=this.permissionArr.includes("GuildOperate@saveWechatCode")?r.concat(a):r,{vm:this,url:A["a"].guild.guildOperateList,columns:t}}},created:function(){},methods:{getList:function(){this.$refs.tableList.getData()},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.editQrCodeComp.loadParams(e,t)}),50)},destoryComp:function(){this.isDestoryComp=!1},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,getGuildType();case 2:r=t.sent,2e3===r.code&&(a=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=a.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()}}},se=ne,ie=Object(h["a"])(se,H,V,!1,null,"2ebcb92c",null),oe=ie.exports,ue={components:{menuComp:s["a"],guildListComp:S,guildListApplyComp:J,guildLiveComp:R,guildQrCodeComp:oe},data:function(){return{menuList:[{name:"派对公会"},{name:"直播公会"},{name:"公会申请列表"},{name:"二维码配置"}],tabIndex:"0"}},computed:{comp:function(){var e="";switch(this.tabIndex){case"0":e="guildListComp";break;case"1":e="guildLiveComp";break;case"2":e="guildListApplyComp";break;case"3":e="guildQrCodeComp";break;default:break}return e}}},ce=ue,le=(r("9f1e"),Object(h["a"])(ce,a,n,!1,null,"6935ae63",null));t["default"]=le.exports},"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},2708:function(e,t,r){"use strict";var a=r("4672"),n=r("52c1"),s={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(a["a"])({},Object(n["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=s},"292e":function(e,t,r){"use strict";r("ddc3f")},"316f":function(e,t,r){"use strict";r("cd9a")},"65d5":function(e,t,r){"use strict";r("0c56")},"743ee":function(e,t,r){},"8e9a":function(e,t,r){"use strict";r("743ee")},"9f1e":function(e,t,r){"use strict";r("0b58")},cd9a:function(e,t,r){},ddc3f:function(e,t,r){}}]);