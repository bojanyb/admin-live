(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ee7ae92"],{1195:function(e,t,r){},"1c2c":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guild-list-box"},[r("menuComp",{ref:"menuComp",attrs:{menuList:e.menuList},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}}),r(e.comp,{tag:"component"})],1)},a=[],s=r("3923"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("editComp",{ref:"editComp",attrs:{type:2},on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},i=[],u=r("c7eb"),c=r("1da1"),l=r("5530"),p=(r("7db0"),r("d3b7"),r("caad"),r("2532"),r("b0c0"),r("a630"),r("3ca3"),r("13d5"),r("14d9"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"blocked-box"},[r("el-dialog",{attrs:{title:"冻结",visible:e.dialogVisible,width:"500px","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"冻结时间",prop:"ban_duration"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.ban_duration,callback:function(t){e.$set(e.ruleForm,"ban_duration",t)},expression:"ruleForm.ban_duration"}},e._l(e.timerList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"冻结说明",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"正常状态可不填",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)}),d=[],m=r("279a"),f={data:function(){return{dialogVisible:!1,timerList:m["a"].DURATION,ruleForm:{ban_duration:null,remark:""},rules:{ban_duration:[{required:!0,message:"请选择冻结时间",trigger:"change"}],remark:[{required:!0,message:"请填写冻结说明",trigger:"blur"}]}}},methods:{loadParams:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},submitForm:function(e){var t=this;return Object(c["a"])(Object(u["a"])().mark((function r(){return Object(u["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(c["a"])(Object(u["a"])().mark((function e(r){return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}t.dialogVisible=!1,t.$emit("evaluationFunc",t.ruleForm),e.next=7;break;case 5:return console.log("error submit!!"),e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},cancel:function(){this.dialogVisible=!1},resetForm:function(e){this.$refs[e].resetFields()}}},b=f,h=(r("316f"),r("2877")),y=Object(h["a"])(b,p,d,!1,null,"5e01749e",null),w=y.exports,g=r("1a72"),v=r("04a2"),_=r("4053"),L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guild-editComp-box"},[r("el-dialog",{attrs:{title:e.title,width:"600px",visible:e.isEditComp},on:{closed:e.closed,"update:visible":function(t){e.isEditComp=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"90px","label-suffix":":","hide-required-asterisk":"see"===e.status}},[r("el-form-item",{attrs:{label:"公会名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入公会名字"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"公会长ID",prop:"guild_number"}},[r("el-input",{attrs:{placeholder:"请输入公会长ID",disabled:"update"===e.status},model:{value:e.ruleForm.guild_number,callback:function(t){e.$set(e.ruleForm,"guild_number",t)},expression:"ruleForm.guild_number"}})],1),e.type+""==="2"?["add"===e.status||e.permissionArr.includes("Guild@updatePartyReplace")?r("el-form-item",{attrs:{label:"公司主体",prop:"company"}},[r("el-input",{attrs:{placeholder:"请输入公司主体"},model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}})],1):e._e()]:e._e(),e.type+""==="1"?["add"===e.status||e.permissionArr.includes("Guild@updateLiveReplace")?r("el-form-item",{attrs:{label:"公司主体",prop:"company"}},[r("el-input",{attrs:{placeholder:"请输入公司主体"},model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}})],1):e._e()]:e._e(),e.isAuth&&"update"===e.status?r("el-form-item",{attrs:{label:"公会运营",prop:"operator"}},[r("el-select",{attrs:{placeholder:"请选择公会运营"},model:{value:e.ruleForm.operator,callback:function(t){e.$set(e.ruleForm,"operator",t)},expression:"ruleForm.operator"}},e._l(e.operatorList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e()],2),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},O=[],k=(r("a9e3"),r("b64b"),r("e9c4"),r("2708")),x={mixins:[k["a"]],data:function(){return{status:"add",isEditComp:!1,rankList:m["a"].CLASSLIST,guildTypeList:[],ruleForm:{id:null,name:"",guild_number:"",company:"",guild_type:this.type,operator:null},oldParams:{},rules:{name:[{required:!0,message:"请输入公会昵称",trigger:"blur"}],guild_number:[{required:!0,message:"请输入公会长ID",trigger:"blur"}],rank:[{required:!0,message:"请选择公会等级",trigger:"change"}],operator:[{required:!0,message:"请选择公会运营",trigger:"change"}],remark:[{required:!1,message:"请输入公会简介",trigger:"blur"}]},operatorList:[],isAuth:0}},props:{type:{type:Number,default:2}},computed:{title:function(){var e=1==this.type?"直播":"派对";return"add"===this.status?"新增"+e+"公会":"update"===this.status?"修改"+e+"公会":void 0},disabled:function(){return"see"===this.status}},created:function(){this.getTypeList(),this.getAdminUserList()},methods:{loadParams:function(e,t){if(this.openComp(),this.status=e,"add"!==e){var r=JSON.parse(JSON.stringify(t)),n={};n.guild_type=r.guild_type?r.guild_type:"",n.operator=r.operator?r.operator:"",n.id=r.id?r.id:"",n.name=r.name?r.name:"",n.guild_number=r.guild_number?r.guild_number:"",n.company=r.company?r.company:"",n.status=r.status,this.$set(this.$data,"ruleForm",n)}this.oldParams=JSON.parse(JSON.stringify(this.ruleForm))},openComp:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isEditComp=e},cancel:function(){var e=this;JSON.stringify(this.oldParams)!==JSON.stringify(this.ruleForm)?this.$confirm("关闭弹窗将不会保留您的更改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.openComp(!1)})).catch((function(){})):this.openComp(!1)},update:function(){this.status="update"},submitForm:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.ruleForm.validate(function(){var t=Object(c["a"])(Object(u["a"])().mark((function t(r){var n,a,s;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=24;break}if(n=Object(l["a"])({},e.ruleForm),"add"!==e.status){t.next=9;break}return t.next=5,Object(g["R"])(n);case 5:a=t.sent,2e3===a.code&&e.$success("新增成功"),t.next=20;break;case 9:if(1!==n.guild_type){t.next=15;break}return t.next=12,Object(g["ec"])(n);case 12:s=t.sent,t.next=19;break;case 15:if(2!==n.guild_type){t.next=19;break}return t.next=18,Object(g["ic"])(n);case 18:s=t.sent;case 19:2e3===s.code&&e.$success("修改成功");case 20:e.openComp(!1),e.$emit("getList"),t.next=26;break;case 24:return console.log("error submit!!"),t.abrupt("return",!1);case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.openComp(!1)},validateField:function(e){this.$refs.ruleForm.validateField([e])},closed:function(){this.$emit("destoryComp")},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["T"])();case 2:r=t.sent,2e3===r.code&&(n=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=n.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getAdminUserList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["g"])();case 2:r=t.sent,2e3===r.code&&(n=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.operatorList=n.reduce((function(e,t){return e.push({name:t.username,value:t.id}),e}),[])||[],e.isAuth=r.data.is_auth);case 4:case"end":return t.stop()}}),t)})))()}}},j=x,F=(r("221b"),Object(h["a"])(j,L,O,!1,null,"dc6972b6",null)),A=F.exports,C=r("8daa"),P=r("cf45"),T={name:"guild-list",mixins:[k["a"]],components:{SearchPanel:v["a"],tableList:_["a"],editComp:A,blocked:w},data:function(){return{isDestoryComp:!1,guildParams:{},status:null,ruleForm:{},guildTypeList:[],operatorList:[],isAuth:0}},computed:{forms:function(){var e=[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会状态",placeholder:"请选择",options:m["a"].GUILDSTATUS},{name:"operator",type:"select",value:"",keyName:"id",optionLabel:"username",label:"公会运营",placeholder:"请选择",options:this.operatorList}],t=[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会状态",placeholder:"请选择",options:m["a"].GUILDSTATUS}];return this.isAuth?e:t},cfgs:function(){var e=this,t=[{label:"创建时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"公会ID",prop:"guild_number"},{label:"公会名称",prop:"name"},{label:"公会长",prop:"guild_user_nickname"},{label:"公会运营",render:function(t,r){var n=e.operatorList.find((function(e){return e.id===r.row.operator}));return t("span",n?n.username:"未知")}},{label:"公司主体",prop:"company",render:function(e,t){return e("span",t.row.company?t.row.company:"--")}},{label:"主播人数",prop:"user_count",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.user_count+"人")])}},{label:"今日流水",prop:"today_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.today_flow+"钻石")])}},{label:"昨日流水",prop:"yestoday_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",(t.row.yestoday_flow?t.row.yestoday_flow:0)+"钻石")])}},{label:"本周流水",prop:"week_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.week_flow+"钻石")])}},{label:"本月流水",prop:"month_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.month_flow+"钻石")])}},{label:"公会状态",render:function(e,t){return e("div",[e("span",{style:{display:1==t.row.status?"unset":"none",color:1==t.row.status?"#67C23A":""}},1==t.row.status?"正常":""),e("span",{style:{display:2==t.row.status?"unset":"none",color:2==t.row.status?"#E6A23C":""}},1==t.row.status?"":"已冻结"),e("span",{style:{display:3==t.row.status?"unset":"none",color:3==t.row.status?"#F56C6C":""}},1==t.row.status?"":"已解散")])}},{label:"操作",minWidth:"320px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyReplace")?"unset":"none"},on:{click:function(){e.change(r.row)}}},"更换会长"),t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyInfo")?"unset":"none"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(2,r.row)}}},"冻结"),t("el-button",{props:{type:"success"},style:{display:2===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(1,r.row)}}},"解冻"),t("el-button",{props:{type:"danger"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyDisband")?"unset":"none"},on:{click:function(){e.deleteParams(r.row)}}},"解散"),t("el-button",{props:{type:"danger"},style:{display:3==r.row.status?"unset":"none"}},"已解散")])}}],r=[{label:"创建时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"公会ID",prop:"guild_number"},{label:"公会名称",prop:"name"},{label:"公会长",prop:"guild_user_nickname"},{label:"公会运营",render:function(t,r){var n=e.operatorList.find((function(e){return e.id===r.row.operator}));return t("span",n?n.username:"未知")}},{label:"主播人数",prop:"user_count",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.user_count+"人")])}},{label:"今日流水",prop:"today_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.today_flow+"钻石")])}},{label:"昨日流水",prop:"yestoday_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",(t.row.yestoday_flow?t.row.yestoday_flow:0)+"钻石")])}},{label:"本周流水",prop:"week_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.week_flow+"钻石")])}},{label:"本月流水",prop:"month_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.month_flow+"钻石")])}},{label:"公会状态",render:function(e,t){return e("div",[e("span",{style:{display:1==t.row.status?"unset":"none",color:1==t.row.status?"#67C23A":""}},1==t.row.status?"正常":""),e("span",{style:{display:2==t.row.status?"unset":"none",color:2==t.row.status?"#E6A23C":""}},1==t.row.status?"":"已冻结"),e("span",{style:{display:3==t.row.status?"unset":"none",color:3==t.row.status?"#F56C6C":""}},1==t.row.status?"":"已解散")])}},{label:"操作",minWidth:"320px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyReplace")?"unset":"none"},on:{click:function(){e.change(r.row)}}},"更换会长"),t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyInfo")?"unset":"none"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(2,r.row)}}},"冻结"),t("el-button",{props:{type:"success"},style:{display:2===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(1,r.row)}}},"解冻"),t("el-button",{props:{type:"danger"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updatePartyDisband")?"unset":"none"},on:{click:function(){e.deleteParams(r.row)}}},"解散"),t("el-button",{props:{type:"danger"},style:{display:3==r.row.status?"unset":"none"}},"已解散")])}}];return{vm:this,url:C["a"].guild.list,columns:this.permissionArr.includes("Guild@updatePartyReplace")?t:r}}},created:function(){this.getTypeList(),this.getAdminUserList()},methods:{beforeSearch:function(e){var t=Object(l["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,user_number:t.user_number,guild_number:t.guild_number,status:t.status,operator:t.operator,guild_type:2}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.dateTimeParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.editComp.loadParams(e,t)}),50)},change:function(e){var t=this;this.$prompt("会长ID","更换会长",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"会长ID格式不正确"}).then((function(r){var n=r.value,a={id:e.id,guild_number:n,name:e.name,guild_type:e.guild_type,status:e.status,rebate:e.rebate};t.methodUpdatePartyReplace(a,"更换会长")})).catch((function(){}))},deleteParams:function(e){var t=this;return Object(c["a"])(Object(u["a"])().mark((function r(){var n;return Object(u["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:n="确认解散 [ "+e.name+" ] 吗？",t.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={id:e.id,guild_number:e.guild_number,name:e.name,guild_type:e.guild_type,status:3,rebate:e.rebate};t.methodUpdatePartyDisband(r,"解散公会")})).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 2:case"end":return r.stop()}}),r)})))()},destoryComp:function(){this.isDestoryComp=!1},freezeFunc:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a,s;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r.status=e,r.ruleForm=t,2===e?(a="确认冻结 [ "+t.name+" ] 吗？",r.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={id:t.id,guild_number:t.guild_number,name:t.name,guild_type:t.guild_type,status:e,rebate:t.rebate};r.methodUpdatePartyFreeze(n,"冻结公会")})).catch((function(){}))):(s={id:t.id,guild_number:t.guild_number,name:t.name,guild_type:t.guild_type,status:e,rebate:t.rebate},r.methodUpdatePartyFreeze(s,"解冻公会"));case 3:case"end":return n.stop()}}),n)})))()},methodUpdatePartyFreeze:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["hc"])(e);case 2:a=n.sent,2e3===a.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return n.stop()}}),n)})))()},methodUpdatePartyReplace:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["jc"])(e);case 2:a=n.sent,2e3===a.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return n.stop()}}),n)})))()},methodUpdatePartyDisband:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["gc"])(e);case 2:a=n.sent,2e3===a.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return n.stop()}}),n)})))()},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["T"])();case 2:r=t.sent,2e3===r.code&&(n=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=n.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getAdminUserList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["g"])();case 2:r=t.sent,2e3===r.code&&(e.operatorList=r.data.list,e.isAuth=r.data.is_auth,n={username:"全部",id:""},e.operatorList.unshift(n));case 4:case"end":return t.stop()}}),t)})))()}}},D=T,$=Object(h["a"])(D,o,i,!1,null,"58417dd6",null),I=$.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0,"show-add":!0},on:{onReset:e.reset,onSearch:e.onSearch,add:e.add},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}}),e.isDestoryComp?r("editComp",{ref:"editComp",attrs:{type:1},on:{destoryComp:e.destoryComp,getList:e.getList}}):e._e()],1)},z=[],G={name:"guild-list",mixins:[k["a"]],components:{SearchPanel:v["a"],tableList:_["a"],editComp:A},data:function(){return{isDestoryComp:!1,guildParams:{},status:null,ruleForm:{},guildTypeList:[],operatorList:[],isAuth:0}},computed:{forms:function(){var e=[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会状态",placeholder:"请选择",options:m["a"].GUILDSTATUS},{name:"operator",type:"select",value:"",keyName:"id",optionLabel:"username",label:"公会运营",placeholder:"请选择",options:this.operatorList}],t=[{name:"guild_number",type:"input",value:"",label:"公会ID",isNum:!0,placeholder:"请输入公会ID"},{name:"status",type:"select",value:"",keyName:"value",optionLabel:"name",label:"公会状态",placeholder:"请选择",options:m["a"].GUILDSTATUS}];return this.isAuth?e:t},cfgs:function(){var e=this,t=[{label:"创建时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"公会ID",prop:"guild_number"},{label:"公会名称",prop:"name"},{label:"公会长",prop:"guild_user_nickname"},{label:"公会运营",render:function(t,r){var n=e.operatorList.find((function(e){return e.id===r.row.operator}));return t("span",n?n.username:"未知")}},{label:"公司主体",prop:"company",render:function(e,t){return e("span",t.row.company?t.row.company:"--")}},{label:"主播人数",prop:"user_count",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.user_count+"人")])}},{label:"今日流水",prop:"today_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.today_flow+"钻石")])}},{label:"昨日流水",prop:"yestoday_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",(t.row.yestoday_flow?t.row.yestoday_flow:0)+"钻石")])}},{label:"本周流水",prop:"week_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.week_flow+"钻石")])}},{label:"本月流水",prop:"month_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.month_flow+"钻石")])}},{label:"公会状态",render:function(e,t){return e("div",[e("span",{style:{display:1==t.row.status?"unset":"none",color:1==t.row.status?"#67C23A":""}},1==t.row.status?"正常":""),e("span",{style:{display:2==t.row.status?"unset":"none",color:2==t.row.status?"#E6A23C":""}},1==t.row.status?"":"已冻结"),e("span",{style:{display:3==t.row.status?"unset":"none",color:3==t.row.status?"#F56C6C":""}},1==t.row.status?"":"已解散")])}},{label:"操作",minWidth:"320px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveReplace")?"unset":"none"},on:{click:function(){e.change(r.row)}}},"更换会长"),t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveInfo")?"unset":"none"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(2,r.row)}}},"冻结"),t("el-button",{props:{type:"success"},style:{display:2===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(1,r.row)}}},"解冻"),t("el-button",{props:{type:"danger"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveDisband")?"unset":"none"},on:{click:function(){e.deleteParams(r.row)}}},"解散"),t("el-button",{props:{type:"danger"},style:{display:3==r.row.status?"unset":"none"}},"已解散")])}}],r=[{label:"创建时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"公会ID",prop:"guild_number"},{label:"公会名称",prop:"name"},{label:"公会长",prop:"guild_user_nickname"},{label:"公会运营",render:function(t,r){var n=e.operatorList.find((function(e){return e.id===r.row.operator}));return t("span",n?n.username:"未知")}},{label:"主播人数",prop:"user_count",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.user_count+"人")])}},{label:"今日流水",prop:"today_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.today_flow+"钻石")])}},{label:"昨日流水",prop:"yestoday_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",(t.row.yestoday_flow?t.row.yestoday_flow:0)+"钻石")])}},{label:"本周流水",prop:"week_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.week_flow+"钻石")])}},{label:"本月流水",prop:"month_flow",sortable:"custom",render:function(e,t){return e("div",[e("span",t.row.month_flow+"钻石")])}},{label:"公会状态",render:function(e,t){return e("div",[e("span",{style:{display:1==t.row.status?"unset":"none",color:1==t.row.status?"#67C23A":""}},1==t.row.status?"正常":""),e("span",{style:{display:2==t.row.status?"unset":"none",color:2==t.row.status?"#E6A23C":""}},1==t.row.status?"":"已冻结"),e("span",{style:{display:3==t.row.status?"unset":"none",color:3==t.row.status?"#F56C6C":""}},1==t.row.status?"":"已解散")])}},{label:"操作",minWidth:"320px",fixed:"right",render:function(t,r){return t("div",[t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveReplace")?"unset":"none"},on:{click:function(){e.change(r.row)}}},"更换会长"),t("el-button",{props:{type:"primary"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveInfo")?"unset":"none"},on:{click:function(){e.update(r.row)}}},"修改"),t("el-button",{props:{type:"danger"},style:{display:1===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(2,r.row)}}},"冻结"),t("el-button",{props:{type:"success"},style:{display:2===r.row.status&&3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveFreeze")?"unset":"none"},on:{click:function(){e.freezeFunc(1,r.row)}}},"解冻"),t("el-button",{props:{type:"danger"},style:{display:3!==r.row.status&&e.permissionArr.includes("Guild@updateLiveDisband")?"unset":"none"},on:{click:function(){e.deleteParams(r.row)}}},"解散"),t("el-button",{props:{type:"danger"},style:{display:3==r.row.status?"unset":"none"}},"已解散")])}}];return{vm:this,url:C["a"].guild.list,columns:this.permissionArr.includes("Guild@updateLiveReplace")?t:r}}},created:function(){this.getTypeList(),this.getAdminUserList()},methods:{beforeSearch:function(e){var t=Object(l["a"])({},this.searchParams);return{page:e.page,pagesize:e.size,user_number:t.user_number,guild_number:t.guild_number,status:t.status,operator:t.operator,guild_type:1}},getList:function(){this.$refs.tableList.getData()},reset:function(){this.searchParams={},this.dateTimeParams={},this.getList()},onSearch:function(){this.getList()},add:function(){this.load("add")},update:function(e){this.load("update",e)},load:function(e,t){var r=this;this.isDestoryComp=!0,setTimeout((function(){r.$refs.editComp.loadParams(e,t)}),50)},change:function(e){var t=this;this.$prompt("会长ID","更换会长",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"会长ID格式不正确"}).then((function(r){var n=r.value,a={id:e.id,guild_number:n,name:e.name,guild_type:e.guild_type,status:e.status,rebate:e.rebate};t.methodUpdateLiveReplace(a,"更换会长")})).catch((function(){}))},deleteParams:function(e){var t=this;return Object(c["a"])(Object(u["a"])().mark((function r(){var n;return Object(u["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:n="确认解散 [ "+e.name+" ] 吗？",t.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={id:e.id,guild_number:e.guild_number,name:e.name,guild_type:e.guild_type,status:3,rebate:e.rebate};t.methodUpdateLiveDisband(r,"解散公会")})).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 2:case"end":return r.stop()}}),r)})))()},destoryComp:function(){this.isDestoryComp=!1},freezeFunc:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a,s;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r.status=e,r.ruleForm=t,2===e?(a="确认冻结 [ "+t.name+" ] 吗？",r.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={id:t.id,guild_number:t.guild_number,name:t.name,guild_type:t.guild_type,status:e,rebate:t.rebate};r.methodUpdateLiveFreeze(n,"冻结公会")})).catch((function(){}))):(s={id:t.id,guild_number:t.guild_number,name:t.name,guild_type:t.guild_type,status:e,rebate:t.rebate},r.methodUpdateLiveFreeze(s,"解冻公会"));case 3:case"end":return n.stop()}}),n)})))()},methodUpdateLiveFreeze:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["dc"])(e);case 2:a=n.sent,2e3===a.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return n.stop()}}),n)})))()},methodUpdateLiveReplace:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["fc"])(e);case 2:a=n.sent,2e3===a.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return n.stop()}}),n)})))()},methodUpdateLiveDisband:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["cc"])(e);case 2:a=n.sent,2e3===a.code&&(r.$success(t+"成功"),r.getList());case 4:case"end":return n.stop()}}),n)})))()},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["T"])();case 2:r=t.sent,2e3===r.code&&(n=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=n.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[]);case 4:case"end":return t.stop()}}),t)})))()},getAdminUserList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["g"])();case 2:r=t.sent,2e3===r.code&&(e.operatorList=r.data.list,e.isAuth=r.data.is_auth,n={username:"全部",id:""},e.operatorList.unshift(n));case 4:case"end":return t.stop()}}),t)})))()}}},U=G,N=Object(h["a"])(U,S,z,!1,null,"5f755faa",null),Y=N.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"guild-apply-list-box"},[r("div",{staticClass:"searchParams"},[r("SearchPanel",{attrs:{forms:e.forms,"show-reset":!0,"show-search-btn":!0},on:{onReset:e.reset,onSearch:e.onSearch},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),r("tableList",{ref:"tableList",attrs:{cfgs:e.cfgs}})],1)},B=[],E={data:function(){return{guildTypeList:[]}},components:{tableList:_["a"],SearchPanel:v["a"]},mixins:[k["a"]],computed:{forms:function(){var e=this;return[{name:"user_number",type:"input",value:"",label:"用户ID",isNum:!0,placeholder:"请输入用户ID"},{name:"guild_type",type:"select",value:"",keyName:"value",optionLabel:"name",label:"申请公会类型",placeholder:"请选择",options:this.guildTypeList},{name:"dateTimeParams",type:"datePicker",dateType:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",label:"时间选择",value:"",handler:{change:function(t){e.emptyDateTime(),e.setDateTime(t)},selectChange:function(t,r){e.emptyDateTime()}}}]},cfgs:function(){return{vm:this,url:C["a"].guild.newGuildApplyList,columns:[{label:"申请时间",render:function(e,t){return e("span",t.row.create_time?Object(P["h"])(t.row.create_time,"YYYY-MM-DD HH:mm:ss",!0):"无")}},{label:"用户ID",showOverFlow:!0,render:function(e,t){return e("span",t.row.user_number||"无")}},{label:"用户昵称",showOverFlow:!0,render:function(e,t){return e("span",t.row.guild_name||"无")}},{label:"申请公会类型",showOverFlow:!0,render:function(e,t){return e("span",t.row.guild_type_name||"无")}},{label:"主播数量",showOverFlow:!0,render:function(e,t){return e("span",t.row.question.question1||"无")}},{label:"曾经的合作平台",showOverFlow:!0,render:function(e,t){return e("span",t.row.question.question2||"无")}},{label:"联系方式",showOverFlow:!0,render:function(e,t){return e("span",t.row.contact_way||"无")}}]}}},created:function(){this.getTypeList()},methods:{getList:function(){this.$refs.tableList.getData()},beforeSearch:function(e){var t=Object(l["a"])(Object(l["a"])({},this.searchParams),this.dateTimeParams);return{page:e.page,pagesize:e.size,user_number:t.user_number,guild_type:t.guild_type,start_time:t.start_time?Math.floor(t.start_time/1e3):"",end_time:t.end_time?Math.floor(t.end_time/1e3):""}},setDateTime:function(e){var t=e?{start_time:e[0],end_time:e[1]}:{};this.$set(this,"dateTimeParams",t)},emptyDateTime:function(){this.dateTimeParams={}},reset:function(){this.searchParams={},this.dateTimeParams={},this.getList()},onSearch:function(){this.getList()},clickFunc:function(e,t){var r=this;return Object(c["a"])(Object(u["a"])().mark((function n(){var a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(2!==t){n.next=7;break}return n.next=3,Object(g["Gb"])({id:e,status:t});case 3:a=n.sent,2e3===a.code&&(r.$message.success("审核通过"),r.getList()),n.next=8;break;case 7:r.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(Object(u["a"])().mark((function n(){var a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["Gb"])({id:e,status:t});case 2:a=n.sent,2e3===a.code&&(r.$message.success("驳回成功"),r.getList());case 4:case"end":return n.stop()}}),n)})))).catch((function(){}));case 8:case"end":return n.stop()}}),n)})))()},getTypeList:function(){var e=this;return Object(c["a"])(Object(u["a"])().mark((function t(){var r,n,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["T"])();case 2:r=t.sent,2e3===r.code&&(n=Array.from(Array.isArray(r.data.list)?r.data.list:[]),e.guildTypeList=n.reduce((function(e,t){return e.push({name:t.remark,value:t.type}),e}),[])||[],a={name:"全部",value:""},e.guildTypeList.unshift(a));case 4:case"end":return t.stop()}}),t)})))()}}},M=E,q=(r("292e3"),Object(h["a"])(M,R,B,!1,null,null,null)),H=q.exports,J={components:{menuComp:s["a"],guildListComp:I,guildListApplyComp:H,guildLiveComp:Y},data:function(){return{menuList:[{name:"派对公会"},{name:"直播公会"},{name:"公会申请列表"}],tabIndex:"0"}},computed:{comp:function(){var e="";switch(this.tabIndex){case"0":e="guildListComp";break;case"1":e="guildLiveComp";break;case"2":e="guildListApplyComp";break;default:break}return e}}},V=J,W=(r("cf15"),Object(h["a"])(V,n,a,!1,null,"1c916552",null));t["default"]=W.exports},"1c70":function(e,t,r){},"1fe8":function(e,t,r){e.exports=r.p+"static/img/error.e53687be.png"},"221b":function(e,t,r){"use strict";r("e01c")},2708:function(e,t,r){"use strict";var n=r("5530"),a=r("2f62"),s={data:function(){return{tabIndex:"0",page:1,size:10,limit:10,searchParams:{},dataParams:{}}},computed:Object(n["a"])({},Object(a["c"])({permissionArr:function(e){return e.permission.permissionArr}})),mounted:function(){console.log(this.permissionArr,"permissionArr")}};t["a"]=s},"292e3":function(e,t,r){"use strict";r("1c70")},"2a52":function(e,t,r){},"316f":function(e,t,r){"use strict";r("1195")},cf15:function(e,t,r){"use strict";r("2a52")},e01c:function(e,t,r){}}]);